"use strict";(self.webpackChunklaunch_countdown_timer_app=self.webpackChunklaunch_countdown_timer_app||[]).push([[792],{700:(_s,gr,$e)=>{$e.d(gr,{$:()=>Je,A:()=>wo,G:()=>Wi,K:()=>Yl,L:()=>xr,N:()=>Ji,P:()=>xa,R:()=>Ir,U:()=>Hl,V:()=>On,W:()=>cg,X:()=>dg,Y:()=>rc,Z:()=>rr,_:()=>we,a:()=>cc,a0:()=>Da,a1:()=>pi,a2:()=>Ca,a3:()=>Jv,a4:()=>sc,a5:()=>ko,a6:()=>ki,a7:()=>Xv,a8:()=>Zv,a9:()=>eE,aA:()=>T0,aB:()=>dt,aC:()=>le,aD:()=>bc,aE:()=>Wr,aF:()=>bu,aG:()=>Bh,aH:()=>Kg,aI:()=>vE,aJ:()=>fn,aN:()=>Ra,aQ:()=>Aa,aa:()=>D0,ab:()=>C0,ac:()=>S0,ad:()=>P0,ae:()=>R0,af:()=>N0,ag:()=>vg,ah:()=>x0,ak:()=>O0,al:()=>ar,am:()=>ac,ap:()=>Nu,aq:()=>Ag,as:()=>Ch,at:()=>rE,au:()=>Yt,av:()=>Cu,aw:()=>Du,ax:()=>bn,ay:()=>Gh,az:()=>TE,b:()=>Mg,c:()=>Vh,d:()=>Gg,e:()=>qg,f:()=>Jg,g:()=>Ic,h:()=>Ws,i:()=>Bg,j:()=>Zg,k:()=>cm,l:()=>kh,m:()=>Va,p:()=>Dr,r:()=>pE,s:()=>Vu,u:()=>Ds});var P=$e(467),ye=$e(979),N=$e(401),Pe=$e(398);function Ft(f,l){var c={};for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&l.indexOf(p)<0&&(c[p]=f[p]);if(null!=f&&"function"==typeof Object.getOwnPropertySymbols){var y=0;for(p=Object.getOwnPropertySymbols(f);y<p.length;y++)l.indexOf(p[y])<0&&Object.prototype.propertyIsEnumerable.call(f,p[y])&&(c[p[y]]=f[p[y]])}return c}"function"==typeof SuppressedError&&SuppressedError;var vo=$e(779);const Dr={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},wo={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Wi=function Gi(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},bo=function To(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},vs=new N.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Di=new Pe.Vy("@firebase/auth");function ci(f,...l){Di.logLevel<=Pe.$b.ERROR&&Di.error(`Auth (${ye.SDK_VERSION}): ${f}`,...l)}function bn(f,...l){throw Ki(f,...l)}function dt(f,...l){return Ki(f,...l)}function _r(f,l,c){const p=Object.assign(Object.assign({},bo()),{[l]:c});return new N.FA("auth","Firebase",p).create(l,{appName:f.name})}function Vt(f){return _r(f,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ci(f,l,c){if(!(l instanceof c))throw c.name!==l.constructor.name&&bn(f,"argument-error"),_r(f,"argument-error",`Type of ${l.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ki(f,...l){if("string"!=typeof f){const c=l[0],p=[...l.slice(1)];return p[0]&&(p[0].appName=f.name),f._errorFactory.create(c,...p)}return vs.create(f,...l)}function le(f,l,...c){if(!f)throw Ki(l,...c)}function tr(f){const l="INTERNAL ASSERTION FAILED: "+f;throw ci(l),new Error(l)}function Yt(f,l){f||tr(l)}function nr(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.href)||""}function Tt(){return"http:"===Si()||"https:"===Si()}function Si(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.protocol)||null}class Pi{constructor(l,c){this.shortDelay=l,this.longDelay=c,Yt(c>l,"Short delay should be less than long delay!"),this.isMobile=(0,N.jZ)()||(0,N.lV)()}get(){return function Ao(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Tt()||(0,N.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function hi(f,l){Yt(f.emulator,"Emulator should always be set here");const{url:c}=f.emulator;return l?`${c}${l.startsWith("/")?l.slice(1):l}`:c}class In{static initialize(l,c,p){this.fetchImpl=l,c&&(this.headersImpl=c),p&&(this.responseImpl=p)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void tr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void tr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void tr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Do={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ls=new Pi(3e4,6e4);function Dt(f,l){return f.tenantId&&!l.tenantId?Object.assign(Object.assign({},l),{tenantId:f.tenantId}):l}function Be(f,l,c,p){return qr.apply(this,arguments)}function qr(){return(qr=(0,P.A)(function*(f,l,c,p,y={}){return Qi(f,y,(0,P.A)(function*(){let w={},M={};p&&("GET"===l?M=p:w={body:JSON.stringify(p)});const j=(0,N.Am)(Object.assign({key:f.config.apiKey},M)).slice(1),ne=yield f._getAdditionalHeaders();ne["Content-Type"]="application/json",f.languageCode&&(ne["X-Firebase-Locale"]=f.languageCode);const se=Object.assign({method:l,headers:ne},w);return(0,N.c1)()||(se.referrerPolicy="no-referrer"),In.fetch()(Bs(f,f.config.apiHost,c,j),se)}))})).apply(this,arguments)}function Qi(f,l,c){return wn.apply(this,arguments)}function wn(){return(wn=(0,P.A)(function*(f,l,c){f._canInitEmulator=!1;const p=Object.assign(Object.assign({},Do),l);try{const y=new Us(f),w=yield Promise.race([c(),y.promise]);y.clearNetworkTimeout();const M=yield w.json();if("needConfirmation"in M)throw tt(f,"account-exists-with-different-credential",M);if(w.ok&&!("errorMessage"in M))return M;{const j=w.ok?M.errorMessage:M.error.message,[ne,se]=j.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ne)throw tt(f,"credential-already-in-use",M);if("EMAIL_EXISTS"===ne)throw tt(f,"email-already-in-use",M);if("USER_DISABLED"===ne)throw tt(f,"user-disabled",M);const me=p[ne]||ne.toLowerCase().replace(/[_\s]+/g,"-");if(se)throw _r(f,me,se);bn(f,me)}}catch(y){if(y instanceof N.g)throw y;bn(f,"network-request-failed",{message:String(y)})}})).apply(this,arguments)}function yr(f,l,c,p){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,P.A)(function*(f,l,c,p,y={}){const w=yield Be(f,l,c,p,y);return"mfaPendingCredential"in w&&bn(f,"multi-factor-auth-required",{_serverResponse:w}),w})).apply(this,arguments)}function Bs(f,l,c,p){const y=`${l}${c}?${p}`;return f.config.emulator?hi(f.config,y):`${f.config.apiScheme}://${y}`}function Ea(f){switch(f){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Us{constructor(l){this.auth=l,this.timer=null,this.promise=new Promise((c,p)=>{this.timer=setTimeout(()=>p(dt(this.auth,"network-request-failed")),Ls.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function tt(f,l,c){const p={appName:f.name};c.email&&(p.email=c.email),c.phoneNumber&&(p.phoneNumber=c.phoneNumber);const y=dt(f,l,p);return y.customData._tokenResponse=c,y}function A(f){return void 0!==f&&void 0!==f.getResponse}function I(f){return void 0!==f&&void 0!==f.enterprise}class b{constructor(l){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===l.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=l.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=l.recaptchaEnforcementState}getProviderEnforcementState(l){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const c of this.recaptchaEnforcementState)if(c.provider&&c.provider===l)return Ea(c.enforcementState);return null}isProviderEnabled(l){return"ENFORCE"===this.getProviderEnforcementState(l)||"AUDIT"===this.getProviderEnforcementState(l)}}function O(){return(O=(0,P.A)(function*(f){return(yield Be(f,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Q(f,l){return ge.apply(this,arguments)}function ge(){return(ge=(0,P.A)(function*(f,l){return Be(f,"GET","/v2/recaptchaConfig",Dt(f,l))})).apply(this,arguments)}function _t(){return(_t=(0,P.A)(function*(f,l){return Be(f,"POST","/v1/accounts:delete",l)})).apply(this,arguments)}function Y(){return(Y=(0,P.A)(function*(f,l){return Be(f,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function be(f,l){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,P.A)(function*(f,l){return Be(f,"POST","/v1/accounts:lookup",l)})).apply(this,arguments)}function Ke(f){if(f)try{const l=new Date(Number(f));if(!isNaN(l.getTime()))return l.toUTCString()}catch{}}function Ia(){return(Ia=(0,P.A)(function*(f,l=!1){const c=(0,N.Ku)(f),p=yield c.getIdToken(l),y=zn(p);le(y&&y.exp&&y.auth_time&&y.iat,c.auth,"internal-error");const w="object"==typeof y.firebase?y.firebase:void 0,M=w?.sign_in_provider;return{claims:y,token:p,authTime:Ke(Co(y.auth_time)),issuedAtTime:Ke(Co(y.iat)),expirationTime:Ke(Co(y.exp)),signInProvider:M||null,signInSecondFactor:w?.sign_in_second_factor||null}})).apply(this,arguments)}function Co(f){return 1e3*Number(f)}function zn(f){const[l,c,p]=f.split(".");if(void 0===l||void 0===c||void 0===p)return ci("JWT malformed, contained fewer than 3 sections"),null;try{const y=(0,N.u)(c);return y?JSON.parse(y):(ci("Failed to decode base64 JWT payload"),null)}catch(y){return ci("Caught error parsing JWT payload as JSON",y?.toString()),null}}function $l(f){const l=zn(f);return le(l,"internal-error"),le(typeof l.exp<"u","internal-error"),le(typeof l.iat<"u","internal-error"),Number(l.exp)-Number(l.iat)}function Mi(f,l){return J.apply(this,arguments)}function J(){return(J=(0,P.A)(function*(f,l,c=!1){if(c)return l;try{return yield l}catch(p){throw p instanceof N.g&&function $({code:f}){return"auth/user-disabled"===f||"auth/user-token-expired"===f}(p)&&f.auth.currentUser===f&&(yield f.auth.signOut()),p}})).apply(this,arguments)}class ie{constructor(l){this.user=l,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(l){var c;if(l){const p=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),p}{this.errorBackoff=3e4;const y=(null!==(c=this.user.stsTokenManager.expirationTime)&&void 0!==c?c:0)-Date.now()-3e5;return Math.max(0,y)}}schedule(l=!1){var c=this;if(!this.isRunning)return;const p=this.getInterval(l);this.timerId=setTimeout((0,P.A)(function*(){yield c.iteration()}),p)}iteration(){var l=this;return(0,P.A)(function*(){try{yield l.user.getIdToken(!0)}catch(c){return void("auth/network-request-failed"===c?.code&&l.schedule(!0))}l.schedule()})()}}class ve{constructor(l,c){this.createdAt=l,this.lastLoginAt=c,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ke(this.lastLoginAt),this.creationTime=Ke(this.createdAt)}_copy(l){this.createdAt=l.createdAt,this.lastLoginAt=l.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Le(f){return ze.apply(this,arguments)}function ze(){return(ze=(0,P.A)(function*(f){var l;const c=f.auth,p=yield f.getIdToken(),y=yield Mi(f,be(c,{idToken:p}));le(y?.users.length,c,"internal-error");const w=y.users[0];f._notifyReloadListener(w);const M=null!==(l=w.providerUserInfo)&&void 0!==l&&l.length?Gr(w.providerUserInfo):[],j=function Jt(f,l){return[...f.filter(p=>!l.some(y=>y.providerId===p.providerId)),...l]}(f.providerData,M),me=!!f.isAnonymous&&!(f.email&&w.passwordHash||j?.length),ke={uid:w.localId,displayName:w.displayName||null,photoURL:w.photoUrl||null,email:w.email||null,emailVerified:w.emailVerified||!1,phoneNumber:w.phoneNumber||null,tenantId:w.tenantId||null,providerData:j,metadata:new ve(w.createdAt,w.lastLoginAt),isAnonymous:me};Object.assign(f,ke)})).apply(this,arguments)}function $t(){return($t=(0,P.A)(function*(f){const l=(0,N.Ku)(f);yield Le(l),yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)})).apply(this,arguments)}function Gr(f){return f.map(l=>{var{providerId:c}=l,p=Ft(l,["providerId"]);return{providerId:c,uid:p.rawId||"",displayName:p.displayName||null,email:p.email||null,phoneNumber:p.phoneNumber||null,photoURL:p.photoUrl||null}})}function Ve(){return(Ve=(0,P.A)(function*(f,l){const c=yield Qi(f,{},(0,P.A)(function*(){const p=(0,N.Am)({grant_type:"refresh_token",refresh_token:l}).slice(1),{tokenApiHost:y,apiKey:w}=f.config,M=Bs(f,y,"/v1/token",`key=${w}`),j=yield f._getAdditionalHeaders();return j["Content-Type"]="application/x-www-form-urlencoded",In.fetch()(M,{method:"POST",headers:j,body:p})}));return{accessToken:c.access_token,expiresIn:c.expires_in,refreshToken:c.refresh_token}})).apply(this,arguments)}function tg(){return(tg=(0,P.A)(function*(f,l){return Be(f,"POST","/v2/accounts:revokeToken",Dt(f,l))})).apply(this,arguments)}class Tu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(l){le(l.idToken,"internal-error"),le(typeof l.idToken<"u","internal-error"),le(typeof l.refreshToken<"u","internal-error");const c="expiresIn"in l&&typeof l.expiresIn<"u"?Number(l.expiresIn):$l(l.idToken);this.updateTokensAndExpiration(l.idToken,l.refreshToken,c)}updateFromIdToken(l){le(0!==l.length,"internal-error");const c=$l(l);this.updateTokensAndExpiration(l,null,c)}getToken(l,c=!1){var p=this;return(0,P.A)(function*(){return c||!p.accessToken||p.isExpired?(le(p.refreshToken,l,"user-token-expired"),p.refreshToken?(yield p.refresh(l,p.refreshToken),p.accessToken):null):p.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(l,c){var p=this;return(0,P.A)(function*(){const{accessToken:y,refreshToken:w,expiresIn:M}=yield function qn(f,l){return Ve.apply(this,arguments)}(l,c);p.updateTokensAndExpiration(y,w,Number(M))})()}updateTokensAndExpiration(l,c,p){this.refreshToken=c||null,this.accessToken=l||null,this.expirationTime=Date.now()+1e3*p}static fromJSON(l,c){const{refreshToken:p,accessToken:y,expirationTime:w}=c,M=new Tu;return p&&(le("string"==typeof p,"internal-error",{appName:l}),M.refreshToken=p),y&&(le("string"==typeof y,"internal-error",{appName:l}),M.accessToken=y),w&&(le("number"==typeof w,"internal-error",{appName:l}),M.expirationTime=w),M}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(l){this.accessToken=l.accessToken,this.refreshToken=l.refreshToken,this.expirationTime=l.expirationTime}_clone(){return Object.assign(new Tu,this.toJSON())}_performRefresh(){return tr("not implemented")}}function Ue(f,l){le("string"==typeof f||typeof f>"u","internal-error",{appName:l})}class js{constructor(l){var{uid:c,auth:p,stsTokenManager:y}=l,w=Ft(l,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ie(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=c,this.auth=p,this.stsTokenManager=y,this.accessToken=y.accessToken,this.displayName=w.displayName||null,this.email=w.email||null,this.emailVerified=w.emailVerified||!1,this.phoneNumber=w.phoneNumber||null,this.photoURL=w.photoURL||null,this.isAnonymous=w.isAnonymous||!1,this.tenantId=w.tenantId||null,this.providerData=w.providerData?[...w.providerData]:[],this.metadata=new ve(w.createdAt||void 0,w.lastLoginAt||void 0)}getIdToken(l){var c=this;return(0,P.A)(function*(){const p=yield Mi(c,c.stsTokenManager.getToken(c.auth,l));return le(p,c.auth,"internal-error"),c.accessToken!==p&&(c.accessToken=p,yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)),p})()}getIdTokenResult(l){return function eg(f){return Ia.apply(this,arguments)}(this,l)}reload(){return function it(f){return $t.apply(this,arguments)}(this)}_assign(l){this!==l&&(le(this.uid===l.uid,this.auth,"internal-error"),this.displayName=l.displayName,this.photoURL=l.photoURL,this.email=l.email,this.emailVerified=l.emailVerified,this.phoneNumber=l.phoneNumber,this.isAnonymous=l.isAnonymous,this.tenantId=l.tenantId,this.providerData=l.providerData.map(c=>Object.assign({},c)),this.metadata._copy(l.metadata),this.stsTokenManager._assign(l.stsTokenManager))}_clone(l){const c=new js(Object.assign(Object.assign({},this),{auth:l,stsTokenManager:this.stsTokenManager._clone()}));return c.metadata._copy(this.metadata),c}_onReload(l){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=l,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(l){this.reloadListener?this.reloadListener(l):this.reloadUserInfo=l}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(l,c=!1){var p=this;return(0,P.A)(function*(){let y=!1;l.idToken&&l.idToken!==p.stsTokenManager.accessToken&&(p.stsTokenManager.updateFromServerResponse(l),y=!0),c&&(yield Le(p)),yield p.auth._persistUserIfCurrent(p),y&&p.auth._notifyListenersIfCurrent(p)})()}delete(){var l=this;return(0,P.A)(function*(){if((0,ye._isFirebaseServerApp)(l.auth.app))return Promise.reject(Vt(l.auth));const c=yield l.getIdToken();return yield Mi(l,function Oe(f,l){return _t.apply(this,arguments)}(l.auth,{idToken:c})),l.stsTokenManager.clearRefreshToken(),l.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(l=>Object.assign({},l)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(l,c){var p,y,w,M,j,ne,se,me;const ke=null!==(p=c.displayName)&&void 0!==p?p:void 0,ft=null!==(y=c.email)&&void 0!==y?y:void 0,Qn=null!==(w=c.phoneNumber)&&void 0!==w?w:void 0,qt=null!==(M=c.photoURL)&&void 0!==M?M:void 0,Jr=null!==(j=c.tenantId)&&void 0!==j?j:void 0,wr=null!==(ne=c._redirectEventId)&&void 0!==ne?ne:void 0,Ho=null!==(se=c.createdAt)&&void 0!==se?se:void 0,Yh=null!==(me=c.lastLoginAt)&&void 0!==me?me:void 0,{uid:Jh,emailVerified:dm,isAnonymous:hm,providerData:Xh,stsTokenManager:fm}=c;le(Jh&&fm,l,"internal-error");const kE=Tu.fromJSON(this.name,fm);le("string"==typeof Jh,l,"internal-error"),Ue(ke,l.name),Ue(ft,l.name),le("boolean"==typeof dm,l,"internal-error"),le("boolean"==typeof hm,l,"internal-error"),Ue(Qn,l.name),Ue(qt,l.name),Ue(Jr,l.name),Ue(wr,l.name),Ue(Ho,l.name),Ue(Yh,l.name);const Yu=new js({uid:Jh,auth:l,email:ft,emailVerified:dm,displayName:ke,isAnonymous:hm,photoURL:qt,phoneNumber:Qn,tenantId:Jr,stsTokenManager:kE,createdAt:Ho,lastLoginAt:Yh});return Xh&&Array.isArray(Xh)&&(Yu.providerData=Xh.map(Sc=>Object.assign({},Sc))),wr&&(Yu._redirectEventId=wr),Yu}static _fromIdTokenResponse(l,c,p=!1){return(0,P.A)(function*(){const y=new Tu;y.updateFromServerResponse(c);const w=new js({uid:c.localId,auth:l,stsTokenManager:y,isAnonymous:p});return yield Le(w),w})()}static _fromGetAccountInfoResponse(l,c,p){return(0,P.A)(function*(){const y=c.users[0];le(void 0!==y.localId,"internal-error");const w=void 0!==y.providerUserInfo?Gr(y.providerUserInfo):[],M=!(y.email&&y.passwordHash||w?.length),j=new Tu;j.updateFromIdToken(p);const ne=new js({uid:y.localId,auth:l,stsTokenManager:j,isAnonymous:M}),se={uid:y.localId,displayName:y.displayName||null,photoURL:y.photoUrl||null,email:y.email||null,emailVerified:y.emailVerified||!1,phoneNumber:y.phoneNumber||null,tenantId:y.tenantId||null,providerData:w,metadata:new ve(y.createdAt,y.lastLoginAt),isAnonymous:!(y.email&&y.passwordHash||w?.length)};return Object.assign(ne,se),ne})()}}const Gn=new Map;function Wr(f){Yt(f instanceof Function,"Expected a class definition");let l=Gn.get(f);return l?(Yt(l instanceof f,"Instance stored in cache mismatched with class"),l):(l=new f,Gn.set(f,l),l)}const Hl=(()=>{class f{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,P.A)(function*(){return!0})()}_set(c,p){var y=this;return(0,P.A)(function*(){y.storage[c]=p})()}_get(c){var p=this;return(0,P.A)(function*(){const y=p.storage[c];return void 0===y?null:y})()}_remove(c){var p=this;return(0,P.A)(function*(){delete p.storage[c]})()}_addListener(c,p){}_removeListener(c,p){}}return f.type="NONE",f})();function bu(f,l,c){return`firebase:${f}:${l}:${c}`}class Es{constructor(l,c,p){this.persistence=l,this.auth=c,this.userKey=p;const{config:y,name:w}=this.auth;this.fullUserKey=bu(this.userKey,y.apiKey,w),this.fullPersistenceKey=bu("persistence",y.apiKey,w),this.boundEventHandler=c._onStorageEvent.bind(c),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(l){return this.persistence._set(this.fullUserKey,l.toJSON())}getCurrentUser(){var l=this;return(0,P.A)(function*(){const c=yield l.persistence._get(l.fullUserKey);return c?js._fromJSON(l.auth,c):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(l){var c=this;return(0,P.A)(function*(){if(c.persistence===l)return;const p=yield c.getCurrentUser();return yield c.removeCurrentUser(),c.persistence=l,p?c.setCurrentUser(p):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(l,c,p="authUser"){return(0,P.A)(function*(){if(!c.length)return new Es(Wr(Hl),l,p);const y=(yield Promise.all(c.map(function(){var se=(0,P.A)(function*(me){if(yield me._isAvailable())return me});return function(me){return se.apply(this,arguments)}}()))).filter(se=>se);let w=y[0]||Wr(Hl);const M=bu(p,l.config.apiKey,l.name);let j=null;for(const se of c)try{const me=yield se._get(M);if(me){const ke=js._fromJSON(l,me);se!==w&&(j=ke),w=se;break}}catch{}const ne=y.filter(se=>se._shouldAllowMigration);return w._shouldAllowMigration&&ne.length?(w=ne[0],j&&(yield w._set(M,j.toJSON())),yield Promise.all(c.map(function(){var se=(0,P.A)(function*(me){if(me!==w)try{yield me._remove(M)}catch{}});return function(me){return se.apply(this,arguments)}}())),new Es(w,l,p)):new Es(w,l,p)})()}}function Au(f){const l=f.toLowerCase();if(l.includes("opera/")||l.includes("opr/")||l.includes("opios/"))return"Opera";if(at(l))return"IEMobile";if(l.includes("msie")||l.includes("trident/"))return"IE";if(l.includes("edge/"))return"Edge";if(zl(l))return"Firefox";if(l.includes("silk/"))return"Silk";if(th(l))return"Blackberry";if(Cr(l))return"Webos";if(eh(l))return"Safari";if((l.includes("chrome/")||ng(l))&&!l.includes("edge/"))return"Chrome";if(Du(l))return"Android";{const p=f.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===p?.length)return p[1]}return"Other"}function zl(f=(0,N.ZQ)()){return/firefox\//i.test(f)}function eh(f=(0,N.ZQ)()){const l=f.toLowerCase();return l.includes("safari/")&&!l.includes("chrome/")&&!l.includes("crios/")&&!l.includes("android")}function ng(f=(0,N.ZQ)()){return/crios\//i.test(f)}function at(f=(0,N.ZQ)()){return/iemobile/i.test(f)}function Du(f=(0,N.ZQ)()){return/android/i.test(f)}function th(f=(0,N.ZQ)()){return/blackberry/i.test(f)}function Cr(f=(0,N.ZQ)()){return/webos/i.test(f)}function Cu(f=(0,N.ZQ)()){return/iphone|ipad|ipod/i.test(f)||/macintosh/i.test(f)&&/mobile/i.test(f)}function T0(f=(0,N.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(f)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(f)}function Vv(f=(0,N.ZQ)()){return Cu(f)||Du(f)||Cr(f)||th(f)||/windows phone/i.test(f)||at(f)}function Ie(f,l=[]){let c;switch(f){case"Browser":c=Au((0,N.ZQ)());break;case"Worker":c=`${Au((0,N.ZQ)())}-${f}`;break;default:c=f}const p=l.length?l.join(","):"FirebaseCore-web";return`${c}/JsCore/${ye.SDK_VERSION}/${p}`}class nh{constructor(l){this.auth=l,this.queue=[]}pushCallback(l,c){const p=w=>new Promise((M,j)=>{try{M(l(w))}catch(ne){j(ne)}});p.onAbort=c,this.queue.push(p);const y=this.queue.length-1;return()=>{this.queue[y]=()=>Promise.resolve()}}runMiddleware(l){var c=this;return(0,P.A)(function*(){if(c.auth.currentUser===l)return;const p=[];try{for(const y of c.queue)yield y(l),y.onAbort&&p.push(y.onAbort)}catch(y){p.reverse();for(const w of p)try{w()}catch{}throw c.auth._errorFactory.create("login-blocked",{originalMessage:y?.message})}})()}}function ql(){return(ql=(0,P.A)(function*(f,l={}){return Be(f,"GET","/v2/passwordPolicy",Dt(f,l))})).apply(this,arguments)}class Lv{constructor(l){var c,p,y,w;const M=l.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(c=M.minPasswordLength)&&void 0!==c?c:6,M.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=M.maxPasswordLength),void 0!==M.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=M.containsLowercaseCharacter),void 0!==M.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=M.containsUppercaseCharacter),void 0!==M.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=M.containsNumericCharacter),void 0!==M.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=M.containsNonAlphanumericCharacter),this.enforcementState=l.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(y=null===(p=l.allowedNonAlphanumericCharacters)||void 0===p?void 0:p.join(""))&&void 0!==y?y:"",this.forceUpgradeOnSignin=null!==(w=l.forceUpgradeOnSignin)&&void 0!==w&&w,this.schemaVersion=l.schemaVersion}validatePassword(l){var c,p,y,w,M,j;const ne={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(l,ne),this.validatePasswordCharacterOptions(l,ne),ne.isValid&&(ne.isValid=null===(c=ne.meetsMinPasswordLength)||void 0===c||c),ne.isValid&&(ne.isValid=null===(p=ne.meetsMaxPasswordLength)||void 0===p||p),ne.isValid&&(ne.isValid=null===(y=ne.containsLowercaseLetter)||void 0===y||y),ne.isValid&&(ne.isValid=null===(w=ne.containsUppercaseLetter)||void 0===w||w),ne.isValid&&(ne.isValid=null===(M=ne.containsNumericCharacter)||void 0===M||M),ne.isValid&&(ne.isValid=null===(j=ne.containsNonAlphanumericCharacter)||void 0===j||j),ne}validatePasswordLengthOptions(l,c){const p=this.customStrengthOptions.minPasswordLength,y=this.customStrengthOptions.maxPasswordLength;p&&(c.meetsMinPasswordLength=l.length>=p),y&&(c.meetsMaxPasswordLength=l.length<=y)}validatePasswordCharacterOptions(l,c){let p;this.updatePasswordCharacterOptionsStatuses(c,!1,!1,!1,!1);for(let y=0;y<l.length;y++)p=l.charAt(y),this.updatePasswordCharacterOptionsStatuses(c,p>="a"&&p<="z",p>="A"&&p<="Z",p>="0"&&p<="9",this.allowedNonAlphanumericCharacters.includes(p))}updatePasswordCharacterOptionsStatuses(l,c,p,y,w){this.customStrengthOptions.containsLowercaseLetter&&(l.containsLowercaseLetter||(l.containsLowercaseLetter=c)),this.customStrengthOptions.containsUppercaseLetter&&(l.containsUppercaseLetter||(l.containsUppercaseLetter=p)),this.customStrengthOptions.containsNumericCharacter&&(l.containsNumericCharacter||(l.containsNumericCharacter=y)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(l.containsNonAlphanumericCharacter||(l.containsNonAlphanumericCharacter=w))}}class sh{constructor(l,c,p,y){this.app=l,this.heartbeatServiceProvider=c,this.appCheckServiceProvider=p,this.config=y,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bv(this),this.idTokenSubscription=new Bv(this),this.beforeStateQueue=new nh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vs,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=l.name,this.clientVersion=y.sdkClientVersion}_initializeWithPersistence(l,c){var p=this;return c&&(this._popupRedirectResolver=Wr(c)),this._initializationPromise=this.queue((0,P.A)(function*(){var y,w;if(!p._deleted&&(p.persistenceManager=yield Es.create(p,l),!p._deleted)){if(null!==(y=p._popupRedirectResolver)&&void 0!==y&&y._shouldInitProactively)try{yield p._popupRedirectResolver._initialize(p)}catch{}yield p.initializeCurrentUser(c),p.lastNotifiedUid=(null===(w=p.currentUser)||void 0===w?void 0:w.uid)||null,!p._deleted&&(p._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var l=this;return(0,P.A)(function*(){if(l._deleted)return;const c=yield l.assertedPersistence.getCurrentUser();if(l.currentUser||c){if(l.currentUser&&c&&l.currentUser.uid===c.uid)return l._currentUser._assign(c),void(yield l.currentUser.getIdToken());yield l._updateCurrentUser(c,!0)}})()}initializeCurrentUserFromIdToken(l){var c=this;return(0,P.A)(function*(){try{const p=yield be(c,{idToken:l}),y=yield js._fromGetAccountInfoResponse(c,p,l);yield c.directlySetCurrentUser(y)}catch(p){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",p),yield c.directlySetCurrentUser(null)}})()}initializeCurrentUser(l){var c=this;return(0,P.A)(function*(){var p;if((0,ye._isFirebaseServerApp)(c.app)){const j=c.app.settings.authIdToken;return j?new Promise(ne=>{setTimeout(()=>c.initializeCurrentUserFromIdToken(j).then(ne,ne))}):c.directlySetCurrentUser(null)}const y=yield c.assertedPersistence.getCurrentUser();let w=y,M=!1;if(l&&c.config.authDomain){yield c.getOrInitRedirectPersistenceManager();const j=null===(p=c.redirectUser)||void 0===p?void 0:p._redirectEventId,ne=w?._redirectEventId,se=yield c.tryRedirectSignIn(l);(!j||j===ne)&&se?.user&&(w=se.user,M=!0)}if(!w)return c.directlySetCurrentUser(null);if(!w._redirectEventId){if(M)try{yield c.beforeStateQueue.runMiddleware(w)}catch(j){w=y,c._popupRedirectResolver._overrideRedirectResult(c,()=>Promise.reject(j))}return w?c.reloadAndSetCurrentUserOrClear(w):c.directlySetCurrentUser(null)}return le(c._popupRedirectResolver,c,"argument-error"),yield c.getOrInitRedirectPersistenceManager(),c.redirectUser&&c.redirectUser._redirectEventId===w._redirectEventId?c.directlySetCurrentUser(w):c.reloadAndSetCurrentUserOrClear(w)})()}tryRedirectSignIn(l){var c=this;return(0,P.A)(function*(){let p=null;try{p=yield c._popupRedirectResolver._completeRedirectFn(c,l,!0)}catch{yield c._setRedirectUser(null)}return p})()}reloadAndSetCurrentUserOrClear(l){var c=this;return(0,P.A)(function*(){try{yield Le(l)}catch(p){if("auth/network-request-failed"!==p?.code)return c.directlySetCurrentUser(null)}return c.directlySetCurrentUser(l)})()}useDeviceLanguage(){this.languageCode=function di(){if(typeof navigator>"u")return null;const f=navigator;return f.languages&&f.languages[0]||f.language||null}()}_delete(){var l=this;return(0,P.A)(function*(){l._deleted=!0})()}updateCurrentUser(l){var c=this;return(0,P.A)(function*(){if((0,ye._isFirebaseServerApp)(c.app))return Promise.reject(Vt(c));const p=l?(0,N.Ku)(l):null;return p&&le(p.auth.config.apiKey===c.config.apiKey,c,"invalid-user-token"),c._updateCurrentUser(p&&p._clone(c))})()}_updateCurrentUser(l,c=!1){var p=this;return(0,P.A)(function*(){if(!p._deleted)return l&&le(p.tenantId===l.tenantId,p,"tenant-id-mismatch"),c||(yield p.beforeStateQueue.runMiddleware(l)),p.queue((0,P.A)(function*(){yield p.directlySetCurrentUser(l),p.notifyAuthListeners()}))})()}signOut(){var l=this;return(0,P.A)(function*(){return(0,ye._isFirebaseServerApp)(l.app)?Promise.reject(Vt(l)):(yield l.beforeStateQueue.runMiddleware(null),(l.redirectPersistenceManager||l._popupRedirectResolver)&&(yield l._setRedirectUser(null)),l._updateCurrentUser(null,!0))})()}setPersistence(l){var c=this;return(0,ye._isFirebaseServerApp)(this.app)?Promise.reject(Vt(this)):this.queue((0,P.A)(function*(){yield c.assertedPersistence.setPersistence(Wr(l))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(l){var c=this;return(0,P.A)(function*(){c._getPasswordPolicyInternal()||(yield c._updatePasswordPolicy());const p=c._getPasswordPolicyInternal();return p.schemaVersion!==c.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(c._errorFactory.create("unsupported-password-policy-schema-version",{})):p.validatePassword(l)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var l=this;return(0,P.A)(function*(){const c=yield function rh(f){return ql.apply(this,arguments)}(l),p=new Lv(c);null===l.tenantId?l._projectPasswordPolicy=p:l._tenantPasswordPolicies[l.tenantId]=p})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(l){this._errorFactory=new N.FA("auth","Firebase",l())}onAuthStateChanged(l,c,p){return this.registerStateListener(this.authStateSubscription,l,c,p)}beforeAuthStateChanged(l,c){return this.beforeStateQueue.pushCallback(l,c)}onIdTokenChanged(l,c,p){return this.registerStateListener(this.idTokenSubscription,l,c,p)}authStateReady(){return new Promise((l,c)=>{if(this.currentUser)l();else{const p=this.onAuthStateChanged(()=>{p(),l()},c)}})}revokeAccessToken(l){var c=this;return(0,P.A)(function*(){if(c.currentUser){const p=yield c.currentUser.getIdToken(),y={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:l,idToken:p};null!=c.tenantId&&(y.tenantId=c.tenantId),yield function w0(f,l){return tg.apply(this,arguments)}(c,y)}})()}toJSON(){var l;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(l=this._currentUser)||void 0===l?void 0:l.toJSON()}}_setRedirectUser(l,c){var p=this;return(0,P.A)(function*(){const y=yield p.getOrInitRedirectPersistenceManager(c);return null===l?y.removeCurrentUser():y.setCurrentUser(l)})()}getOrInitRedirectPersistenceManager(l){var c=this;return(0,P.A)(function*(){if(!c.redirectPersistenceManager){const p=l&&Wr(l)||c._popupRedirectResolver;le(p,c,"argument-error"),c.redirectPersistenceManager=yield Es.create(c,[Wr(p._redirectPersistence)],"redirectUser"),c.redirectUser=yield c.redirectPersistenceManager.getCurrentUser()}return c.redirectPersistenceManager})()}_redirectUserForId(l){var c=this;return(0,P.A)(function*(){var p,y;return c._isInitialized&&(yield c.queue((0,P.A)(function*(){}))),(null===(p=c._currentUser)||void 0===p?void 0:p._redirectEventId)===l?c._currentUser:(null===(y=c.redirectUser)||void 0===y?void 0:y._redirectEventId)===l?c.redirectUser:null})()}_persistUserIfCurrent(l){var c=this;return(0,P.A)(function*(){if(l===c.currentUser)return c.queue((0,P.A)(function*(){return c.directlySetCurrentUser(l)}))})()}_notifyListenersIfCurrent(l){l===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var l,c;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const p=null!==(c=null===(l=this.currentUser)||void 0===l?void 0:l.uid)&&void 0!==c?c:null;this.lastNotifiedUid!==p&&(this.lastNotifiedUid=p,this.authStateSubscription.next(this.currentUser))}registerStateListener(l,c,p,y){if(this._deleted)return()=>{};const w="function"==typeof c?c:c.next.bind(c);let M=!1;const j=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(j,this,"internal-error"),j.then(()=>{M||w(this.currentUser)}),"function"==typeof c){const ne=l.addObserver(c,p,y);return()=>{M=!0,ne()}}{const ne=l.addObserver(c);return()=>{M=!0,ne()}}}directlySetCurrentUser(l){var c=this;return(0,P.A)(function*(){c.currentUser&&c.currentUser!==l&&c._currentUser._stopProactiveRefresh(),l&&c.isProactiveRefreshEnabled&&l._startProactiveRefresh(),c.currentUser=l,l?yield c.assertedPersistence.setCurrentUser(l):yield c.assertedPersistence.removeCurrentUser()})()}queue(l){return this.operations=this.operations.then(l,l),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(l){!l||this.frameworks.includes(l)||(this.frameworks.push(l),this.frameworks.sort(),this.clientVersion=Ie(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var l=this;return(0,P.A)(function*(){var c;const p={"X-Client-Version":l.clientVersion};l.app.options.appId&&(p["X-Firebase-gmpid"]=l.app.options.appId);const y=yield null===(c=l.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===c?void 0:c.getHeartbeatsHeader();y&&(p["X-Firebase-Client"]=y);const w=yield l._getAppCheckToken();return w&&(p["X-Firebase-AppCheck"]=w),p})()}_getAppCheckToken(){var l=this;return(0,P.A)(function*(){var c;const p=yield null===(c=l.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===c?void 0:c.getToken();return p?.error&&function va(f,...l){Di.logLevel<=Pe.$b.WARN&&Di.warn(`Auth (${ye.SDK_VERSION}): ${f}`,...l)}(`Error while retrieving App Check token: ${p.error}`),p?.token})()}}function fn(f){return(0,N.Ku)(f)}class Bv{constructor(l){this.auth=l,this.observer=null,this.addObserver=(0,N.tD)(c=>this.observer=c)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Gl={loadJS:()=>(0,P.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rg(f){return Gl.loadJS(f)}function ig(f){return`__${f}${Math.floor(1e6*Math.random())}`}class ah{constructor(l){this.type="recaptcha-enterprise",this.auth=fn(l)}verify(l="verify",c=!1){var p=this;return(0,P.A)(function*(){function w(){return w=(0,P.A)(function*(j){if(!c){if(null==j.tenantId&&null!=j._agentRecaptchaConfig)return j._agentRecaptchaConfig.siteKey;if(null!=j.tenantId&&void 0!==j._tenantRecaptchaConfigs[j.tenantId])return j._tenantRecaptchaConfigs[j.tenantId].siteKey}return new Promise(function(){var ne=(0,P.A)(function*(se,me){Q(j,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ke=>{if(void 0!==ke.recaptchaKey){const ft=new b(ke);return null==j.tenantId?j._agentRecaptchaConfig=ft:j._tenantRecaptchaConfigs[j.tenantId]=ft,se(ft.siteKey)}me(new Error("recaptcha Enterprise site key undefined"))}).catch(ke=>{me(ke)})});return function(se,me){return ne.apply(this,arguments)}}())}),w.apply(this,arguments)}function M(j,ne,se){const me=window.grecaptcha;I(me)?me.enterprise.ready(()=>{me.enterprise.execute(j,{action:l}).then(ke=>{ne(ke)}).catch(()=>{ne("NO_RECAPTCHA")})}):se(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((j,ne)=>{(function y(j){return w.apply(this,arguments)})(p.auth).then(se=>{if(!c&&I(window.grecaptcha))M(se,j,ne);else{if(typeof window>"u")return void ne(new Error("RecaptchaVerifier is only supported in browser"));let me=function oh(){return Gl.recaptchaEnterpriseScript}();0!==me.length&&(me+=se),rg(me).then(()=>{M(se,j,ne)}).catch(ke=>{ne(ke)})}}).catch(se=>{ne(se)})})})()}}function So(f,l,c){return uh.apply(this,arguments)}function uh(){return(uh=(0,P.A)(function*(f,l,c,p=!1){const y=new ah(f);let w;try{w=yield y.verify(c)}catch{w=yield y.verify(c,!0)}const M=Object.assign({},l);return Object.assign(M,p?{captchaResp:w}:{captchaResponse:w}),Object.assign(M,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(M,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),M})).apply(this,arguments)}function fi(f,l,c,p){return lh.apply(this,arguments)}function lh(){return lh=(0,P.A)(function*(f,l,c,p){var y;if(null!==(y=f._getRecaptchaConfig())&&void 0!==y&&y.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const w=yield So(f,l,c,"getOobCode"===c);return p(f,w)}return p(f,l).catch(function(){var w=(0,P.A)(function*(M){if("auth/missing-recaptcha-token"===M.code){console.log(`${c} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const j=yield So(f,l,c,"getOobCode"===c);return p(f,j)}return Promise.reject(M)});return function(M){return w.apply(this,arguments)}}())}),lh.apply(this,arguments)}function Yl(f,l,c){const p=fn(f);le(p._canInitEmulator,p,"emulator-config-failed"),le(/^https?:\/\//.test(l),p,"invalid-emulator-scheme");const y=!!c?.disableWarnings,w=wa(l),{host:M,port:j}=function $v(f){const l=wa(f),c=/(\/\/)?([^?#/]+)/.exec(f.substr(l.length));if(!c)return{host:"",port:null};const p=c[2].split("@").pop()||"",y=/^(\[[^\]]+\])(:|$)/.exec(p);if(y){const w=y[1];return{host:w,port:sg(p.substr(w.length+1))}}{const[w,M]=p.split(":");return{host:w,port:sg(M)}}}(l);p.config.emulator={url:`${w}//${M}${null===j?"":`:${j}`}/`},p.settings.appVerificationDisabledForTesting=!0,p.emulatorConfig=Object.freeze({host:M,port:j,protocol:w.replace(":",""),options:Object.freeze({disableWarnings:y})}),y||function Hv(){function f(){const l=document.createElement("p"),c=l.style;l.innerText="Running in emulator mode. Do not use with production credentials.",c.position="fixed",c.width="100%",c.backgroundColor="#ffffff",c.border=".1em solid #000000",c.color="#b50000",c.bottom="0px",c.left="0px",c.margin="0px",c.zIndex="10000",c.textAlign="center",l.classList.add("firebase-emulator-warning"),document.body.appendChild(l)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",f):f())}()}function wa(f){const l=f.indexOf(":");return l<0?"":f.substr(0,l+1)}function sg(f){if(!f)return null;const l=Number(f);return isNaN(l)?null:l}class xr{constructor(l,c){this.providerId=l,this.signInMethod=c}toJSON(){return tr("not implemented")}_getIdTokenResponse(l){return tr("not implemented")}_linkToIdToken(l,c){return tr("not implemented")}_getReauthenticationResolver(l){return tr("not implemented")}}function Pu(f,l){return Or.apply(this,arguments)}function Or(){return(Or=(0,P.A)(function*(f,l){return Be(f,"POST","/v1/accounts:resetPassword",Dt(f,l))})).apply(this,arguments)}function ht(){return(ht=(0,P.A)(function*(f,l){return Be(f,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function Jl(f,l){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,P.A)(function*(f,l){return Be(f,"POST","/v1/accounts:signUp",l)})).apply(this,arguments)}function Xl(){return(Xl=(0,P.A)(function*(f,l){return Be(f,"POST","/v1/accounts:update",Dt(f,l))})).apply(this,arguments)}function Is(f,l){return Po.apply(this,arguments)}function Po(){return(Po=(0,P.A)(function*(f,l){return yr(f,"POST","/v1/accounts:signInWithPassword",Dt(f,l))})).apply(this,arguments)}function Mu(f,l){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,P.A)(function*(f,l){return Be(f,"POST","/v1/accounts:sendOobCode",Dt(f,l))})).apply(this,arguments)}function ec(){return(ec=(0,P.A)(function*(f,l){return Mu(f,l)})).apply(this,arguments)}function og(f,l){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,P.A)(function*(f,l){return Mu(f,l)})).apply(this,arguments)}function ag(f,l){return tc.apply(this,arguments)}function tc(){return(tc=(0,P.A)(function*(f,l){return Mu(f,l)})).apply(this,arguments)}function nc(){return(nc=(0,P.A)(function*(f,l){return Mu(f,l)})).apply(this,arguments)}function hh(){return(hh=(0,P.A)(function*(f,l){return yr(f,"POST","/v1/accounts:signInWithEmailLink",Dt(f,l))})).apply(this,arguments)}function fh(){return(fh=(0,P.A)(function*(f,l){return yr(f,"POST","/v1/accounts:signInWithEmailLink",Dt(f,l))})).apply(this,arguments)}class Ta extends xr{constructor(l,c,p,y=null){super("password",p),this._email=l,this._password=c,this._tenantId=y}static _fromEmailAndPassword(l,c){return new Ta(l,c,"password")}static _fromEmailAndCode(l,c,p=null){return new Ta(l,c,"emailLink",p)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(l){const c="string"==typeof l?JSON.parse(l):l;if(c?.email&&c?.password){if("password"===c.signInMethod)return this._fromEmailAndPassword(c.email,c.password);if("emailLink"===c.signInMethod)return this._fromEmailAndCode(c.email,c.password,c.tenantId)}return null}_getIdTokenResponse(l){var c=this;return(0,P.A)(function*(){switch(c.signInMethod){case"password":return fi(l,{returnSecureToken:!0,email:c._email,password:c._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Is);case"emailLink":return function qv(f,l){return hh.apply(this,arguments)}(l,{email:c._email,oobCode:c._password});default:bn(l,"internal-error")}})()}_linkToIdToken(l,c){var p=this;return(0,P.A)(function*(){switch(p.signInMethod){case"password":return fi(l,{idToken:c,returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Jl);case"emailLink":return function Ni(f,l){return fh.apply(this,arguments)}(l,{idToken:c,email:p._email,oobCode:p._password});default:bn(l,"internal-error")}})()}_getReauthenticationResolver(l){return this._getIdTokenResponse(l)}}function ws(f,l){return ph.apply(this,arguments)}function ph(){return(ph=(0,P.A)(function*(f,l){return yr(f,"POST","/v1/accounts:signInWithIdp",Dt(f,l))})).apply(this,arguments)}class Ji extends xr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(l){const c=new Ji(l.providerId,l.signInMethod);return l.idToken||l.accessToken?(l.idToken&&(c.idToken=l.idToken),l.accessToken&&(c.accessToken=l.accessToken),l.nonce&&!l.pendingToken&&(c.nonce=l.nonce),l.pendingToken&&(c.pendingToken=l.pendingToken)):l.oauthToken&&l.oauthTokenSecret?(c.accessToken=l.oauthToken,c.secret=l.oauthTokenSecret):bn("argument-error"),c}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(l){const c="string"==typeof l?JSON.parse(l):l,{providerId:p,signInMethod:y}=c,w=Ft(c,["providerId","signInMethod"]);if(!p||!y)return null;const M=new Ji(p,y);return M.idToken=w.idToken||void 0,M.accessToken=w.accessToken||void 0,M.secret=w.secret,M.nonce=w.nonce,M.pendingToken=w.pendingToken||null,M}_getIdTokenResponse(l){return ws(l,this.buildRequest())}_linkToIdToken(l,c){const p=this.buildRequest();return p.idToken=c,ws(l,p)}_getReauthenticationResolver(l){const c=this.buildRequest();return c.autoCreate=!1,ws(l,c)}buildRequest(){const l={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)l.pendingToken=this.pendingToken;else{const c={};this.idToken&&(c.id_token=this.idToken),this.accessToken&&(c.access_token=this.accessToken),this.secret&&(c.oauth_token_secret=this.secret),c.providerId=this.providerId,this.nonce&&!this.pendingToken&&(c.nonce=this.nonce),l.postBody=(0,N.Am)(c)}return l}}function gh(){return(gh=(0,P.A)(function*(f,l){return Be(f,"POST","/v1/accounts:sendVerificationCode",Dt(f,l))})).apply(this,arguments)}function mh(){return(mh=(0,P.A)(function*(f,l){return yr(f,"POST","/v1/accounts:signInWithPhoneNumber",Dt(f,l))})).apply(this,arguments)}function _h(){return(_h=(0,P.A)(function*(f,l){const c=yield yr(f,"POST","/v1/accounts:signInWithPhoneNumber",Dt(f,l));if(c.temporaryProof)throw tt(f,"account-exists-with-different-credential",c);return c})).apply(this,arguments)}const Kv={USER_NOT_FOUND:"user-not-found"};function Wn(){return(Wn=(0,P.A)(function*(f,l){return yr(f,"POST","/v1/accounts:signInWithPhoneNumber",Dt(f,Object.assign(Object.assign({},l),{operation:"REAUTH"})),Kv)})).apply(this,arguments)}class Mo extends xr{constructor(l){super("phone","phone"),this.params=l}static _fromVerification(l,c){return new Mo({verificationId:l,verificationCode:c})}static _fromTokenResponse(l,c){return new Mo({phoneNumber:l,temporaryProof:c})}_getIdTokenResponse(l){return function Wv(f,l){return mh.apply(this,arguments)}(l,this._makeVerificationRequest())}_linkToIdToken(l,c){return function ba(f,l){return _h.apply(this,arguments)}(l,Object.assign({idToken:c},this._makeVerificationRequest()))}_getReauthenticationResolver(l){return function Qv(f,l){return Wn.apply(this,arguments)}(l,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:l,phoneNumber:c,verificationId:p,verificationCode:y}=this.params;return l&&c?{temporaryProof:l,phoneNumber:c}:{sessionInfo:p,code:y}}toJSON(){const l={providerId:this.providerId};return this.params.phoneNumber&&(l.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(l.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(l.verificationCode=this.params.verificationCode),this.params.verificationId&&(l.verificationId=this.params.verificationId),l}static fromJSON(l){"string"==typeof l&&(l=JSON.parse(l));const{verificationId:c,verificationCode:p,phoneNumber:y,temporaryProof:w}=l;return p||c||y||w?new Mo({verificationId:c,verificationCode:p,phoneNumber:y,temporaryProof:w}):null}}class xn{constructor(l){var c,p,y,w,M,j;const ne=(0,N.I9)((0,N.hp)(l)),se=null!==(c=ne.apiKey)&&void 0!==c?c:null,me=null!==(p=ne.oobCode)&&void 0!==p?p:null,ke=function lg(f){switch(f){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(y=ne.mode)&&void 0!==y?y:null);le(se&&me&&ke,"argument-error"),this.apiKey=se,this.operation=ke,this.code=me,this.continueUrl=null!==(w=ne.continueUrl)&&void 0!==w?w:null,this.languageCode=null!==(M=ne.languageCode)&&void 0!==M?M:null,this.tenantId=null!==(j=ne.tenantId)&&void 0!==j?j:null}static parseLink(l){const c=function qe(f){const l=(0,N.I9)((0,N.hp)(f)).link,c=l?(0,N.I9)((0,N.hp)(l)).deep_link_id:null,p=(0,N.I9)((0,N.hp)(f)).deep_link_id;return(p?(0,N.I9)((0,N.hp)(p)).link:null)||p||c||l||f}(l);try{return new xn(c)}catch{return null}}}let On=(()=>{class f{constructor(){this.providerId=f.PROVIDER_ID}static credential(c,p){return Ta._fromEmailAndPassword(c,p)}static credentialWithLink(c,p){const y=xn.parseLink(p);return le(y,"argument-error"),Ta._fromEmailAndCode(c,y.code,y.tenantId)}}return f.PROVIDER_ID="password",f.EMAIL_PASSWORD_SIGN_IN_METHOD="password",f.EMAIL_LINK_SIGN_IN_METHOD="emailLink",f})();class nn{constructor(l){this.providerId=l,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(l){this.defaultLanguageCode=l}setCustomParameters(l){return this.customParameters=l,this}getCustomParameters(){return this.customParameters}}class Xi extends nn{constructor(){super(...arguments),this.scopes=[]}addScope(l){return this.scopes.includes(l)||this.scopes.push(l),this}getScopes(){return[...this.scopes]}}class rr extends Xi{static credentialFromJSON(l){const c="string"==typeof l?JSON.parse(l):l;return le("providerId"in c&&"signInMethod"in c,"argument-error"),Ji._fromParams(c)}credential(l){return this._credential(Object.assign(Object.assign({},l),{nonce:l.rawNonce}))}_credential(l){return le(l.idToken||l.accessToken,"argument-error"),Ji._fromParams(Object.assign(Object.assign({},l),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(l){return rr.oauthCredentialFromTaggedObject(l)}static credentialFromError(l){return rr.oauthCredentialFromTaggedObject(l.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:c,oauthAccessToken:p,oauthTokenSecret:y,pendingToken:w,nonce:M,providerId:j}=l;if(!p&&!y&&!c&&!w||!j)return null;try{return new rr(j)._credential({idToken:c,accessToken:p,nonce:M,pendingToken:w})}catch{return null}}}let cg=(()=>{class f extends Xi{constructor(){super("facebook.com")}static credential(c){return Ji._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.FACEBOOK_SIGN_IN_METHOD,accessToken:c})}static credentialFromResult(c){return f.credentialFromTaggedObject(c)}static credentialFromError(c){return f.credentialFromTaggedObject(c.customData||{})}static credentialFromTaggedObject({_tokenResponse:c}){if(!c||!("oauthAccessToken"in c)||!c.oauthAccessToken)return null;try{return f.credential(c.oauthAccessToken)}catch{return null}}}return f.FACEBOOK_SIGN_IN_METHOD="facebook.com",f.PROVIDER_ID="facebook.com",f})(),dg=(()=>{class f extends Xi{constructor(){super("google.com"),this.addScope("profile")}static credential(c,p){return Ji._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GOOGLE_SIGN_IN_METHOD,idToken:c,accessToken:p})}static credentialFromResult(c){return f.credentialFromTaggedObject(c)}static credentialFromError(c){return f.credentialFromTaggedObject(c.customData||{})}static credentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:p,oauthAccessToken:y}=c;if(!p&&!y)return null;try{return f.credential(p,y)}catch{return null}}}return f.GOOGLE_SIGN_IN_METHOD="google.com",f.PROVIDER_ID="google.com",f})(),rc=(()=>{class f extends Xi{constructor(){super("github.com")}static credential(c){return Ji._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GITHUB_SIGN_IN_METHOD,accessToken:c})}static credentialFromResult(c){return f.credentialFromTaggedObject(c)}static credentialFromError(c){return f.credentialFromTaggedObject(c.customData||{})}static credentialFromTaggedObject({_tokenResponse:c}){if(!c||!("oauthAccessToken"in c)||!c.oauthAccessToken)return null;try{return f.credential(c.oauthAccessToken)}catch{return null}}}return f.GITHUB_SIGN_IN_METHOD="github.com",f.PROVIDER_ID="github.com",f})();class Aa extends xr{constructor(l,c){super(l,l),this.pendingToken=c}_getIdTokenResponse(l){return ws(l,this.buildRequest())}_linkToIdToken(l,c){const p=this.buildRequest();return p.idToken=c,ws(l,p)}_getReauthenticationResolver(l){const c=this.buildRequest();return c.autoCreate=!1,ws(l,c)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(l){const c="string"==typeof l?JSON.parse(l):l,{providerId:p,signInMethod:y,pendingToken:w}=c;return p&&y&&w&&p===y?new Aa(p,w):null}static _create(l,c){return new Aa(l,c)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class we extends nn{constructor(l){le(l.startsWith("saml."),"argument-error"),super(l)}static credentialFromResult(l){return we.samlCredentialFromTaggedObject(l)}static credentialFromError(l){return we.samlCredentialFromTaggedObject(l.customData||{})}static credentialFromJSON(l){const c=Aa.fromJSON(l);return le(c,"argument-error"),c}static samlCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{pendingToken:c,providerId:p}=l;if(!c||!p)return null;try{return Aa._create(p,c)}catch{return null}}}let Je=(()=>{class f extends Xi{constructor(){super("twitter.com")}static credential(c,p){return Ji._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.TWITTER_SIGN_IN_METHOD,oauthToken:c,oauthTokenSecret:p})}static credentialFromResult(c){return f.credentialFromTaggedObject(c)}static credentialFromError(c){return f.credentialFromTaggedObject(c.customData||{})}static credentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthAccessToken:p,oauthTokenSecret:y}=c;if(!p||!y)return null;try{return f.credential(p,y)}catch{return null}}}return f.TWITTER_SIGN_IN_METHOD="twitter.com",f.PROVIDER_ID="twitter.com",f})();function Ht(f,l){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,P.A)(function*(f,l){return yr(f,"POST","/v1/accounts:signUp",Dt(f,l))})).apply(this,arguments)}class vr{constructor(l){this.user=l.user,this.providerId=l.providerId,this._tokenResponse=l._tokenResponse,this.operationType=l.operationType}static _fromIdTokenResponse(l,c,p,y=!1){return(0,P.A)(function*(){const w=yield js._fromIdTokenResponse(l,p,y),M=ir(p);return new vr({user:w,providerId:M,_tokenResponse:p,operationType:c})})()}static _forOperation(l,c,p){return(0,P.A)(function*(){yield l._updateTokensIfNecessary(p,!0);const y=ir(p);return new vr({user:l,providerId:y,_tokenResponse:p,operationType:c})})()}}function ir(f){return f.providerId?f.providerId:"phoneNumber"in f?"phone":null}function Da(f){return rn.apply(this,arguments)}function rn(){return(rn=(0,P.A)(function*(f){var l;if((0,ye._isFirebaseServerApp)(f.app))return Promise.reject(Vt(f));const c=fn(f);if(yield c._initializationPromise,null!==(l=c.currentUser)&&void 0!==l&&l.isAnonymous)return new vr({user:c.currentUser,providerId:null,operationType:"signIn"});const p=yield Ht(c,{returnSecureToken:!0}),y=yield vr._fromIdTokenResponse(c,"signIn",p,!0);return yield c._updateCurrentUser(y.user),y})).apply(this,arguments)}class xi extends N.g{constructor(l,c,p,y){var w;super(c.code,c.message),this.operationType=p,this.user=y,Object.setPrototypeOf(this,xi.prototype),this.customData={appName:l.name,tenantId:null!==(w=l.tenantId)&&void 0!==w?w:void 0,_serverResponse:c.customData._serverResponse,operationType:p}}static _fromErrorAndOperation(l,c,p,y){return new xi(l,c,p,y)}}function No(f,l,c,p){return("reauthenticate"===l?c._getReauthenticationResolver(f):c._getIdTokenResponse(f)).catch(w=>{throw"auth/multi-factor-auth-required"===w.code?xi._fromErrorAndOperation(f,w,l,p):w})}function He(f){return new Set(f.map(({providerId:l})=>l).filter(l=>!!l))}function Nu(f,l){return ic.apply(this,arguments)}function ic(){return ic=(0,P.A)(function*(f,l){const c=(0,N.Ku)(f);yield Hs(!0,c,l);const{providerUserInfo:p}=yield function Et(f,l){return Y.apply(this,arguments)}(c.auth,{idToken:yield c.getIdToken(),deleteProvider:[l]}),y=He(p||[]);return c.providerData=c.providerData.filter(w=>y.has(w.providerId)),y.has("phone")||(c.phoneNumber=null),yield c.auth._persistUserIfCurrent(c),c}),ic.apply(this,arguments)}function $s(f,l){return sn.apply(this,arguments)}function sn(){return(sn=(0,P.A)(function*(f,l,c=!1){const p=yield Mi(f,l._linkToIdToken(f.auth,yield f.getIdToken()),c);return vr._forOperation(f,"link",p)})).apply(this,arguments)}function Hs(f,l,c){return zs.apply(this,arguments)}function zs(){return(zs=(0,P.A)(function*(f,l,c){yield Le(l);const y=!1===f?"provider-already-linked":"no-such-provider";le(He(l.providerData).has(c)===f,l.auth,y)})).apply(this,arguments)}function Oi(f,l){return xo.apply(this,arguments)}function xo(){return(xo=(0,P.A)(function*(f,l,c=!1){const{auth:p}=f;if((0,ye._isFirebaseServerApp)(p.app))return Promise.reject(Vt(p));const y="reauthenticate";try{const w=yield Mi(f,No(p,y,l,f),c);le(w.idToken,p,"internal-error");const M=zn(w.idToken);le(M,p,"internal-error");const{sub:j}=M;return le(f.uid===j,p,"user-mismatch"),vr._forOperation(f,y,w)}catch(w){throw"auth/user-not-found"===w?.code&&bn(p,"user-mismatch"),w}})).apply(this,arguments)}function yh(f,l){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,P.A)(function*(f,l,c=!1){if((0,ye._isFirebaseServerApp)(f.app))return Promise.reject(Vt(f));const p="signIn",y=yield No(f,p,l),w=yield vr._fromIdTokenResponse(f,p,y);return c||(yield f._updateCurrentUser(w.user)),w})).apply(this,arguments)}function pi(f,l){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,P.A)(function*(f,l){return yh(fn(f),l)})).apply(this,arguments)}function Ca(f,l){return st.apply(this,arguments)}function st(){return(st=(0,P.A)(function*(f,l){const c=(0,N.Ku)(f);return yield Hs(!1,c,l.providerId),$s(c,l)})).apply(this,arguments)}function Jv(f,l){return xu.apply(this,arguments)}function xu(){return(xu=(0,P.A)(function*(f,l){return Oi((0,N.Ku)(f),l)})).apply(this,arguments)}function gi(){return(gi=(0,P.A)(function*(f,l){return yr(f,"POST","/v1/accounts:signInWithCustomToken",Dt(f,l))})).apply(this,arguments)}function sc(f,l){return qs.apply(this,arguments)}function qs(){return qs=(0,P.A)(function*(f,l){if((0,ye._isFirebaseServerApp)(f.app))return Promise.reject(Vt(f));const c=fn(f),p=yield function hg(f,l){return gi.apply(this,arguments)}(c,{token:l,returnSecureToken:!0}),y=yield vr._fromIdTokenResponse(c,"signIn",p);return yield c._updateCurrentUser(y.user),y}),qs.apply(this,arguments)}class Ts{constructor(l,c){this.factorId=l,this.uid=c.mfaEnrollmentId,this.enrollmentTime=new Date(c.enrolledAt).toUTCString(),this.displayName=c.displayName}static _fromServerResponse(l,c){return"phoneInfo"in c?kn._fromServerResponse(l,c):"totpInfo"in c?fg._fromServerResponse(l,c):bn(l,"internal-error")}}class kn extends Ts{constructor(l){super("phone",l),this.phoneNumber=l.phoneInfo}static _fromServerResponse(l,c){return new kn(c)}}class fg extends Ts{constructor(l){super("totp",l)}static _fromServerResponse(l,c){return new fg(c)}}function sr(f,l,c){var p;le((null===(p=c.url)||void 0===p?void 0:p.length)>0,f,"invalid-continue-uri"),le(typeof c.dynamicLinkDomain>"u"||c.dynamicLinkDomain.length>0,f,"invalid-dynamic-link-domain"),l.continueUrl=c.url,l.dynamicLinkDomain=c.dynamicLinkDomain,l.canHandleCodeInApp=c.handleCodeInApp,c.iOS&&(le(c.iOS.bundleId.length>0,f,"missing-ios-bundle-id"),l.iOSBundleId=c.iOS.bundleId),c.android&&(le(c.android.packageName.length>0,f,"missing-android-pkg-name"),l.androidInstallApp=c.android.installApp,l.androidMinimumVersionCode=c.android.minimumVersion,l.androidPackageName=c.android.packageName)}function or(f){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,P.A)(function*(f){const l=fn(f);l._getPasswordPolicyInternal()&&(yield l._updatePasswordPolicy())})).apply(this,arguments)}function ko(f,l,c){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,P.A)(function*(f,l,c){const p=fn(f),y={requestType:"PASSWORD_RESET",email:l,clientType:"CLIENT_TYPE_WEB"};c&&sr(p,y,c),yield fi(p,y,"getOobCode",og)})).apply(this,arguments)}function ki(f,l,c){return ku.apply(this,arguments)}function ku(){return ku=(0,P.A)(function*(f,l,c){yield Pu((0,N.Ku)(f),{oobCode:l,newPassword:c}).catch(function(){var p=(0,P.A)(function*(y){throw"auth/password-does-not-meet-requirements"===y.code&&or(f),y});return function(y){return p.apply(this,arguments)}}())}),ku.apply(this,arguments)}function Xv(f,l){return vh.apply(this,arguments)}function vh(){return vh=(0,P.A)(function*(f,l){yield function ch(f,l){return Xl.apply(this,arguments)}((0,N.Ku)(f),{oobCode:l})}),vh.apply(this,arguments)}function Zv(f,l){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,P.A)(function*(f,l){const c=(0,N.Ku)(f),p=yield Pu(c,{oobCode:l}),y=p.requestType;switch(le(y,c,"internal-error"),y){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":le(p.newEmail,c,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":le(p.mfaInfo,c,"internal-error");default:le(p.email,c,"internal-error")}let w=null;return p.mfaInfo&&(w=Ts._fromServerResponse(fn(c),p.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.newEmail:p.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.email:p.newEmail)||null,multiFactorInfo:w},operation:y}})).apply(this,arguments)}function eE(f,l){return pg.apply(this,arguments)}function pg(){return(pg=(0,P.A)(function*(f,l){const{data:c}=yield Zv((0,N.Ku)(f),l);return c.email})).apply(this,arguments)}function D0(f,l,c){return gg.apply(this,arguments)}function gg(){return(gg=(0,P.A)(function*(f,l,c){if((0,ye._isFirebaseServerApp)(f.app))return Promise.reject(Vt(f));const p=fn(f),M=yield fi(p,{returnSecureToken:!0,email:l,password:c,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ht).catch(ne=>{throw"auth/password-does-not-meet-requirements"===ne.code&&or(f),ne}),j=yield vr._fromIdTokenResponse(p,"signIn",M);return yield p._updateCurrentUser(j.user),j})).apply(this,arguments)}function C0(f,l,c){return(0,ye._isFirebaseServerApp)(f.app)?Promise.reject(Vt(f)):pi((0,N.Ku)(f),On.credential(l,c)).catch(function(){var p=(0,P.A)(function*(y){throw"auth/password-does-not-meet-requirements"===y.code&&or(f),y});return function(y){return p.apply(this,arguments)}}())}function S0(f,l,c){return mg.apply(this,arguments)}function mg(){return(mg=(0,P.A)(function*(f,l,c){const p=fn(f),y={requestType:"EMAIL_SIGNIN",email:l,clientType:"CLIENT_TYPE_WEB"};(function w(M,j){le(j.handleCodeInApp,p,"argument-error"),j&&sr(p,M,j)})(y,c),yield fi(p,y,"getOobCode",ag)})).apply(this,arguments)}function P0(f,l){const c=xn.parseLink(l);return"EMAIL_SIGNIN"===c?.operation}function R0(f,l,c){return _g.apply(this,arguments)}function _g(){return(_g=(0,P.A)(function*(f,l,c){if((0,ye._isFirebaseServerApp)(f.app))return Promise.reject(Vt(f));const p=(0,N.Ku)(f),y=On.credentialWithLink(l,c||nr());return le(y._tenantId===(p.tenantId||null),p,"tenant-id-mismatch"),pi(p,y)})).apply(this,arguments)}function yg(){return(yg=(0,P.A)(function*(f,l){return Be(f,"POST","/v1/accounts:createAuthUri",Dt(f,l))})).apply(this,arguments)}function N0(f,l){return oc.apply(this,arguments)}function oc(){return oc=(0,P.A)(function*(f,l){const p={identifier:l,continueUri:Tt()?nr():"http://localhost"},{signinMethods:y}=yield function M0(f,l){return yg.apply(this,arguments)}((0,N.Ku)(f),p);return y||[]}),oc.apply(this,arguments)}function vg(f,l){return Eg.apply(this,arguments)}function Eg(){return Eg=(0,P.A)(function*(f,l){const c=(0,N.Ku)(f),y={requestType:"VERIFY_EMAIL",idToken:yield f.getIdToken()};l&&sr(c.auth,y,l);const{email:w}=yield function dh(f,l){return ec.apply(this,arguments)}(c.auth,y);w!==f.email&&(yield f.reload())}),Eg.apply(this,arguments)}function x0(f,l,c){return Ig.apply(this,arguments)}function Ig(){return Ig=(0,P.A)(function*(f,l,c){const p=(0,N.Ku)(f),w={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield f.getIdToken(),newEmail:l};c&&sr(p.auth,w,c);const{email:M}=yield function zv(f,l){return nc.apply(this,arguments)}(p.auth,w);M!==f.email&&(yield f.reload())}),Ig.apply(this,arguments)}function es(){return(es=(0,P.A)(function*(f,l){return Be(f,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function O0(f,l){return wg.apply(this,arguments)}function wg(){return wg=(0,P.A)(function*(f,{displayName:l,photoURL:c}){if(void 0===l&&void 0===c)return;const p=(0,N.Ku)(f),w={idToken:yield p.getIdToken(),displayName:l,photoUrl:c,returnSecureToken:!0},M=yield Mi(p,function Fo(f,l){return es.apply(this,arguments)}(p.auth,w));p.displayName=M.displayName||null,p.photoURL=M.photoUrl||null;const j=p.providerData.find(({providerId:ne})=>"password"===ne);j&&(j.displayName=p.displayName,j.photoURL=p.photoURL),yield p._updateTokensIfNecessary(M)}),wg.apply(this,arguments)}function ar(f,l){const c=(0,N.Ku)(f);return(0,ye._isFirebaseServerApp)(c.auth.app)?Promise.reject(Vt(c.auth)):Qr(c,l,null)}function ac(f,l){return Qr((0,N.Ku)(f),null,l)}function Qr(f,l,c){return uc.apply(this,arguments)}function uc(){return uc=(0,P.A)(function*(f,l,c){const{auth:p}=f,w={idToken:yield f.getIdToken(),returnSecureToken:!0};l&&(w.email=l),c&&(w.password=c);const M=yield Mi(f,function Yi(f,l){return ht.apply(this,arguments)}(p,w));yield f._updateTokensIfNecessary(M,!0)}),uc.apply(this,arguments)}class Vo{constructor(l,c,p={}){this.isNewUser=l,this.providerId=c,this.profile=p}}class Ih extends Vo{constructor(l,c,p,y){super(l,c,p),this.username=y}}class wh extends Vo{constructor(l,c){super(l,"facebook.com",c)}}class bg extends Ih{constructor(l,c){super(l,"github.com",c,"string"==typeof c?.login?c?.login:null)}}class Th extends Vo{constructor(l,c){super(l,"google.com",c)}}class bh extends Ih{constructor(l,c,p){super(l,"twitter.com",c,p)}}function Ag(f){const{user:l,_tokenResponse:c}=f;return l.isAnonymous&&!c?{providerId:null,isNewUser:!1,profile:null}:function Tg(f){var l,c;if(!f)return null;const{providerId:p}=f,y=f.rawUserInfo?JSON.parse(f.rawUserInfo):{},w=f.isNewUser||"identitytoolkit#SignupNewUserResponse"===f.kind;if(!p&&f?.idToken){const M=null===(c=null===(l=zn(f.idToken))||void 0===l?void 0:l.firebase)||void 0===c?void 0:c.sign_in_provider;if(M)return new Vo(w,"anonymous"!==M&&"custom"!==M?M:null)}if(!p)return null;switch(p){case"facebook.com":return new wh(w,y);case"github.com":return new bg(w,y);case"google.com":return new Th(w,y);case"twitter.com":return new bh(w,y,f.screenName||null);case"custom":case"anonymous":return new Vo(w,null);default:return new Vo(w,p,y)}}(c)}class bs{constructor(l,c,p){this.type=l,this.credential=c,this.user=p}static _fromIdtoken(l,c){return new bs("enroll",l,c)}static _fromMfaPendingCredential(l){return new bs("signin",l)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(l){var c,p;if(l?.multiFactorSession){if(null!==(c=l.multiFactorSession)&&void 0!==c&&c.pendingCredential)return bs._fromMfaPendingCredential(l.multiFactorSession.pendingCredential);if(null!==(p=l.multiFactorSession)&&void 0!==p&&p.idToken)return bs._fromIdtoken(l.multiFactorSession.idToken)}return null}}class Dh{constructor(l,c,p){this.session=l,this.hints=c,this.signInResolver=p}static _fromError(l,c){const p=fn(l),y=c.customData._serverResponse,w=(y.mfaInfo||[]).map(j=>Ts._fromServerResponse(p,j));le(y.mfaPendingCredential,p,"internal-error");const M=bs._fromMfaPendingCredential(y.mfaPendingCredential);return new Dh(M,w,function(){var j=(0,P.A)(function*(ne){const se=yield ne._process(p,M);delete y.mfaInfo,delete y.mfaPendingCredential;const me=Object.assign(Object.assign({},y),{idToken:se.idToken,refreshToken:se.refreshToken});switch(c.operationType){case"signIn":const ke=yield vr._fromIdTokenResponse(p,c.operationType,me);return yield p._updateCurrentUser(ke.user),ke;case"reauthenticate":return le(c.user,p,"internal-error"),vr._forOperation(c.user,c.operationType,me);default:bn(p,"internal-error")}});return function(ne){return j.apply(this,arguments)}}())}resolveSignIn(l){var c=this;return(0,P.A)(function*(){return c.signInResolver(l)})()}}function Ch(f,l){var c;const p=(0,N.Ku)(f),y=l;return le(l.customData.operationType,p,"argument-error"),le(null===(c=y.customData._serverResponse)||void 0===c?void 0:c.mfaPendingCredential,p,"argument-error"),Dh._fromError(p,y)}class Sh{constructor(l){this.user=l,this.enrolledFactors=[],l._onReload(c=>{c.mfaInfo&&(this.enrolledFactors=c.mfaInfo.map(p=>Ts._fromServerResponse(l.auth,p)))})}static _fromUser(l){return new Sh(l)}getSession(){var l=this;return(0,P.A)(function*(){return bs._fromIdtoken(yield l.user.getIdToken(),l.user)})()}enroll(l,c){var p=this;return(0,P.A)(function*(){const y=l,w=yield p.getSession(),M=yield Mi(p.user,y._process(p.user.auth,w,c));return yield p.user._updateTokensIfNecessary(M),p.user.reload()})()}unenroll(l){var c=this;return(0,P.A)(function*(){const p="string"==typeof l?l:l.uid,y=yield c.user.getIdToken();try{const w=yield Mi(c.user,function Sg(f,l){return Be(f,"POST","/v2/accounts/mfaEnrollment:withdraw",Dt(f,l))}(c.user.auth,{idToken:y,mfaEnrollmentId:p}));c.enrolledFactors=c.enrolledFactors.filter(({uid:M})=>M!==p),yield c.user._updateTokensIfNecessary(w),yield c.user.reload()}catch(w){throw w}})()}}const Ph=new WeakMap;function rE(f){const l=(0,N.Ku)(f);return Ph.has(l)||Ph.set(l,Sh._fromUser(l)),Ph.get(l)}const Fu="__sak";class Pg{constructor(l,c){this.storageRetriever=l,this.type=c}_isAvailable(){try{return this.storage?(this.storage.setItem(Fu,"1"),this.storage.removeItem(Fu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(l,c){return this.storage.setItem(l,JSON.stringify(c)),Promise.resolve()}_get(l){const c=this.storage.getItem(l);return Promise.resolve(c?JSON.parse(c):null)}_remove(l){return this.storage.removeItem(l),Promise.resolve()}get storage(){return this.storageRetriever()}}const Mg=(()=>{class f extends Pg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(c,p)=>this.onStorageEvent(c,p),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Vv(),this._shouldAllowMigration=!0}forAllChangedKeys(c){for(const p of Object.keys(this.listeners)){const y=this.storage.getItem(p),w=this.localCache[p];y!==w&&c(p,w,y)}}onStorageEvent(c,p=!1){if(!c.key)return void this.forAllChangedKeys((j,ne,se)=>{this.notifyListeners(j,se)});const y=c.key;p?this.detachListener():this.stopPolling();const w=()=>{const j=this.storage.getItem(y);!p&&this.localCache[y]===j||this.notifyListeners(y,j)},M=this.storage.getItem(y);!function b0(){return(0,N.lT)()&&10===document.documentMode}()||M===c.newValue||c.newValue===c.oldValue?w():setTimeout(w,10)}notifyListeners(c,p){this.localCache[c]=p;const y=this.listeners[c];if(y)for(const w of Array.from(y))w(p&&JSON.parse(p))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((c,p,y)=>{this.onStorageEvent(new StorageEvent("storage",{key:c,oldValue:p,newValue:y}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(c,p){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[c]||(this.listeners[c]=new Set,this.localCache[c]=this.storage.getItem(c)),this.listeners[c].add(p)}_removeListener(c,p){this.listeners[c]&&(this.listeners[c].delete(p),0===this.listeners[c].size&&delete this.listeners[c]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(c,p){var y=()=>super._set,w=this;return(0,P.A)(function*(){yield y().call(w,c,p),w.localCache[c]=JSON.stringify(p)})()}_get(c){var p=()=>super._get,y=this;return(0,P.A)(function*(){const w=yield p().call(y,c);return y.localCache[c]=JSON.stringify(w),w})()}_remove(c){var p=()=>super._remove,y=this;return(0,P.A)(function*(){yield p().call(y,c),delete y.localCache[c]})()}}return f.type="LOCAL",f})(),cc=(()=>{class f extends Pg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(c,p){}_removeListener(c,p){}}return f.type="SESSION",f})();let oE=(()=>{class f{constructor(c){this.eventTarget=c,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(c){const p=this.receivers.find(w=>w.isListeningto(c));if(p)return p;const y=new f(c);return this.receivers.push(y),y}isListeningto(c){return this.eventTarget===c}handleEvent(c){var p=this;return(0,P.A)(function*(){const y=c,{eventId:w,eventType:M,data:j}=y.data,ne=p.handlersMap[M];if(!ne?.size)return;y.ports[0].postMessage({status:"ack",eventId:w,eventType:M});const se=Array.from(ne).map(function(){var ke=(0,P.A)(function*(ft){return ft(y.origin,j)});return function(ft){return ke.apply(this,arguments)}}()),me=yield function sE(f){return Promise.all(f.map(function(){var l=(0,P.A)(function*(c){try{return{fulfilled:!0,value:yield c}}catch(p){return{fulfilled:!1,reason:p}}});return function(c){return l.apply(this,arguments)}}()))}(se);y.ports[0].postMessage({status:"done",eventId:w,eventType:M,response:me})})()}_subscribe(c,p){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[c]||(this.handlersMap[c]=new Set),this.handlersMap[c].add(p)}_unsubscribe(c,p){this.handlersMap[c]&&p&&this.handlersMap[c].delete(p),(!p||0===this.handlersMap[c].size)&&delete this.handlersMap[c],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return f.receivers=[],f})();function Ra(f="",l=10){let c="";for(let p=0;p<l;p++)c+=Math.floor(10*Math.random());return f+c}class Ng{constructor(l){this.target=l,this.handlers=new Set}removeMessageHandler(l){l.messageChannel&&(l.messageChannel.port1.removeEventListener("message",l.onMessage),l.messageChannel.port1.close()),this.handlers.delete(l)}_send(l,c,p=50){var y=this;return(0,P.A)(function*(){const w=typeof MessageChannel<"u"?new MessageChannel:null;if(!w)throw new Error("connection_unavailable");let M,j;return new Promise((ne,se)=>{const me=Ra("",20);w.port1.start();const ke=setTimeout(()=>{se(new Error("unsupported_event"))},p);j={messageChannel:w,onMessage(ft){const Qn=ft;if(Qn.data.eventId===me)switch(Qn.data.status){case"ack":clearTimeout(ke),M=setTimeout(()=>{se(new Error("timeout"))},3e3);break;case"done":clearTimeout(M),ne(Qn.data.response);break;default:clearTimeout(ke),clearTimeout(M),se(new Error("invalid_response"))}}},y.handlers.add(j),w.port1.addEventListener("message",j.onMessage),y.target.postMessage({eventType:l,eventId:me,data:c},[w.port2])}).finally(()=>{j&&y.removeMessageHandler(j)})})()}}function An(){return window}function Mh(){return typeof An().WorkerGlobalScope<"u"&&"function"==typeof An().importScripts}function dc(){return(dc=(0,P.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const hc="firebaseLocalStorageDb",ur="firebaseLocalStorage",Og="fbase_key";class Ma{constructor(l){this.request=l}toPromise(){return new Promise((l,c)=>{this.request.addEventListener("success",()=>{l(this.request.result)}),this.request.addEventListener("error",()=>{c(this.request.error)})})}}function As(f,l){return f.transaction([ur],l?"readwrite":"readonly").objectStore(ur)}function Nh(){const f=indexedDB.open(hc,1);return new Promise((l,c)=>{f.addEventListener("error",()=>{c(f.error)}),f.addEventListener("upgradeneeded",()=>{const p=f.result;try{p.createObjectStore(ur,{keyPath:Og})}catch(y){c(y)}}),f.addEventListener("success",(0,P.A)(function*(){const p=f.result;p.objectStoreNames.contains(ur)?l(p):(p.close(),yield function Yr(){const f=indexedDB.deleteDatabase(hc);return new Ma(f).toPromise()}(),l(yield Nh()))}))})}function kg(f,l,c){return xh.apply(this,arguments)}function xh(){return(xh=(0,P.A)(function*(f,l,c){const p=As(f,!0).put({[Og]:l,value:c});return new Ma(p).toPromise()})).apply(this,arguments)}function pc(){return(pc=(0,P.A)(function*(f,l){const c=As(f,!1).get(l),p=yield new Ma(c).toPromise();return void 0===p?null:p.value})).apply(this,arguments)}function Fg(f,l){const c=As(f,!0).delete(l);return new Ma(c).toPromise()}const Bg=(()=>{class f{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var c=this;return(0,P.A)(function*(){return c.db||(c.db=yield Nh()),c.db})()}_withRetries(c){var p=this;return(0,P.A)(function*(){let y=0;for(;;)try{const w=yield p._openDb();return yield c(w)}catch(w){if(y++>3)throw w;p.db&&(p.db.close(),p.db=void 0)}})()}initializeServiceWorkerMessaging(){var c=this;return(0,P.A)(function*(){return Mh()?c.initializeReceiver():c.initializeSender()})()}initializeReceiver(){var c=this;return(0,P.A)(function*(){c.receiver=oE._getInstance(function Bt(){return Mh()?self:null}()),c.receiver._subscribe("keyChanged",function(){var p=(0,P.A)(function*(y,w){return{keyProcessed:(yield c._poll()).includes(w.key)}});return function(y,w){return p.apply(this,arguments)}}()),c.receiver._subscribe("ping",function(){var p=(0,P.A)(function*(y,w){return["keyChanged"]});return function(y,w){return p.apply(this,arguments)}}())})()}initializeSender(){var c=this;return(0,P.A)(function*(){var p,y;if(c.activeServiceWorker=yield function ns(){return dc.apply(this,arguments)}(),!c.activeServiceWorker)return;c.sender=new Ng(c.activeServiceWorker);const w=yield c.sender._send("ping",{},800);w&&null!==(p=w[0])&&void 0!==p&&p.fulfilled&&null!==(y=w[0])&&void 0!==y&&y.value.includes("keyChanged")&&(c.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(c){var p=this;return(0,P.A)(function*(){if(p.sender&&p.activeServiceWorker&&function xg(){var f;return(null===(f=navigator?.serviceWorker)||void 0===f?void 0:f.controller)||null}()===p.activeServiceWorker)try{yield p.sender._send("keyChanged",{key:c},p.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,P.A)(function*(){try{if(!indexedDB)return!1;const c=yield Nh();return yield kg(c,Fu,"1"),yield Fg(c,Fu),!0}catch{}return!1})()}_withPendingWrite(c){var p=this;return(0,P.A)(function*(){p.pendingWrites++;try{yield c()}finally{p.pendingWrites--}})()}_set(c,p){var y=this;return(0,P.A)(function*(){return y._withPendingWrite((0,P.A)(function*(){return yield y._withRetries(w=>kg(w,c,p)),y.localCache[c]=p,y.notifyServiceWorker(c)}))})()}_get(c){var p=this;return(0,P.A)(function*(){const y=yield p._withRetries(w=>function Gs(f,l){return pc.apply(this,arguments)}(w,c));return p.localCache[c]=y,y})()}_remove(c){var p=this;return(0,P.A)(function*(){return p._withPendingWrite((0,P.A)(function*(){return yield p._withRetries(y=>Fg(y,c)),delete p.localCache[c],p.notifyServiceWorker(c)}))})()}_poll(){var c=this;return(0,P.A)(function*(){const p=yield c._withRetries(M=>{const j=As(M,!1).getAll();return new Ma(j).toPromise()});if(!p)return[];if(0!==c.pendingWrites)return[];const y=[],w=new Set;if(0!==p.length)for(const{fbase_key:M,value:j}of p)w.add(M),JSON.stringify(c.localCache[M])!==JSON.stringify(j)&&(c.notifyListeners(M,j),y.push(M));for(const M of Object.keys(c.localCache))c.localCache[M]&&!w.has(M)&&(c.notifyListeners(M,null),y.push(M));return y})()}notifyListeners(c,p){this.localCache[c]=p;const y=this.listeners[c];if(y)for(const w of Array.from(y))w(p)}startPolling(){var c=this;this.stopPolling(),this.pollTimer=setInterval((0,P.A)(function*(){return c._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(c,p){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[c]||(this.listeners[c]=new Set,this._get(c)),this.listeners[c].add(p)}_removeListener(c,p){this.listeners[c]&&(this.listeners[c].delete(p),0===this.listeners[c].size&&delete this.listeners[c]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return f.type="LOCAL",f})(),gc=1e12;class jg{constructor(l){this.auth=l,this.counter=gc,this._widgets=new Map}render(l,c){const p=this.counter;return this._widgets.set(p,new Na(l,this.auth.name,c||{})),this.counter++,p}reset(l){var c;const p=l||gc;null===(c=this._widgets.get(p))||void 0===c||c.delete(),this._widgets.delete(p)}getResponse(l){var c;return(null===(c=this._widgets.get(l||gc))||void 0===c?void 0:c.getResponse())||""}execute(l){var c=this;return(0,P.A)(function*(){var p;return null===(p=c._widgets.get(l||gc))||void 0===p||p.execute(),""})()}}class Na{constructor(l,c,p){this.params=p,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const y="string"==typeof l?document.getElementById(l):l;le(y,"argument-error",{appName:c}),this.container=y,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function cE(f){const l=[],c="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<f;p++)l.push(c.charAt(Math.floor(62*Math.random())));return l.join("")}(50);const{callback:l,"expired-callback":c}=this.params;if(l)try{l(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,c)try{c()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Oh=ig("rcb"),dE=new Pi(3e4,6e4);class hE{constructor(){var l;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(l=An().grecaptcha)||void 0===l||!l.render)}load(l,c=""){return le(function fE(f){return f.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(f)}(c),l,"argument-error"),this.shouldResolveImmediately(c)&&A(An().grecaptcha)?Promise.resolve(An().grecaptcha):new Promise((p,y)=>{const w=An().setTimeout(()=>{y(dt(l,"network-request-failed"))},dE.get());An()[Oh]=()=>{An().clearTimeout(w),delete An()[Oh];const j=An().grecaptcha;if(!j||!A(j))return void y(dt(l,"internal-error"));const ne=j.render;j.render=(se,me)=>{const ke=ne(se,me);return this.counter++,ke},this.hostLanguage=c,p(j)},rg(`${function Su(){return Gl.recaptchaV2Script}()}?${(0,N.Am)({onload:Oh,render:"explicit",hl:c})}`).catch(()=>{clearTimeout(w),y(dt(l,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(l){var c;return!(null===(c=An().grecaptcha)||void 0===c||!c.render)&&(l===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class oe{load(l){return(0,P.A)(function*(){return new jg(l)})()}clearedOneInstance(){}}const lt="recaptcha",Er={theme:"light",type:"image"};class Ir{constructor(l,c,p=Object.assign({},Er)){this.parameters=p,this.type=lt,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=fn(l),this.isInvisible="invisible"===this.parameters.size,le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const y="string"==typeof c?document.getElementById(c):c;le(y,this.auth,"argument-error"),this.container=y,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new oe:new hE,this.validateStartingState()}verify(){var l=this;return(0,P.A)(function*(){l.assertNotDestroyed();const c=yield l.render(),p=l.getAssertedRecaptcha();return p.getResponse(c)||new Promise(w=>{const M=j=>{j&&(l.tokenChangeListeners.delete(M),w(j))};l.tokenChangeListeners.add(M),l.isInvisible&&p.execute(c)})})()}render(){try{this.assertNotDestroyed()}catch(l){return Promise.reject(l)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(l=>{throw this.renderPromise=null,l})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(l=>{this.container.removeChild(l)})}validateStartingState(){le(!this.parameters.sitekey,this.auth,"argument-error"),le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(l){return c=>{if(this.tokenChangeListeners.forEach(p=>p(c)),"function"==typeof l)l(c);else if("string"==typeof l){const p=An()[l];"function"==typeof p&&p(c)}}}assertNotDestroyed(){le(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var l=this;return(0,P.A)(function*(){if(yield l.init(),!l.widgetId){let c=l.container;if(!l.isInvisible){const p=document.createElement("div");c.appendChild(p),c=p}l.widgetId=l.getAssertedRecaptcha().render(c,l.parameters)}return l.widgetId})()}init(){var l=this;return(0,P.A)(function*(){le(Tt()&&!Mh(),l.auth,"internal-error"),yield function lr(){let f=null;return new Promise(l=>{"complete"!==document.readyState?(f=()=>l(),window.addEventListener("load",f)):l()}).catch(l=>{throw f&&window.removeEventListener("load",f),l})}(),l.recaptcha=yield l._recaptchaLoader.load(l.auth,l.auth.languageCode||void 0);const c=yield function k(f){return O.apply(this,arguments)}(l.auth);le(c,l.auth,"internal-error"),l.parameters.sitekey=c})()}getAssertedRecaptcha(){return le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class mc{constructor(l,c){this.verificationId=l,this.onConfirmation=c}confirm(l){const c=Mo._fromVerification(this.verificationId,l);return this.onConfirmation(c)}}function Vu(f,l,c){return mi.apply(this,arguments)}function mi(){return(mi=(0,P.A)(function*(f,l,c){if((0,ye._isFirebaseServerApp)(f.app))return Promise.reject(Vt(f));const p=fn(f),y=yield Bu(p,l,(0,N.Ku)(c));return new mc(y,w=>pi(p,w))})).apply(this,arguments)}function kh(f,l,c){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,P.A)(function*(f,l,c){const p=(0,N.Ku)(f);yield Hs(!1,p,"phone");const y=yield Bu(p.auth,l,(0,N.Ku)(c));return new mc(y,w=>Ca(p,w))})).apply(this,arguments)}function pE(f,l,c){return $g.apply(this,arguments)}function $g(){return($g=(0,P.A)(function*(f,l,c){const p=(0,N.Ku)(f);if((0,ye._isFirebaseServerApp)(p.auth.app))return Promise.reject(Vt(p.auth));const y=yield Bu(p.auth,l,(0,N.Ku)(c));return new mc(y,w=>Jv(p,w))})).apply(this,arguments)}function Bu(f,l,c){return cr.apply(this,arguments)}function cr(){return cr=(0,P.A)(function*(f,l,c){var p;const y=yield c.verify();try{let w;if(le("string"==typeof y,f,"argument-error"),le(c.type===lt,f,"argument-error"),w="string"==typeof l?{phoneNumber:l}:l,"session"in w){const M=w.session;if("phoneNumber"in w)return le("enroll"===M.type,f,"internal-error"),(yield function V0(f,l){return Be(f,"POST","/v2/accounts/mfaEnrollment:start",Dt(f,l))}(f,{idToken:M.credential,phoneEnrollmentInfo:{phoneNumber:w.phoneNumber,recaptchaToken:y}})).phoneSessionInfo.sessionInfo;{le("signin"===M.type,f,"internal-error");const j=(null===(p=w.multiFactorHint)||void 0===p?void 0:p.uid)||w.multiFactorUid;return le(j,f,"missing-multi-factor-info"),(yield function je(f,l){return Be(f,"POST","/v2/accounts/mfaSignIn:start",Dt(f,l))}(f,{mfaPendingCredential:M.credential,mfaEnrollmentId:j,phoneSignInInfo:{recaptchaToken:y}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:M}=yield function ug(f,l){return gh.apply(this,arguments)}(f,{phoneNumber:w.phoneNumber,recaptchaToken:y});return M}}finally{c._reset()}}),cr.apply(this,arguments)}function Ds(f,l){return _c.apply(this,arguments)}function _c(){return(_c=(0,P.A)(function*(f,l){const c=(0,N.Ku)(f);if((0,ye._isFirebaseServerApp)(c.auth.app))return Promise.reject(Vt(c.auth));yield $s(c,l)})).apply(this,arguments)}let xa=(()=>{class f{constructor(c){this.providerId=f.PROVIDER_ID,this.auth=fn(c)}verifyPhoneNumber(c,p){return Bu(this.auth,c,(0,N.Ku)(p))}static credential(c,p){return Mo._fromVerification(c,p)}static credentialFromResult(c){return f.credentialFromTaggedObject(c)}static credentialFromError(c){return f.credentialFromTaggedObject(c.customData||{})}static credentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{phoneNumber:p,temporaryProof:y}=c;return p&&y?Mo._fromTokenResponse(p,y):null}}return f.PROVIDER_ID="phone",f.PHONE_SIGN_IN_METHOD="phone",f})();function Sr(f,l){return l?Wr(l):(le(f._popupRedirectResolver,f,"argument-error"),f._popupRedirectResolver)}class Fh extends xr{constructor(l){super("custom","custom"),this.params=l}_getIdTokenResponse(l){return ws(l,this._buildIdpRequest())}_linkToIdToken(l,c){return ws(l,this._buildIdpRequest(c))}_getReauthenticationResolver(l){return ws(l,this._buildIdpRequest())}_buildIdpRequest(l){const c={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return l&&(c.idToken=l),c}}function Hg(f){return yh(f.auth,new Fh(f),f.bypassAuthState)}function gE(f){const{auth:l,user:c}=f;return le(c,l,"internal-error"),Oi(c,new Fh(f),f.bypassAuthState)}function mE(f){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,P.A)(function*(f){const{auth:l,user:c}=f;return le(c,l,"internal-error"),$s(c,new Fh(f),f.bypassAuthState)})).apply(this,arguments)}class yc{constructor(l,c,p,y,w=!1){this.auth=l,this.resolver=p,this.user=y,this.bypassAuthState=w,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(c)?c:[c]}execute(){var l=this;return new Promise(function(){var c=(0,P.A)(function*(p,y){l.pendingPromise={resolve:p,reject:y};try{l.eventManager=yield l.resolver._initialize(l.auth),yield l.onExecution(),l.eventManager.registerConsumer(l)}catch(w){l.reject(w)}});return function(p,y){return c.apply(this,arguments)}}())}onAuthEvent(l){var c=this;return(0,P.A)(function*(){const{urlResponse:p,sessionId:y,postBody:w,tenantId:M,error:j,type:ne}=l;if(j)return void c.reject(j);const se={auth:c.auth,requestUri:p,sessionId:y,tenantId:M||void 0,postBody:w||void 0,user:c.user,bypassAuthState:c.bypassAuthState};try{c.resolve(yield c.getIdpTask(ne)(se))}catch(me){c.reject(me)}})()}onError(l){this.reject(l)}getIdpTask(l){switch(l){case"signInViaPopup":case"signInViaRedirect":return Hg;case"linkViaPopup":case"linkViaRedirect":return mE;case"reauthViaPopup":case"reauthViaRedirect":return gE;default:bn(this.auth,"internal-error")}}resolve(l){Yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(l),this.unregisterAndCleanUp()}reject(l){Yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(l),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const zg=new Pi(2e3,1e4);function Vh(f,l,c){return Lh.apply(this,arguments)}function Lh(){return(Lh=(0,P.A)(function*(f,l,c){if((0,ye._isFirebaseServerApp)(f.app))return Promise.reject(dt(f,"operation-not-supported-in-this-environment"));const p=fn(f);Ci(f,l,nn);const y=Sr(p,c);return new Ec(p,"signInViaPopup",l,y).executeNotNull()})).apply(this,arguments)}function qg(f,l,c){return ju.apply(this,arguments)}function ju(){return(ju=(0,P.A)(function*(f,l,c){const p=(0,N.Ku)(f);if((0,ye._isFirebaseServerApp)(p.auth.app))return Promise.reject(dt(p.auth,"operation-not-supported-in-this-environment"));Ci(p.auth,l,nn);const y=Sr(p.auth,c);return new Ec(p.auth,"reauthViaPopup",l,y,p).executeNotNull()})).apply(this,arguments)}function Gg(f,l,c){return vc.apply(this,arguments)}function vc(){return(vc=(0,P.A)(function*(f,l,c){const p=(0,N.Ku)(f);Ci(p.auth,l,nn);const y=Sr(p.auth,c);return new Ec(p.auth,"linkViaPopup",l,y,p).executeNotNull()})).apply(this,arguments)}let Ec=(()=>{class f extends yc{constructor(c,p,y,w,M){super(c,p,w,M),this.provider=y,this.authWindow=null,this.pollId=null,f.currentPopupAction&&f.currentPopupAction.cancel(),f.currentPopupAction=this}executeNotNull(){var c=this;return(0,P.A)(function*(){const p=yield c.execute();return le(p,c.auth,"internal-error"),p})()}onExecution(){var c=this;return(0,P.A)(function*(){Yt(1===c.filter.length,"Popup operations only handle one event");const p=Ra();c.authWindow=yield c.resolver._openPopup(c.auth,c.provider,c.filter[0],p),c.authWindow.associatedEvent=p,c.resolver._originValidation(c.auth).catch(y=>{c.reject(y)}),c.resolver._isIframeWebStorageSupported(c.auth,y=>{y||c.reject(dt(c.auth,"web-storage-unsupported"))}),c.pollUserCancellation()})()}get eventId(){var c;return(null===(c=this.authWindow)||void 0===c?void 0:c.associatedEvent)||null}cancel(){this.reject(dt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,f.currentPopupAction=null}pollUserCancellation(){const c=()=>{var p,y;this.pollId=null!==(y=null===(p=this.authWindow)||void 0===p?void 0:p.window)&&void 0!==y&&y.closed?window.setTimeout(()=>{this.pollId=null,this.reject(dt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(c,zg.get())};c()}}return f.currentPopupAction=null,f})();const Wg="pendingRedirect",Bo=new Map;class _E extends yc{constructor(l,c,p=!1){super(l,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],c,void 0,p),this.eventId=null}execute(){var l=()=>super.execute,c=this;return(0,P.A)(function*(){let p=Bo.get(c.auth._key());if(!p){try{const w=(yield function yE(f,l){return dr.apply(this,arguments)}(c.resolver,c.auth))?yield l().call(c):null;p=()=>Promise.resolve(w)}catch(y){p=()=>Promise.reject(y)}Bo.set(c.auth._key(),p)}return c.bypassAuthState||Bo.set(c.auth._key(),()=>Promise.resolve(null)),p()})()}onAuthEvent(l){var c=()=>super.onAuthEvent,p=this;return(0,P.A)(function*(){if("signInViaRedirect"===l.type)return c().call(p,l);if("unknown"!==l.type){if(l.eventId){const y=yield p.auth._redirectUserForId(l.eventId);if(y)return p.user=y,c().call(p,l);p.resolve(null)}}else p.resolve(null)})()}onExecution(){return(0,P.A)(function*(){})()}cleanUp(){}}function dr(){return(dr=(0,P.A)(function*(f,l){const c=Yg(l),p=Qg(f);if(!(yield p._isAvailable()))return!1;const y="true"===(yield p._get(c));return yield p._remove(c),y})).apply(this,arguments)}function Cs(f,l){return zt.apply(this,arguments)}function zt(){return(zt=(0,P.A)(function*(f,l){return Qg(f)._set(Yg(l),"true")})).apply(this,arguments)}function vE(){Bo.clear()}function Kg(f,l){Bo.set(f._key(),l)}function Qg(f){return Wr(f._redirectPersistence)}function Yg(f){return bu(Wg,f.config.apiKey,f.name)}function Jg(f,l,c){return function Xg(f,l,c){return Oa.apply(this,arguments)}(f,l,c)}function Oa(){return(Oa=(0,P.A)(function*(f,l,c){if((0,ye._isFirebaseServerApp)(f.app))return Promise.reject(Vt(f));const p=fn(f);Ci(f,l,nn),yield p._initializationPromise;const y=Sr(p,c);return yield Cs(y,p),y._openRedirect(p,l,"signInViaRedirect")})).apply(this,arguments)}function Ws(f,l,c){return function EE(f,l,c){return ka.apply(this,arguments)}(f,l,c)}function ka(){return(ka=(0,P.A)(function*(f,l,c){const p=(0,N.Ku)(f);if(Ci(p.auth,l,nn),(0,ye._isFirebaseServerApp)(p.auth.app))return Promise.reject(Vt(p.auth));yield p.auth._initializationPromise;const y=Sr(p.auth,c);yield Cs(y,p.auth);const w=yield Fa(p);return y._openRedirect(p.auth,l,"reauthViaRedirect",w)})).apply(this,arguments)}function Ic(f,l,c){return function wc(f,l,c){return $u.apply(this,arguments)}(f,l,c)}function $u(){return($u=(0,P.A)(function*(f,l,c){const p=(0,N.Ku)(f);Ci(p.auth,l,nn),yield p.auth._initializationPromise;const y=Sr(p.auth,c);yield Hs(!1,p,l.providerId),yield Cs(y,p.auth);const w=yield Fa(p);return y._openRedirect(p.auth,l,"linkViaRedirect",w)})).apply(this,arguments)}function Zg(f,l){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,P.A)(function*(f,l){return yield fn(f)._initializationPromise,Bh(f,l,!1)})).apply(this,arguments)}function Bh(f,l){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,P.A)(function*(f,l,c=!1){if((0,ye._isFirebaseServerApp)(f.app))return Promise.reject(Vt(f));const p=fn(f),y=Sr(p,l),M=yield new _E(p,y,c).execute();return M&&!c&&(delete M.user._redirectEventId,yield p._persistUserIfCurrent(M.user),yield p._setRedirectUser(null,l)),M})).apply(this,arguments)}function Fa(f){return Uh.apply(this,arguments)}function Uh(){return(Uh=(0,P.A)(function*(f){const l=Ra(`${f.uid}:::`);return f._redirectEventId=l,yield f.auth._setRedirectUser(f),yield f.auth._persistUserIfCurrent(f),l})).apply(this,arguments)}class bc{constructor(l){this.auth=l,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(l){this.consumers.add(l),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,l)&&(this.sendToConsumer(this.queuedRedirectEvent,l),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(l){this.consumers.delete(l)}onEvent(l){if(this.hasEventBeenHandled(l))return!1;let c=!1;return this.consumers.forEach(p=>{this.isEventForConsumer(l,p)&&(c=!0,this.sendToConsumer(l,p),this.saveEventToCache(l))}),this.hasHandledPotentialRedirect||!function wE(f){switch(f.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return em(f);default:return!1}}(l)||(this.hasHandledPotentialRedirect=!0,c||(this.queuedRedirectEvent=l,c=!0)),c}sendToConsumer(l,c){var p;if(l.error&&!em(l)){const y=(null===(p=l.error.code)||void 0===p?void 0:p.split("auth/")[1])||"internal-error";c.onError(dt(this.auth,y))}else c.onAuthEvent(l)}isEventForConsumer(l,c){const p=null===c.eventId||!!l.eventId&&l.eventId===c.eventId;return c.filter.includes(l.type)&&p}hasEventBeenHandled(l){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(IE(l))}saveEventToCache(l){this.cachedEventUids.add(IE(l)),this.lastProcessedEventTime=Date.now()}}function IE(f){return[f.type,f.eventId,f.sessionId,f.tenantId].filter(l=>l).join("-")}function em({type:f,error:l}){return"unknown"===f&&"auth/no-auth-event"===l?.code}function TE(f){return tm.apply(this,arguments)}function tm(){return(tm=(0,P.A)(function*(f,l={}){return Be(f,"GET","/v1/projects",l)})).apply(this,arguments)}const jh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hu=/^https?/;function Uo(){return(Uo=(0,P.A)(function*(f){if(f.config.emulator)return;const{authorizedDomains:l}=yield TE(f);for(const c of l)try{if($h(c))return}catch{}bn(f,"unauthorized-domain")})).apply(this,arguments)}function $h(f){const l=nr(),{protocol:c,hostname:p}=new URL(l);if(f.startsWith("chrome-extension://")){const M=new URL(f);return""===M.hostname&&""===p?"chrome-extension:"===c&&f.replace("chrome-extension://","")===l.replace("chrome-extension://",""):"chrome-extension:"===c&&M.hostname===p}if(!Hu.test(c))return!1;if(jh.test(f))return p===f;const y=f.replace(/\./g,"\\.");return new RegExp("^(.+\\."+y+"|"+y+")$","i").test(p)}const Ac=new Pi(3e4,6e4);function AE(){const f=An().___jsl;if(f?.H)for(const l of Object.keys(f.H))if(f.H[l].r=f.H[l].r||[],f.H[l].L=f.H[l].L||[],f.H[l].r=[...f.H[l].L],f.CP)for(let c=0;c<f.CP.length;c++)f.CP[c]=null}let zu=null;const rs=new Pi(5e3,15e3),CE="__/auth/iframe",Dc="emulator/auth/iframe",Hh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Cc(f){const l=f.config;le(l.authDomain,f,"auth-domain-config-required");const c=l.emulator?hi(l,Dc):`https://${f.config.authDomain}/${CE}`,p={apiKey:l.apiKey,appName:f.name,v:ye.SDK_VERSION},y=rm.get(f.config.apiHost);y&&(p.eid=y);const w=f._getFrameworks();return w.length&&(p.fw=w.join(",")),`${c}?${(0,N.Am)(p).slice(1)}`}function qh(){return qh=(0,P.A)(function*(f){const l=yield function DE(f){return zu=zu||function nm(f){return new Promise((l,c)=>{var p,y,w;function M(){AE(),gapi.load("gapi.iframes",{callback:()=>{l(gapi.iframes.getContext())},ontimeout:()=>{AE(),c(dt(f,"network-request-failed"))},timeout:Ac.get()})}if(null!==(y=null===(p=An().gapi)||void 0===p?void 0:p.iframes)&&void 0!==y&&y.Iframe)l(gapi.iframes.getContext());else{if(null===(w=An().gapi)||void 0===w||!w.load){const j=ig("iframefcb");return An()[j]=()=>{gapi.load?M():c(dt(f,"network-request-failed"))},rg(`${function Wl(){return Gl.gapiScript}()}?onload=${j}`).catch(ne=>c(ne))}M()}}).catch(l=>{throw zu=null,l})}(f),zu}(f),c=An().gapi;return le(c,f,"internal-error"),l.open({where:document.body,url:Cc(f),messageHandlersFilter:c.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Hh,dontclear:!0},p=>new Promise(function(){var y=(0,P.A)(function*(w,M){yield p.restyle({setHideOnLeave:!1});const j=dt(f,"network-request-failed"),ne=An().setTimeout(()=>{M(j)},rs.get());function se(){An().clearTimeout(ne),w(p)}p.ping(se).then(se,()=>{M(j)})});return function(w,M){return y.apply(this,arguments)}}()))}),qh.apply(this,arguments)}const im={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class qu{constructor(l){this.window=l,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const um="__/auth/handler",lm="emulator/auth/handler",Gu=encodeURIComponent("fac");function Gh(f,l,c,p,y,w){return hr.apply(this,arguments)}function hr(){return(hr=(0,P.A)(function*(f,l,c,p,y,w){le(f.config.authDomain,f,"auth-domain-config-required"),le(f.config.apiKey,f,"invalid-api-key");const M={apiKey:f.config.apiKey,appName:f.name,authType:c,redirectUrl:p,v:ye.SDK_VERSION,eventId:y};if(l instanceof nn){l.setDefaultLanguage(f.languageCode),M.providerId=l.providerId||"",(0,N.Im)(l.getCustomParameters())||(M.customParameters=JSON.stringify(l.getCustomParameters()));for(const[me,ke]of Object.entries(w||{}))M[me]=ke}if(l instanceof Xi){const me=l.getScopes().filter(ke=>""!==ke);me.length>0&&(M.scopes=me.join(","))}f.tenantId&&(M.tid=f.tenantId);const j=M;for(const me of Object.keys(j))void 0===j[me]&&delete j[me];const ne=yield f._getAppCheckToken(),se=ne?`#${Gu}=${encodeURIComponent(ne)}`:"";return`${function RE({config:f}){return f.emulator?hi(f,lm):`https://${f.authDomain}/${um}`}(f)}?${(0,N.Am)(j).slice(1)}${se}`})).apply(this,arguments)}const Kn="webStorageSupport",cm=class Wh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cc,this._completeRedirectFn=Bh,this._overrideRedirectResult=Kg}_openPopup(l,c,p,y){var w=this;return(0,P.A)(function*(){var M;Yt(null===(M=w.eventManagers[l._key()])||void 0===M?void 0:M.manager,"_initialize() not called before _openPopup()");const j=yield Gh(l,c,p,nr(),y);return function jo(f,l,c,p=500,y=600){const w=Math.max((window.screen.availHeight-y)/2,0).toString(),M=Math.max((window.screen.availWidth-p)/2,0).toString();let j="";const ne=Object.assign(Object.assign({},im),{width:p.toString(),height:y.toString(),top:w,left:M}),se=(0,N.ZQ)().toLowerCase();c&&(j=ng(se)?"_blank":c),zl(se)&&(l=l||"http://localhost",ne.scrollbars="yes");const me=Object.entries(ne).reduce((ft,[Qn,qt])=>`${ft}${Qn}=${qt},`,"");if(function Lt(f=(0,N.ZQ)()){var l;return Cu(f)&&!(null===(l=window.navigator)||void 0===l||!l.standalone)}(se)&&"_self"!==j)return function PE(f,l){const c=document.createElement("a");c.href=f,c.target=l;const p=document.createEvent("MouseEvent");p.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),c.dispatchEvent(p)}(l||"",j),new qu(null);const ke=window.open(l||"",j,me);le(ke,f,"popup-blocked");try{ke.focus()}catch{}return new qu(ke)}(l,j,Ra())})()}_openRedirect(l,c,p,y){var w=this;return(0,P.A)(function*(){return yield w._originValidation(l),function Rh(f){An().location.href=f}(yield Gh(l,c,p,nr(),y)),new Promise(()=>{})})()}_initialize(l){const c=l._key();if(this.eventManagers[c]){const{manager:y,promise:w}=this.eventManagers[c];return y?Promise.resolve(y):(Yt(w,"If manager is not set, promise should be"),w)}const p=this.initAndGetManager(l);return this.eventManagers[c]={promise:p},p.catch(()=>{delete this.eventManagers[c]}),p}initAndGetManager(l){var c=this;return(0,P.A)(function*(){const p=yield function zh(f){return qh.apply(this,arguments)}(l),y=new bc(l);return p.register("authEvent",w=>(le(w?.authEvent,l,"invalid-auth-event"),{status:y.onEvent(w.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),c.eventManagers[l._key()]={manager:y},c.iframes[l._key()]=p,y})()}_isIframeWebStorageSupported(l,c){this.iframes[l._key()].send(Kn,{type:Kn},y=>{var w;const M=null===(w=y?.[0])||void 0===w?void 0:w[Kn];void 0!==M&&c(!!M),bn(l,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(l){const c=l._key();return this.originValidationPromises[c]||(this.originValidationPromises[c]=function bE(f){return Uo.apply(this,arguments)}(l)),this.originValidationPromises[c]}get _shouldInitProactively(){return Vv()||eh()||Cu()}};class Kh{constructor(l){this.factorId=l}_process(l,c,p){switch(c.type){case"enroll":return this._finalizeEnroll(l,c.credential,p);case"signin":return this._finalizeSignIn(l,c.credential);default:return tr("unexpected MultiFactorSessionType")}}}class Wu extends Kh{constructor(l){super("phone"),this.credential=l}static _fromCredential(l){return new Wu(l)}_finalizeEnroll(l,c,p){return function L0(f,l){return Be(f,"POST","/v2/accounts/mfaEnrollment:finalize",Dt(f,l))}(l,{idToken:c,displayName:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(l,c){return function Ug(f,l){return Be(f,"POST","/v2/accounts/mfaSignIn:finalize",Dt(f,l))}(l,{mfaPendingCredential:c,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Va=(()=>{class f{constructor(){}static assertion(c){return Wu._fromCredential(c)}}return f.FACTOR_ID="phone",f})();var $o="@firebase/auth";class NE{constructor(l){this.auth=l,this.internalListeners=new Map}getUid(){var l;return this.assertAuthConfigured(),(null===(l=this.auth.currentUser)||void 0===l?void 0:l.uid)||null}getToken(l){var c=this;return(0,P.A)(function*(){return c.assertAuthConfigured(),yield c.auth._initializationPromise,c.auth.currentUser?{accessToken:yield c.auth.currentUser.getIdToken(l)}:null})()}addAuthTokenListener(l){if(this.assertAuthConfigured(),this.internalListeners.has(l))return;const c=this.auth.onIdTokenChanged(p=>{l(p?.stsTokenManager.accessToken||null)});this.internalListeners.set(l,c),this.updateProactiveRefresh()}removeAuthTokenListener(l){this.assertAuthConfigured();const c=this.internalListeners.get(l);c&&(this.internalListeners.delete(l),c(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,N.XA)("authIdTokenMaxAge"),function A0(f){Gl=f}({loadJS:f=>new Promise((l,c)=>{const p=document.createElement("script");p.setAttribute("src",f),p.onload=l,p.onerror=y=>{const w=dt("internal-error");w.customData=y,c(w)},p.type="text/javascript",p.charset="UTF-8",function OE(){var f,l;return null!==(l=null===(f=document.getElementsByTagName("head"))||void 0===f?void 0:f[0])&&void 0!==l?l:document}().appendChild(p)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function H0(f){(0,ye._registerComponent)(new vo.uA("auth",(l,{options:c})=>{const p=l.getProvider("app").getImmediate(),y=l.getProvider("heartbeat"),w=l.getProvider("app-check-internal"),{apiKey:M,authDomain:j}=p.options;le(M&&!M.includes(":"),"invalid-api-key",{appName:p.name});const ne={apiKey:M,authDomain:j,clientPlatform:f,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ie(f)},se=new sh(p,y,w,ne);return function Ql(f,l){const c=l?.persistence||[],p=(Array.isArray(c)?c:[c]).map(Wr);l?.errorMap&&f._updateErrorMap(l.errorMap),f._initializeWithPersistence(p,l?.popupRedirectResolver)}(se,c),se},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((l,c,p)=>{l.getProvider("auth-internal").initialize()})),(0,ye._registerComponent)(new vo.uA("auth-internal",l=>{const c=fn(l.getProvider("auth").getImmediate());return new NE(c)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ye.registerVersion)($o,"1.7.9",function $0(f){switch(f){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(f)),(0,ye.registerVersion)($o,"1.7.9","esm2017")}("Browser")},401:(_s,gr,$e)=>{$e.d(gr,{Am:()=>Ki,Bd:()=>Nn,FA:()=>Vs,Fy:()=>yo,I9:()=>le,Im:()=>bn,Ku:()=>tt,Ll:()=>tn,T9:()=>Hn,Uj:()=>wt,XA:()=>rt,ZQ:()=>Ye,bD:()=>_r,c1:()=>li,cY:()=>bi,eX:()=>ya,g:()=>Dr,gR:()=>va,hp:()=>tr,jZ:()=>Mn,lT:()=>Fs,lV:()=>ys,mS:()=>xe,nr:()=>Ai,p7:()=>mr,sr:()=>At,tD:()=>nr,u:()=>ee,yU:()=>Xn,zW:()=>_a,zw:()=>Re});const Pe=function(A){const I=[];let b=0;for(let k=0;k<A.length;k++){let O=A.charCodeAt(k);O<128?I[b++]=O:O<2048?(I[b++]=O>>6|192,I[b++]=63&O|128):55296==(64512&O)&&k+1<A.length&&56320==(64512&A.charCodeAt(k+1))?(O=65536+((1023&O)<<10)+(1023&A.charCodeAt(++k)),I[b++]=O>>18|240,I[b++]=O>>12&63|128,I[b++]=O>>6&63|128,I[b++]=63&O|128):(I[b++]=O>>12|224,I[b++]=O>>6&63|128,I[b++]=63&O|128)}return I},hn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(A,I){if(!Array.isArray(A))throw Error("encodeByteArray takes an array as a parameter");this.init_();const b=I?this.byteToCharMapWebSafe_:this.byteToCharMap_,k=[];for(let O=0;O<A.length;O+=3){const Q=A[O],ge=O+1<A.length,Oe=ge?A[O+1]:0,_t=O+2<A.length,Et=_t?A[O+2]:0;let Ae=(15&Oe)<<2|Et>>6,Ke=63&Et;_t||(Ke=64,ge||(Ae=64)),k.push(b[Q>>2],b[(3&Q)<<4|Oe>>4],b[Ae],b[Ke])}return k.join("")},encodeString(A,I){return this.HAS_NATIVE_SUPPORT&&!I?btoa(A):this.encodeByteArray(Pe(A),I)},decodeString(A,I){return this.HAS_NATIVE_SUPPORT&&!I?atob(A):function(A){const I=[];let b=0,k=0;for(;b<A.length;){const O=A[b++];if(O<128)I[k++]=String.fromCharCode(O);else if(O>191&&O<224){const Q=A[b++];I[k++]=String.fromCharCode((31&O)<<6|63&Q)}else if(O>239&&O<365){const _t=((7&O)<<18|(63&A[b++])<<12|(63&A[b++])<<6|63&A[b++])-65536;I[k++]=String.fromCharCode(55296+(_t>>10)),I[k++]=String.fromCharCode(56320+(1023&_t))}else{const Q=A[b++],ge=A[b++];I[k++]=String.fromCharCode((15&O)<<12|(63&Q)<<6|63&ge)}}return I.join("")}(this.decodeStringToByteArray(A,I))},decodeStringToByteArray(A,I){this.init_();const b=I?this.charToByteMapWebSafe_:this.charToByteMap_,k=[];for(let O=0;O<A.length;){const Q=b[A.charAt(O++)],Oe=O<A.length?b[A.charAt(O)]:0;++O;const Et=O<A.length?b[A.charAt(O)]:64;++O;const be=O<A.length?b[A.charAt(O)]:64;if(++O,null==Q||null==Oe||null==Et||null==be)throw new Qt;k.push(Q<<2|Oe>>4),64!==Et&&(k.push(Oe<<4&240|Et>>2),64!==be&&k.push(Et<<6&192|be))}return k},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let A=0;A<this.ENCODED_VALS.length;A++)this.byteToCharMap_[A]=this.ENCODED_VALS.charAt(A),this.charToByteMap_[this.byteToCharMap_[A]]=A,this.byteToCharMapWebSafe_[A]=this.ENCODED_VALS_WEBSAFE.charAt(A),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[A]]=A,A>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(A)]=A,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(A)]=A)}}};class Qt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wt=function(A){return function(A){const I=Pe(A);return hn.encodeByteArray(I,!0)}(A).replace(/\./g,"")},ee=function(A){try{return hn.decodeString(A,!0)}catch(I){console.error("base64Decode failed: ",I)}return null};function Re(A,I){if(!(I instanceof Object))return I;switch(I.constructor){case Date:return new Date(I.getTime());case Object:void 0===A&&(A={});break;case Array:A=[];break;default:return I}for(const b in I)!I.hasOwnProperty(b)||!ot(b)||(A[b]=Re(A[b],I[b]));return A}function ot(A){return"__proto__"!==A}function xe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const We=()=>{try{return xe().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const A=process.env.__FIREBASE_DEFAULTS__;return A?JSON.parse(A):void 0})()||(()=>{if(typeof document>"u")return;let A;try{A=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const I=A&&ee(A[1]);return I&&JSON.parse(I)})()}catch(A){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${A}`)}},Xn=A=>{const I=(A=>{var I,b;return null===(b=null===(I=We())||void 0===I?void 0:I.emulatorHosts)||void 0===b?void 0:b[A]})(A);if(!I)return;const b=I.lastIndexOf(":");if(b<=0||b+1===I.length)throw new Error(`Invalid host ${I} with no separate hostname and port!`);const k=parseInt(I.substring(b+1),10);return"["===I[0]?[I.substring(1,b-1),k]:[I.substring(0,b),k]},Hn=()=>{var A;return null===(A=We())||void 0===A?void 0:A.config},rt=A=>{var I;return null===(I=We())||void 0===I?void 0:I[`_${A}`]};class bi{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((I,b)=>{this.resolve=I,this.reject=b})}wrapCallback(I){return(b,k)=>{b?this.reject(b):this.resolve(k),"function"==typeof I&&(this.promise.catch(()=>{}),1===I.length?I(b):I(b,k))}}}function yo(A,I){if(A.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const k=I||"demo-project",O=A.iat||0,Q=A.sub||A.user_id;if(!Q)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ge=Object.assign({iss:`https://securetoken.google.com/${k}`,aud:k,iat:O,exp:O+3600,auth_time:O,sub:Q,user_id:Q,firebase:{sign_in_provider:"custom",identities:{}}},A);return[wt(JSON.stringify({alg:"none",type:"JWT"})),wt(JSON.stringify(ge)),""].join(".")}function Ye(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Mn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function tn(){var A;const I=null===(A=We())||void 0===A?void 0:A.forceEnvironment;if("node"===I)return!0;if("browser"===I)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Nn(){return typeof window<"u"||mr()}function mr(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function li(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function At(){const A="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof A&&void 0!==A.id}function ys(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Fs(){const A=Ye();return A.indexOf("MSIE ")>=0||A.indexOf("Trident/")>=0}function Ai(){return!tn()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _a(){try{return"object"==typeof indexedDB}catch{return!1}}function ya(){return new Promise((A,I)=>{try{let b=!0;const k="validate-browser-context-for-indexeddb-analytics-module",O=self.indexedDB.open(k);O.onsuccess=()=>{O.result.close(),b||self.indexedDB.deleteDatabase(k),A(!0)},O.onupgradeneeded=()=>{b=!1},O.onerror=()=>{var Q;I((null===(Q=O.error)||void 0===Q?void 0:Q.message)||"")}}catch(b){I(b)}})}class Dr extends Error{constructor(I,b,k){super(b),this.code=I,this.customData=k,this.name="FirebaseError",Object.setPrototypeOf(this,Dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vs.prototype.create)}}class Vs{constructor(I,b,k){this.service=I,this.serviceName=b,this.errors=k}create(I,...b){const k=b[0]||{},O=`${this.service}/${I}`,Q=this.errors[I],ge=Q?function Io(A,I){return A.replace(wo,(b,k)=>{const O=I[k];return null!=O?String(O):`<${k}?>`})}(Q,k):"Error";return new Dr(O,`${this.serviceName}: ${ge} (${O}).`,k)}}const wo=/\{\$([^}]+)}/g;function va(A,I){return Object.prototype.hasOwnProperty.call(A,I)}function bn(A){for(const I in A)if(Object.prototype.hasOwnProperty.call(A,I))return!1;return!0}function _r(A,I){if(A===I)return!0;const b=Object.keys(A),k=Object.keys(I);for(const O of b){if(!k.includes(O))return!1;const Q=A[O],ge=I[O];if(Vt(Q)&&Vt(ge)){if(!_r(Q,ge))return!1}else if(Q!==ge)return!1}for(const O of k)if(!b.includes(O))return!1;return!0}function Vt(A){return null!==A&&"object"==typeof A}function Ki(A){const I=[];for(const[b,k]of Object.entries(A))Array.isArray(k)?k.forEach(O=>{I.push(encodeURIComponent(b)+"="+encodeURIComponent(O))}):I.push(encodeURIComponent(b)+"="+encodeURIComponent(k));return I.length?"&"+I.join("&"):""}function le(A){const I={};return A.replace(/^\?/,"").split("&").forEach(k=>{if(k){const[O,Q]=k.split("=");I[decodeURIComponent(O)]=decodeURIComponent(Q)}}),I}function tr(A){const I=A.indexOf("?");if(!I)return"";const b=A.indexOf("#",I);return A.substring(I,b>0?b:void 0)}function nr(A,I){const b=new Tt(A,I);return b.subscribe.bind(b)}class Tt{constructor(I,b){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=b,this.task.then(()=>{I(this)}).catch(k=>{this.error(k)})}next(I){this.forEachObserver(b=>{b.next(I)})}error(I){this.forEachObserver(b=>{b.error(I)}),this.close(I)}complete(){this.forEachObserver(I=>{I.complete()}),this.close()}subscribe(I,b,k){let O;if(void 0===I&&void 0===b&&void 0===k)throw new Error("Missing Observer.");O=function Ao(A,I){if("object"!=typeof A||null===A)return!1;for(const b of I)if(b in A&&"function"==typeof A[b])return!0;return!1}(I,["next","error","complete"])?I:{next:I,error:b,complete:k},void 0===O.next&&(O.next=di),void 0===O.error&&(O.error=di),void 0===O.complete&&(O.complete=di);const Q=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?O.error(this.finalError):O.complete()}catch{}}),this.observers.push(O),Q}unsubscribeOne(I){void 0===this.observers||void 0===this.observers[I]||(delete this.observers[I],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(I){if(!this.finalized)for(let b=0;b<this.observers.length;b++)this.sendOne(b,I)}sendOne(I,b){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[I])try{b(this.observers[I])}catch(k){typeof console<"u"&&console.error&&console.error(k)}})}close(I){this.finalized||(this.finalized=!0,void 0!==I&&(this.finalError=I),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function di(){}function tt(A){return A&&A._delegate?A._delegate:A}},867:(_s,gr,$e)=>{function P(n){return"function"==typeof n}let ye=!1;const N={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else ye&&console.log("RxJS: Back to a better error behavior. Thank you. <3");ye=n},get useDeprecatedSynchronousErrorHandling(){return ye}};function Pe(n){setTimeout(()=>{throw n},0)}const En={closed:!0,next(n){},error(n){if(N.useDeprecatedSynchronousErrorHandling)throw n;Pe(n)},complete(){}},hn=Array.isArray||(n=>n&&"number"==typeof n.length);function Qt(n){return null!==n&&"object"==typeof n}const wt=(()=>{function n(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((t,r)=>`${r+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return n.prototype=Object.create(Error.prototype),n})();class ee{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:r,_unsubscribe:i,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof ee)t.remove(this);else if(null!==t)for(let o=0;o<t.length;++o)t[o].remove(this);if(P(i)){r&&(this._unsubscribe=void 0);try{i.call(this)}catch(o){e=o instanceof wt?ce(o.errors):[o]}}if(hn(s)){let o=-1,a=s.length;for(;++o<a;){const u=s[o];if(Qt(u))try{u.unsubscribe()}catch(d){e=e||[],d instanceof wt?e=e.concat(ce(d.errors)):e.push(d)}}}if(e)throw new wt(e)}add(e){let t=e;if(!e)return ee.EMPTY;switch(typeof e){case"function":t=new ee(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof ee)){const s=t;t=new ee,t._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=t;if(null===r)t._parentOrParents=this;else if(r instanceof ee){if(r===this)return t;t._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return t;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[t]:i.push(t),t}remove(e){const t=this._subscriptions;if(t){const r=t.indexOf(e);-1!==r&&t.splice(r,1)}}}var n;function ce(n){return n.reduce((e,t)=>e.concat(t instanceof wt?t.errors:t),[])}ee.EMPTY=((n=new ee).closed=!0,n);const Re="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class xe extends ee{constructor(e,t,r){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=En;break;case 1:if(!e){this.destination=En;break}if("object"==typeof e){e instanceof xe?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new jn(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new jn(this,e,t,r)}}[Re](){return this}static create(e,t,r){const i=new xe(e,t,r);return i.syncErrorThrowable=!1,i}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class jn extends xe{constructor(e,t,r,i){super(),this._parentSubscriber=e;let s,o=this;P(t)?s=t:t&&(s=t.next,r=t.error,i=t.complete,t!==En&&(o=Object.create(t),P(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=r,this._complete=i}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;N.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:r}=N;if(this._error)r&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)r?(t.syncErrorValue=e,t.syncErrorThrown=!0):Pe(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;Pe(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);N.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(r){if(this.unsubscribe(),N.useDeprecatedSynchronousErrorHandling)throw r;Pe(r)}}__tryOrSetError(e,t,r){if(!N.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(i){return N.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(Pe(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const We="function"==typeof Symbol&&Symbol.observable||"@@observable";function $n(n){return n}let rt=(()=>{class n{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const{operator:s}=this,o=function et(n,e,t){if(n){if(n instanceof xe)return n;if(n[Re])return n[Re]()}return n||e||t?new xe(n,e,t):new xe(En)}(t,r,i);if(o.add(s?s.call(o,this.source):this.source||N.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),N.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){N.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=r),function bt(n){for(;n;){const{closed:e,destination:t,isStopped:r}=n;if(e||r)return!1;n=t&&t instanceof xe?t:null}return!0}(t)?t.error(r):console.warn(r)}}forEach(t,r){return new(r=bi(r))((i,s)=>{let o;o=this.subscribe(a=>{try{t(a)}catch(u){s(u),o&&o.unsubscribe()}},s,i)})}_subscribe(t){const{source:r}=this;return r&&r.subscribe(t)}[We](){return this}pipe(...t){return 0===t.length?this:function Hn(n){return 0===n.length?$n:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}(t)(this)}toPromise(t){return new(t=bi(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function bi(n){if(n||(n=N.Promise||Promise),!n)throw new Error("no Promise impl found");return n}const Ye=(()=>{function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n})();class Mn extends ee{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}class tn extends xe{constructor(e){super(e),this.destination=e}}let Nn=(()=>{class n extends rt{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Re](){return new tn(this)}lift(t){const r=new mr(this,this);return r.operator=t,r}next(t){if(this.closed)throw new Ye;if(!this.isStopped){const{observers:r}=this,i=r.length,s=r.slice();for(let o=0;o<i;o++)s[o].next(t)}}error(t){if(this.closed)throw new Ye;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:r}=this,i=r.length,s=r.slice();for(let o=0;o<i;o++)s[o].error(t);this.observers.length=0}complete(){if(this.closed)throw new Ye;this.isStopped=!0;const{observers:t}=this,r=t.length,i=t.slice();for(let s=0;s<r;s++)i[s].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new Ye;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new Ye;return this.hasError?(t.error(this.thrownError),ee.EMPTY):this.isStopped?(t.complete(),ee.EMPTY):(this.observers.push(t),new Mn(this,t))}asObservable(){const t=new rt;return t.source=this,t}}return n.create=(e,t)=>new mr(e,t),n})();class mr extends Nn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):ee.EMPTY}}function li(n){return n&&"function"==typeof n.schedule}function At(n,e){return function(r){if("function"!=typeof n)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new ys(n,e))}}class ys{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new Zn(e,this.project,this.thisArg))}}class Zn extends xe{constructor(e,t,r){super(e),this.project=t,this.count=0,this.thisArg=r||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}const Fs=n=>e=>{for(let t=0,r=n.length;t<r&&!e.closed;t++)e.next(n[t]);e.complete()},Ai=function ma(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),Eo=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Dr(n){return!!n&&"function"!=typeof n.subscribe&&"function"==typeof n.then}const Vs=n=>{if(n&&"function"==typeof n[We])return(n=>e=>{const t=n[We]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)})(n);if(Eo(n))return Fs(n);if(Dr(n))return(n=>e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Pe),e))(n);if(n&&"function"==typeof n[Ai])return(n=>e=>{const t=n[Ai]();for(;;){let r;try{r=t.next()}catch(i){return e.error(i),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof t.return&&e.add(()=>{t.return&&t.return()}),e})(n);{const t=`You provided ${Qt(n)?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(t)}};function Gi(n,e){return new rt(t=>{const r=new ee;let i=0;return r.add(e.schedule(function(){i!==n.length?(t.next(n[i++]),t.closed||r.add(this.schedule())):t.complete()})),r})}function er(n,e){return e?function vs(n,e){if(null!=n){if(function Wi(n){return n&&"function"==typeof n[We]}(n))return function Io(n,e){return new rt(t=>{const r=new ee;return r.add(e.schedule(()=>{const i=n[We]();r.add(i.subscribe({next(s){r.add(e.schedule(()=>t.next(s)))},error(s){r.add(e.schedule(()=>t.error(s)))},complete(){r.add(e.schedule(()=>t.complete()))}}))})),r})}(n,e);if(Dr(n))return function wo(n,e){return new rt(t=>{const r=new ee;return r.add(e.schedule(()=>n.then(i=>{r.add(e.schedule(()=>{t.next(i),r.add(e.schedule(()=>t.complete()))}))},i=>{r.add(e.schedule(()=>t.error(i)))}))),r})}(n,e);if(Eo(n))return Gi(n,e);if(function bo(n){return n&&"function"==typeof n[Ai]}(n)||"string"==typeof n)return function To(n,e){if(!n)throw new Error("Iterable cannot be null");return new rt(t=>{const r=new ee;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=n[Ai](),r.add(e.schedule(function(){if(t.closed)return;let s,o;try{const a=i.next();s=a.value,o=a.done}catch(a){return void t.error(a)}o?t.complete():(t.next(s),this.schedule())}))})),r})}(n,e)}throw new TypeError((null!==n&&typeof n||n)+" is not observable")}(n,e):n instanceof rt?n:new rt(Vs(n))}class Di extends xe{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ci extends xe{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function dt(n,e){if(e.closed)return;if(n instanceof rt)return n.subscribe(e);let t;try{t=Vs(n)(e)}catch(r){e.error(r)}return t}function _r(n,e,t=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(_r((i,s)=>er(n(i,s)).pipe(At((o,a)=>e(i,o,s,a))),t)):("number"==typeof e&&(t=e),r=>r.lift(new Vt(n,t)))}class Vt{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new Ci(e,this.project,this.concurrent))}}class Ci extends ci{constructor(e,t,r=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(t)}_innerSub(e){const t=new Di(this),r=this.destination;r.add(t);const i=dt(e,t);i!==t&&r.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function le(n=Number.POSITIVE_INFINITY){return _r($n,n)}function tr(n,e){return e?Gi(n,e):new rt(Fs(n))}function Yt(...n){let e=Number.POSITIVE_INFINITY,t=null,r=n[n.length-1];return li(r)?(t=n.pop(),n.length>1&&"number"==typeof n[n.length-1]&&(e=n.pop())):"number"==typeof r&&(e=n.pop()),null===t&&1===n.length&&n[0]instanceof rt?n[0]:le(e)(tr(n,t))}class nr extends Nn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Ye;return this._value}next(e){super.next(this._value=e)}}function Tt(...n){let e=n[n.length-1];return li(e)?(n.pop(),Gi(n,e)):tr(n)}function Si(){return function(e){return e.lift(new Ao(e))}}class Ao{constructor(e){this.connectable=e}call(e,t){const{connectable:r}=this;r._refCount++;const i=new di(e,r),s=t.subscribe(i);return i.closed||(i.connection=r.connect()),s}}class di extends xe{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:r}=this,i=e._connection;this.connection=null,i&&(!r||i===r)&&i.unsubscribe()}}class Pi extends rt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new ee,e.add(this.source.subscribe(new In(this.getSubject(),this))),e.closed&&(this._connection=null,e=ee.EMPTY)),e}refCount(){return Si()(this)}}const hi=(()=>{const n=Pi.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:n._subscribe},_isComplete:{value:n._isComplete,writable:!0},getSubject:{value:n.getSubject},connect:{value:n.connect},refCount:{value:n.refCount}}})();class In extends tn{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}class Be{constructor(e,t){this.subjectFactory=e,this.selector=t}call(e,t){const{selector:r}=this,i=this.subjectFactory(),s=r(i).subscribe(e);return s.add(t.subscribe(i)),s}}function qr(){return new Nn}function Qi(){return n=>Si()(function Dt(n,e){return function(r){let i;if(i="function"==typeof n?n:function(){return n},"function"==typeof e)return r.lift(new Be(i,e));const s=Object.create(r,hi);return s.source=r,s.subjectFactory=i,s}}(qr)(n))}function wn(n,e){return"function"==typeof e?t=>t.pipe(wn((r,i)=>er(n(r,i)).pipe(At((s,o)=>e(r,s,i,o))))):t=>t.lift(new yr(n))}class yr{constructor(e){this.project=e}call(e,t){return t.subscribe(new Ri(e,this.project))}}class Ri extends ci{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(i){return void this.destination.error(i)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new Di(this),i=this.destination;i.add(r),this.innerSubscription=dt(e,r),this.innerSubscription!==r&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}function Bs(n,e){return t=>t.lift(new Ea(n,e))}class Ea{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new Us(e,this.compare,this.keySelector))}}class Us extends xe{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:i}=this;t=i?i(e):e}catch(i){return this.destination.error(i)}let r=!1;if(this.hasKey)try{const{compare:i}=this;r=i(this.key,t)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}function tt(n){for(let e in n)if(n[e]===tt)return e;throw Error("Could not find renamed property on target object.")}function A(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function I(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(I).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function b(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const k=tt({__forward_ref__:tt});function O(n){return n.__forward_ref__=O,n.toString=function(){return I(this())},n}function Q(n){return ge(n)?n():n}function ge(n){return"function"==typeof n&&n.hasOwnProperty(k)&&n.__forward_ref__===O}function Oe(n){return n&&!!n.\u0275providers}const Et="https://g.co/ng/security#xss";class Y extends Error{constructor(e,t){super(function be(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Ae(n){return"string"==typeof n?n:null==n?"":String(n)}function Co(n,e){throw new Y(-201,!1)}function qn(n,e){null==n&&function Ve(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function Ue(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Gn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Wr(n){return Hl(n,Au)||Hl(n,eh)}function Hl(n,e){return n.hasOwnProperty(e)?n[e]:null}function Es(n){return n&&(n.hasOwnProperty(zl)||n.hasOwnProperty(ng))?n[zl]:null}const Au=tt({\u0275prov:tt}),zl=tt({\u0275inj:tt}),eh=tt({ngInjectableDef:tt}),ng=tt({ngInjectorDef:tt});var at=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(at||{});let Du;function Cr(n){const e=Du;return Du=n,e}function Cu(n,e,t){const r=Wr(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&at.Optional?null:void 0!==e?e:void Co(I(n))}const Lt=globalThis;class Ie{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Ue({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Su={},oh="__NG_DI_FLAG__",Wl="ngTempTokenPath",Uv=/\n/gm,ah="__source";let So;function fi(n){const e=So;return So=n,e}function lh(n,e=at.Default){if(void 0===So)throw new Y(-203,!1);return null===So?Cu(n,void 0,e):So.get(n,e&at.Optional?null:void 0,e)}function fe(n,e=at.Default){return(function th(){return Du}()||lh)(Q(n),e)}function yt(n,e=at.Default){return fe(n,Ql(e))}function Ql(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Yl(n){const e=[];for(let t=0;t<n.length;t++){const r=Q(n[t]);if(Array.isArray(r)){if(0===r.length)throw new Y(900,!1);let i,s=at.Default;for(let o=0;o<r.length;o++){const a=r[o],u=$v(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(fe(i,s))}else e.push(fe(r))}return e}function wa(n,e){return n[oh]=e,n.prototype[oh]=e,n}function $v(n){return n[oh]}function xr(n){return{toString:n}.toString()}var Pu=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Pu||{}),Or=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Or||{});const Yi={},ht=[],Jl=tt({\u0275cmp:tt}),Ru=tt({\u0275dir:tt}),ch=tt({\u0275pipe:tt}),Xl=tt({\u0275mod:tt}),Is=tt({\u0275fac:tt}),Po=tt({__NG_ELEMENT_ID__:tt}),Mu=tt({__NG_ENV_ID__:tt});function Zl(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function dh(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];og(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function ec(n){return 3===n||4===n||6===n}function og(n){return 64===n.charCodeAt(0)}function Ro(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||ag(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function ag(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const tc="ng-template";function zv(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==Zl(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function nc(n){return 4===n.type&&n.value!==tc}function qv(n,e,t){return e===(4!==n.type||t?n.value:tc)}function hh(n,e,t){let r=4;const i=n.attrs||[],s=function ph(n){for(let e=0;e<n.length;e++)if(ec(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!qv(n,u,t)||""===u&&1===e.length){if(Ni(r))return!1;o=!0}}else{const d=8&r?u:e[++a];if(8&r&&null!==n.attrs){if(!zv(n.attrs,d,t)){if(Ni(r))return!1;o=!0}continue}const m=fh(8&r?"class":u,i,nc(n),t);if(-1===m){if(Ni(r))return!1;o=!0;continue}if(""!==d){let v;v=m>s?"":i[m+1].toLowerCase();const T=8&r?v:null;if(T&&-1!==Zl(T,d,0)||2&r&&d!==v){if(Ni(r))return!1;o=!0}}}}else{if(!o&&!Ni(r)&&!Ni(u))return!1;if(o&&Ni(u))continue;o=!1,r=u|1&r}}return Ni(r)||o}function Ni(n){return 0==(1&n)}function fh(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function Gv(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Ta(n,e,t=!1){for(let r=0;r<e.length;r++)if(hh(n,e[r],t))return!0;return!1}function ug(n,e){return n?":not("+e.trim()+")":e}function gh(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Ni(o)&&(e+=ug(s,i),i=""),r=o,s=s||!Ni(r);t++}return""!==i&&(e+=ug(s,i)),e}function ba(n){return xr(()=>{const e=cg(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Pu.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Or.Emulated,styles:n.styles||ht,_:null,schemas:n.schemas||null,tView:null,id:""};dg(t);const r=n.dependencies;return t.directiveDefs=rc(r,!1),t.pipeDefs=rc(r,!0),t.id=function Aa(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function Kv(n){return vt(n)||On(n)}function Qv(n){return null!==n}function Wn(n){return xr(()=>({type:n.type,bootstrap:n.bootstrap||ht,declarations:n.declarations||ht,imports:n.imports||ht,exports:n.exports||ht,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function lg(n,e){if(null==n)return Yi;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function qe(n){return xr(()=>{const e=cg(n);return dg(e),e})}function xn(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function vt(n){return n[Jl]||null}function On(n){return n[Ru]||null}function nn(n){return n[ch]||null}function cg(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Yi,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||ht,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:lg(n.inputs,e),outputs:lg(n.outputs)}}function dg(n){n.features?.forEach(e=>e(n))}function rc(n,e){if(!n)return null;const t=e?nn:Kv;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(Qv)}const pn=0,we=1,Je=2,Ht=3,Kr=4,vr=5,ir=6,Da=7,rn=8,xi=9,No=10,He=11,Nu=12,ic=13,$s=14,sn=15,Hs=16,zs=17,Oi=18,xo=19,yh=20,Zi=21,pi=22,Oo=23,Ca=24,st=25,xu=1,hg=2,gi=7,qs=9,kn=11;function sr(n){return Array.isArray(n)&&"object"==typeof n[xu]}function or(n){return Array.isArray(n)&&!0===n[xu]}function Ou(n){return 0!=(4&n.flags)}function ko(n){return n.componentOffset>-1}function Sa(n){return 1==(1&n.flags)}function ki(n){return!!n.template}function ku(n){return 0!=(512&n[Je])}function Fo(n,e){return n.hasOwnProperty(Is)?n[Is]:null}let ar=null,ac=!1;function Qr(n){const e=ar;return ar=n,e}const uc={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Vo(n){if(!Lo(n)||n.dirty){if(!n.producerMustRecompute(n)&&!Ag(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function bg(n){n.dirty=!0,function Ih(n){if(void 0===n.liveConsumerNode)return;const e=ac;ac=!0;try{for(const t of n.liveConsumerNode)t.dirty||bg(t)}finally{ac=e}}(n),n.consumerMarkedDirty?.(n)}function Th(n){return n&&(n.nextProducerIndex=0),Qr(n)}function bh(n,e){if(Qr(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Lo(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Ah(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Ag(n){Pa(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Vo(t),r!==t.version))return!0}return!1}function tE(n){if(Pa(n),Lo(n))for(let e=0;e<n.producerNode.length;e++)Ah(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Ah(n,e){if(function Dg(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Pa(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)Ah(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Pa(i),i.producerIndexOfThis[r]=e}}function Lo(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Pa(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let lc=null;const Rg=()=>{},iE=(()=>({...uc,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:Rg}))();class Mg{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function ts(){return cc}function cc(n){return n.type.prototype.ngOnChanges&&(n.setInput=oE),sE}function sE(){const n=Ng(this),e=n?.current;if(e){const t=n.previous;if(t===Yi)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function oE(n,e,t,r){const i=this.declaredInputs[t],s=Ng(n)||function An(n,e){return n[Ra]=e}(n,{previous:Yi,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new Mg(u&&u.currentValue,e,a===Yi),n[r]=e}ts.ngInherit=!0;const Ra="__ngSimpleChanges__";function Ng(n){return n[Ra]||null}const ns=function(n,e,t){};function Bt(n){for(;Array.isArray(n);)n=n[pn];return n}function fc(n,e){return Bt(e[n])}function ur(n,e){return Bt(e[n.index])}function Ma(n,e){return n.data[e]}function As(n,e){return n[e]}function Yr(n,e){const t=e[n];return sr(t)?t:t[pn]}function Gs(n,e){return null==e?null:n[e]}function pc(n){n[zs]=0}function Fg(n){1024&n[Je]||(n[Je]|=1024,Lg(n,1))}function Vg(n){1024&n[Je]&&(n[Je]&=-1025,Lg(n,-1))}function Lg(n,e){let t=n[Ht];if(null===t)return;t[vr]+=e;let r=t;for(t=t[Ht];null!==t&&(1===e&&1===r[vr]||-1===e&&0===r[vr]);)t[vr]+=e,r=t,t=t[Ht]}const je={lFrame:vc(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function jg(){return je.bindingsEnabled}function oe(){return je.lFrame.lView}function lt(){return je.lFrame.tView}function Er(n){return je.lFrame.contextLView=n,n[rn]}function Ir(n){return je.lFrame.contextLView=null,n}function lr(){let n=mc();for(;null!==n&&64===n.type;)n=n.parent;return n}function mc(){return je.lFrame.currentTNode}function mi(n,e){const t=je.lFrame;t.currentTNode=n,t.isParent=e}function kh(){return je.lFrame.isParent}function Lu(){je.lFrame.isParent=!1}function cr(){const n=je.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function xa(){return je.lFrame.bindingIndex++}function Sr(n){const e=je.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function gE(n,e){const t=je.lFrame;t.bindingIndex=t.bindingRootIndex=n,Uu(e)}function Uu(n){je.lFrame.currentDirectiveIndex=n}function zg(){return je.lFrame.currentQueryIndex}function Vh(n){je.lFrame.currentQueryIndex=n}function Lh(n){const e=n[we];return 2===e.type?e.declTNode:1===e.type?n[ir]:null}function qg(n,e,t){if(t&at.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&at.Host||(i=Lh(s),null===i||(s=s[$s],10&i.type))););if(null===i)return!1;e=i,n=s}const r=je.lFrame=Gg();return r.currentTNode=e,r.lView=n,!0}function ju(n){const e=Gg(),t=n[we];je.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Gg(){const n=je.lFrame,e=null===n?null:n.child;return null===e?vc(n):e}function vc(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Ec(){const n=je.lFrame;return je.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Wg=Ec;function Bo(){const n=Ec();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function dr(){return je.lFrame.selectedIndex}function Cs(n){je.lFrame.selectedIndex=n}function zt(){const n=je.lFrame;return Ma(n.tView,n.selectedIndex)}let Xg=!0;function Oa(){return Xg}function Ws(n){Xg=n}function ka(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:g}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),null!=g&&(n.destroyHooks??=[]).push(t,g)}}function Ic(n,e,t){Zg(n,e,3,t)}function wc(n,e,t,r){(3&n[Je])===t&&Zg(n,e,t,r)}function $u(n,e){let t=n[Je];(3&t)===e&&(t&=8191,t+=1,n[Je]=t)}function Zg(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&n[zs]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(n[zs]+=65536),(a<s||-1==s)&&(Bh(n,t,e,u),n[zs]=(4294901760&n[zs])+u+2),u++}function Tc(n,e){ns(4,n,e);const t=Qr(null);try{e.call(n)}finally{Qr(t),ns(5,n,e)}}function Bh(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[Je]>>13<n[zs]>>16&&(3&n[Je])===e&&(n[Je]+=8192,Tc(a,s)):Tc(a,s)}const Ks=-1;class Fa{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function jh(n){return n!==Ks}function Hu(n){return 32767&n}function Uo(n,e){let t=function bE(n){return n>>16}(n),r=e;for(;t>0;)r=r[$s],t--;return r}let $h=!0;function Ac(n){const e=$h;return $h=n,e}const nm=255,zu=5;let DE=0;const rs={};function Dc(n,e){const t=rm(n,e);if(-1!==t)return t;const r=e[we];r.firstCreatePass&&(n.injectorIndex=e.length,Hh(r.data,n),Hh(e,null),Hh(r.blueprint,null));const i=Cc(n,e),s=n.injectorIndex;if(jh(i)){const o=Hu(i),a=Uo(i,e),u=a[we].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|u[o+d]}return e[s+8]=i,s}function Hh(n,e){n.push(0,0,0,0,0,0,0,0,e)}function rm(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Cc(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=Kh(i),null===r)return Ks;if(t++,i=i[$s],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return Ks}function zh(n,e,t){!function CE(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Po)&&(r=t[Po]),null==r&&(r=t[Po]=DE++);const i=r&nm;e.data[n+(i>>zu)]|=1<<i}(n,e,t)}function im(n,e,t){if(t&at.Optional||void 0!==n)return n;Co()}function sm(n,e,t,r){if(t&at.Optional&&void 0===r&&(r=null),!(t&(at.Self|at.Host))){const i=n[xi],s=Cr(void 0);try{return i?i.get(e,r,t&at.Optional):Cu(e,r,t&at.Optional)}finally{Cr(s)}}return im(r,0,t)}function om(n,e,t,r=at.Default,i){if(null!==n){if(2048&e[Je]&&!(r&at.Self)){const o=function cm(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[Je]&&!(512&o[Je]);){const a=am(s,o,t,r|at.Self,rs);if(a!==rs)return a;let u=s.parent;if(!u){const d=o[yh];if(d){const g=d.get(t,rs,r);if(g!==rs)return g}u=Kh(o),o=o[$s]}s=u}return i}(n,e,t,r,rs);if(o!==rs)return o}const s=am(n,e,t,r,rs);if(s!==rs)return s}return sm(e,t,r,i)}function am(n,e,t,r,i){const s=function PE(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Po)?n[Po]:void 0;return"number"==typeof e?e>=0?e&nm:RE:e}(t);if("function"==typeof s){if(!qg(e,n,r))return r&at.Host?im(i,0,r):sm(e,t,r,i);try{let o;if(o=s(r),null!=o||r&at.Optional)return o;Co()}finally{Wg()}}else if("number"==typeof s){let o=null,a=rm(n,e),u=Ks,d=r&at.Host?e[sn][ir]:null;for((-1===a||r&at.SkipSelf)&&(u=-1===a?Cc(n,e):e[a+8],u!==Ks&&lm(r,!1)?(o=e[we],a=Hu(u),e=Uo(u,e)):a=-1);-1!==a;){const g=e[we];if(um(s,a,g.data)){const m=SE(a,e,t,o,r,d);if(m!==rs)return m}u=e[a+8],u!==Ks&&lm(r,e[we].data[a+8]===d)&&um(s,a,e)?(o=g,a=Hu(u),e=Uo(u,e)):a=-1}}return i}function SE(n,e,t,r,i,s){const o=e[we],a=o.data[n+8],g=qu(a,o,t,null==r?ko(a)&&$h:r!=o&&0!=(3&a.type),i&at.Host&&s===a);return null!==g?jo(e,o,g,a):rs}function qu(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,u=n.directiveStart,g=s>>20,v=i?a+g:n.directiveEnd;for(let T=r?a:a+g;T<v;T++){const D=o[T];if(T<u&&t===D||T>=u&&D.type===t)return T}if(i){const T=o[u];if(T&&ki(T)&&T.type===t)return u}return null}function jo(n,e,t,r){let i=n[t];const s=e.data;if(function Uh(n){return n instanceof Fa}(i)){const o=i;o.resolving&&function jl(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Y(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Ke(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ae(n)}(s[t]));const a=Ac(o.canSeeViewProviders);o.resolving=!0;const d=o.injectImpl?Cr(o.injectImpl):null;qg(n,r,at.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function EE(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=cc(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==d&&Cr(d),Ac(a),o.resolving=!1,Wg()}}return i}function um(n,e,t){return!!(t[e+(n>>zu)]&1<<n)}function lm(n,e){return!(n&at.Self||n&at.Host&&e)}class hr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return om(this._tNode,this._lView,e,Ql(r),t)}}function RE(){return new hr(lr(),oe())}function Wh(n){return ge(n)?()=>{const e=Wh(Q(n));return e&&e()}:Fo(n)}function Kh(n){const e=n[we],t=e.type;return 2===t?e.declTNode:1===t?n[ir]:null}const Ku="__parameters__";function $o(n,e,t){return xr(()=>{const r=function La(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,d,g){const m=u.hasOwnProperty(Ku)?u[Ku]:Object.defineProperty(u,Ku,{value:[]})[Ku];for(;m.length<=g;)m.push(null);return(m[g]=m[g]||[]).push(o),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function M(n,e){n.forEach(t=>Array.isArray(t)?M(t,e):e(t))}function j(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ne(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function qt(n,e,t){let r=wr(n,e);return r>=0?n[1|r]=t:(r=~r,function ft(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Jr(n,e){const t=wr(n,e);if(t>=0)return n[1|t]}function wr(n,e){return function Yh(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const is=wa($o("Optional"),8),FE=wa($o("SkipSelf"),4);function ym(n){return 128==(128&n.flags)}var Ba=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ba||{});const rB=/^>|^->|<!--|-->|--!>|<!-$/g,iB=/(<|>)/g,sB="\u200b$1\u200b";const UE=new Map;let oB=0;const $E="__ngContext__";function kr(n,e){sr(e)?(n[$E]=e[xo],function uB(n){UE.set(n[xo],n)}(e)):n[$E]=e}let HE;function zE(n,e){return HE(n,e)}function tf(n){const e=n[Ht];return or(e)?e[Ht]:e}function hC(n){return pC(n[Nu])}function fC(n){return pC(n[Kr])}function pC(n){for(;null!==n&&!or(n);)n=n[Kr];return n}function Mc(n,e,t,r,i){if(null!=r){let s,o=!1;or(r)?s=r:sr(r)&&(o=!0,r=r[pn]);const a=Bt(r);0===n&&null!==t?null==i?yC(e,t,a):Ju(e,t,a,i||null,!0):1===n&&null!==t?Ju(e,t,a,i||null,!0):2===n?function Am(n,e,t){const r=Tm(n,e);r&&function CB(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function RB(n,e,t,r,i){const s=t[gi];s!==Bt(t)&&Mc(e,n,r,s,i);for(let a=kn;a<t.length;a++){const u=t[a];rf(u[we],u,n,e,r,s)}}(e,n,s,t,i)}}function qE(n,e){return n.createComment(function iC(n){return n.replace(rB,e=>e.replace(iB,sB))}(e))}function Im(n,e,t){return n.createElement(e,t)}function mC(n,e){const t=n[qs],r=t.indexOf(e);Vg(e),t.splice(r,1)}function wm(n,e){if(n.length<=kn)return;const t=kn+e,r=n[t];if(r){const i=r[Hs];null!==i&&i!==n&&mC(i,r),e>0&&(n[t-1][Kr]=r[Kr]);const s=ne(n,kn+e);!function vB(n,e){rf(n,e,e[He],2,null,null),e[pn]=null,e[ir]=null}(r[we],r);const o=s[Oi];null!==o&&o.detachView(s[we]),r[Ht]=null,r[Kr]=null,r[Je]&=-129}return r}function GE(n,e){if(!(256&e[Je])){const t=e[He];e[Oo]&&tE(e[Oo]),e[Ca]&&tE(e[Ca]),t.destroyNode&&rf(n,e,t,3,null,null),function wB(n){let e=n[Nu];if(!e)return WE(n[we],n);for(;e;){let t=null;if(sr(e))t=e[Nu];else{const r=e[kn];r&&(t=r)}if(!t){for(;e&&!e[Kr]&&e!==n;)sr(e)&&WE(e[we],e),e=e[Ht];null===e&&(e=n),sr(e)&&WE(e[we],e),t=e&&e[Kr]}e=t}}(e)}}function WE(n,e){if(!(256&e[Je])){e[Je]&=-129,e[Je]|=256,function DB(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Fa)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];ns(4,a,u);try{u.call(a)}finally{ns(5,a,u)}}else{ns(4,i,s);try{s.call(i)}finally{ns(5,i,s)}}}}}(n,e),function AB(n,e){const t=n.cleanup,r=e[Da];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[Da]=null);const i=e[Zi];if(null!==i){e[Zi]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[we].type&&e[He].destroy();const t=e[Hs];if(null!==t&&or(e[Ht])){t!==e[Ht]&&mC(t,e);const r=e[Oi];null!==r&&r.detachView(n)}!function lB(n){UE.delete(n[xo])}(e)}}function KE(n,e,t){return function _C(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[pn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===Or.None||s===Or.Emulated)return null}return ur(r,t)}}(n,e.parent,t)}function Ju(n,e,t,r,i){n.insertBefore(e,t,r,i)}function yC(n,e,t){n.appendChild(e,t)}function vC(n,e,t,r,i){null!==r?Ju(n,e,t,r,i):yC(n,e,t)}function Tm(n,e){return n.parentNode(e)}let QE,Dm,ZE,Cm,wC=function IC(n,e,t){return 40&n.type?ur(n,t):null};function bm(n,e,t,r){const i=KE(n,r,e),s=e[He],a=function EC(n,e,t){return wC(n,e,t)}(r.parent||e[ir],r,e);if(null!=i)if(Array.isArray(t))for(let u=0;u<t.length;u++)vC(s,i,t[u],a,!1);else vC(s,i,t,a,!1);void 0!==QE&&QE(s,r,e,t,i)}function nf(n,e){if(null!==e){const t=e.type;if(3&t)return ur(e,n);if(4&t)return YE(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return nf(n,r);{const i=n[e.index];return or(i)?YE(-1,i):Bt(i)}}if(32&t)return zE(e,n)()||Bt(n[e.index]);{const r=bC(n,e);return null!==r?Array.isArray(r)?r[0]:nf(tf(n[sn]),r):nf(n,e.next)}}return null}function bC(n,e){return null!==e?n[sn][ir].projection[e.projection]:null}function YE(n,e){const t=kn+n+1;if(t<e.length){const r=e[t],i=r[we].firstChild;if(null!==i)return nf(r,i)}return e[gi]}function JE(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],u=t.type;if(o&&0===e&&(a&&kr(Bt(a),r),t.flags|=2),32!=(32&t.flags))if(8&u)JE(n,e,t.child,r,i,s,!1),Mc(e,n,i,a,s);else if(32&u){const d=zE(t,r);let g;for(;g=d();)Mc(e,n,i,g,s);Mc(e,n,i,a,s)}else 16&u?DC(n,e,r,t,i,s):Mc(e,n,i,a,s);t=o?t.projectionNext:t.next}}function rf(n,e,t,r,i,s){JE(t,r,n.firstChild,e,i,s,!1)}function DC(n,e,t,r,i,s){const o=t[sn],u=o[ir].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++)Mc(e,n,i,u[d],s);else{let d=u;const g=o[Ht];ym(r)&&(d.flags|=128),JE(n,e,d,g,i,s,!0)}}function CC(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function SC(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&dh(n,e,r),null!==i&&CC(n,e,i),null!==s&&function NB(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function Nc(n){return function XE(){if(void 0===Dm&&(Dm=null,Lt.trustedTypes))try{Dm=Lt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Dm}()?.createHTML(n)||n}function xc(){if(void 0!==ZE)return ZE;if(typeof document<"u")return document;throw new Y(210,!1)}function PC(n){return function eI(){if(void 0===Cm&&(Cm=null,Lt.trustedTypes))try{Cm=Lt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Cm}()?.createHTML(n)||n}class Xu{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Et})`}}class VB extends Xu{getTypeName(){return"HTML"}}class LB extends Xu{getTypeName(){return"Style"}}class BB extends Xu{getTypeName(){return"Script"}}class UB extends Xu{getTypeName(){return"URL"}}class jB extends Xu{getTypeName(){return"ResourceURL"}}function Fi(n){return n instanceof Xu?n.changingThisBreaksApplicationSecurity:n}function Ys(n,e){const t=function $B(n){return n instanceof Xu&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Et})`)}return t===e}class KB{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Nc(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class QB{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=Nc(e),t}}const JB=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Sm(n){return(n=String(n)).match(JB)?n:"unsafe:"+n}function zo(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function sf(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const xC=zo("area,br,col,hr,img,wbr"),OC=zo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),kC=zo("rp,rt"),tI=sf(xC,sf(OC,zo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),sf(kC,zo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),sf(kC,OC)),nI=zo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),FC=sf(nI,zo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),zo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),XB=zo("script,style,template");class ZB{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!tI.hasOwnProperty(t))return this.sanitizedSomething=!0,!XB.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!FC.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=s.value;nI[a]&&(u=Sm(u)),this.buf.push(" ",o,'="',VC(u),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();tI.hasOwnProperty(t)&&!xC.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(VC(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const eU=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,tU=/([^\#-~ |!])/g;function VC(n){return n.replace(/&/g,"&amp;").replace(eU,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(tU,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Pm;function LC(n,e){let t=null;try{Pm=Pm||function NC(n){const e=new QB(n);return function YB(){try{return!!(new window.DOMParser).parseFromString(Nc(""),"text/html")}catch{return!1}}()?new KB(e):e}(n);let r=e?String(e):"";t=Pm.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=Pm.getInertBodyElement(r)}while(r!==s);return Nc((new ZB).sanitizeChildren(rI(t)||t))}finally{if(t){const r=rI(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function rI(n){return"content"in n&&function nU(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var ss=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(ss||{});function BC(n){const e=function af(){const n=oe();return n&&n[No].sanitizer}();return e?PC(e.sanitize(ss.HTML,n)||""):Ys(n,"HTML")?PC(Fi(n)):LC(xc(),Ae(n))}const Rm=new Ie("ENVIRONMENT_INITIALIZER"),$C=new Ie("INJECTOR",-1),HC=new Ie("INJECTOR_DEF_TYPES");class iI{get(e,t=Su){if(t===Su){const r=new Error(`NullInjectorError: No provider for ${I(e)}!`);throw r.name="NullInjectorError",r}return t}}function lU(...n){return{\u0275providers:zC(0,n),\u0275fromNgModule:!0}}function zC(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return M(e,o=>{const a=o;Mm(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&qC(i,s),t}function qC(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];oI(i,s=>{e(s,r)})}}function Mm(n,e,t,r){if(!(n=Q(n)))return!1;let i=null,s=Es(n);const o=!s&&vt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const u=n.ngModule;if(s=Es(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const d of u)Mm(d,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let d;r.add(i);try{M(s.imports,g=>{Mm(g,e,t,r)&&(d||=[],d.push(g))})}finally{}void 0!==d&&qC(d,e)}if(!a){const d=Fo(i)||(()=>new i);e({provide:i,useFactory:d,deps:ht},i),e({provide:HC,useValue:i,multi:!0},i),e({provide:Rm,useValue:()=>fe(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const d=n;oI(u,g=>{e(g,d)})}}}return i!==n&&void 0!==n.providers}function oI(n,e){for(let t of n)Oe(t)&&(t=t.\u0275providers),Array.isArray(t)?oI(t,e):e(t)}const cU=tt({provide:String,useValue:tt});function aI(n){return null!==n&&"object"==typeof n&&cU in n}function Zu(n){return"function"==typeof n}const uI=new Ie("Set Injector scope."),Nm={},hU={};let lI;function xm(){return void 0===lI&&(lI=new iI),lI}class Js{}class Oc extends Js{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,dI(e,o=>this.processProvider(o)),this.records.set($C,kc(void 0,this)),i.has("environment")&&this.records.set(Js,kc(void 0,this));const s=this.records.get(uI);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(HC.multi,ht,at.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=fi(this),r=Cr(void 0);try{return e()}finally{fi(t),Cr(r)}}get(e,t=Su,r=at.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Mu))return e[Mu](this);r=Ql(r);const s=fi(this),o=Cr(void 0);try{if(!(r&at.SkipSelf)){let u=this.records.get(e);if(void 0===u){const d=function _U(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ie}(e)&&Wr(e);u=d&&this.injectableDefInScope(d)?kc(cI(e),Nm):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&at.Self?xm():this.parent).get(e,t=r&at.Optional&&t===Su?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Wl]=a[Wl]||[]).unshift(I(e)),s)throw a;return function sg(n,e,t,r){const i=n[Wl];throw e[ah]&&i.unshift(e[ah]),n.message=function Hv(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=I(e);if(Array.isArray(e))i=e.map(I).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):I(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Uv,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Wl]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Cr(o),fi(s)}}resolveInjectorInitializers(){const e=fi(this),t=Cr(void 0);try{const i=this.get(Rm.multi,ht,at.Self);for(const s of i)s()}finally{fi(e),Cr(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(I(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Y(205,!1)}processProvider(e){let t=Zu(e=Q(e))?e:Q(e&&e.provide);const r=function pU(n){return aI(n)?kc(void 0,n.useValue):kc(KC(n),Nm)}(e);if(Zu(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=kc(void 0,Nm,!0),i.factory=()=>Yl(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===Nm&&(t.value=hU,t.value=t.factory()),"object"==typeof t.value&&t.value&&function mU(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Q(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function cI(n){const e=Wr(n),t=null!==e?e.factory:Fo(n);if(null!==t)return t;if(n instanceof Ie)throw new Y(204,!1);if(n instanceof Function)return function fU(n){const e=n.length;if(e>0)throw function se(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new Y(204,!1);const t=function bu(n){return n&&(n[Au]||n[eh])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Y(204,!1)}function KC(n,e,t){let r;if(Zu(n)){const i=Q(n);return Fo(i)||cI(i)}if(aI(n))r=()=>Q(n.useValue);else if(function WC(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Yl(n.deps||[]));else if(function GC(n){return!(!n||!n.useExisting)}(n))r=()=>fe(Q(n.useExisting));else{const i=Q(n&&(n.useClass||n.provide));if(!function gU(n){return!!n.deps}(n))return Fo(i)||cI(i);r=()=>new i(...Yl(n.deps))}return r}function kc(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function dI(n,e){for(const t of n)Array.isArray(t)?dI(t,e):t&&Oe(t)?dI(t.\u0275providers,e):e(t)}const Om=new Ie("AppId",{providedIn:"root",factory:()=>yU}),yU="ng",QC=new Ie("Platform Initializer"),Ss=new Ie("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),YC=new Ie("AnimationModuleType"),JC=new Ie("CSP nonce",{providedIn:"root",factory:()=>xc().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let XC=(n,e,t)=>null;function vI(n,e,t=!1){return XC(n,e,t)}class SU{}class tS{}class RU{resolveComponentFactory(e){throw function PU(n){const e=Error(`No component factory found for ${I(n)}.`);return e.ngComponent=n,e}(e)}}let Um=(()=>{class n{static{this.NULL=new RU}}return n})();function MU(){return Lc(lr(),oe())}function Lc(n,e){return new Ps(ur(n,e))}let Ps=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=MU}}return n})();function NU(n){return n instanceof Ps?n.nativeElement:n}class cf{}let el=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function xU(){const n=oe(),t=Yr(lr().index,n);return(sr(t)?t:n)[He]}()}}return n})(),OU=(()=>{class n{static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:()=>null})}}return n})();class df{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const wI=new df("16.2.12"),TI={};function oS(n,e=null,t=null,r){const i=aS(n,e,t,r);return i.resolveInjectorInitializers(),i}function aS(n,e=null,t=null,r,i=new Set){const s=[t||ht,lU(n)];return r=r||("object"==typeof n?void 0:I(n)),new Oc(s,e||xm(),r||null,i)}let yi=(()=>{class n{static{this.THROW_IF_NOT_FOUND=Su}static{this.NULL=new iI}static create(t,r){if(Array.isArray(t))return oS({name:""},r,t,"");{const i=t.name??"";return oS({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=Ue({token:n,providedIn:"any",factory:()=>fe($C)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();function AI(n){return n.ngOriginalError}class qo{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&AI(e);for(;t&&AI(t);)t=AI(t);return t||null}}function DI(n){return e=>{setTimeout(n,void 0,e)}}const Fn=class $U extends Nn{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=DI(s),i&&(i=DI(i)),o&&(o=DI(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof ee&&e.add(a),a}};function lS(...n){}class Nt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fn(!1),this.onMicrotaskEmpty=new Fn(!1),this.onStable=new Fn(!1),this.onError=new Fn(!1),typeof Zone>"u")throw new Y(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function HU(){const n="function"==typeof Lt.requestAnimationFrame;let e=Lt[n?"requestAnimationFrame":"setTimeout"],t=Lt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function GU(n){const e=()=>{!function qU(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Lt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,SI(n),n.isCheckStableRunning=!0,CI(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),SI(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function KU(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return cS(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),dS(n)}},onInvoke:(t,r,i,s,o,a,u)=>{try{return cS(n),t.invoke(i,s,o,a,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),dS(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,SI(n),CI(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Nt.isInAngularZone())throw new Y(909,!1)}static assertNotInAngularZone(){if(Nt.isInAngularZone())throw new Y(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,zU,lS,lS);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const zU={};function CI(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function SI(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function cS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function dS(n){n._nesting--,CI(n)}class WU{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fn,this.onMicrotaskEmpty=new Fn,this.onStable=new Fn,this.onError=new Fn}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const hS=new Ie("",{providedIn:"root",factory:fS});function fS(){const n=yt(Nt);let e=!0;return Yt(new rt(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new rt(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{Nt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{Nt.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(Qi()))}let PI=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:()=>new n})}}return n})();function hf(n){for(;n;){n[Je]|=64;const e=tf(n);if(ku(n)&&!e)return n;n=e}return null}const yS=new Ie("",{providedIn:"root",factory:()=>!1});let Hm=null;function wS(n,e){return n[e]??AS()}function TS(n,e){const t=AS();t.producerNode?.length&&(n[e]=Hm,t.lView=n,Hm=bS())}const ij={...uc,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{hf(n.lView)},lView:null};function bS(){return Object.create(ij)}function AS(){return Hm??=bS(),Hm}const Xe={};function Ze(n){DS(lt(),oe(),dr()+n,!1)}function DS(n,e,t,r){if(!r)if(3==(3&e[Je])){const s=n.preOrderCheckHooks;null!==s&&Ic(e,s,t)}else{const s=n.preOrderHooks;null!==s&&wc(e,s,0,t)}Cs(t)}function de(n,e=at.Default){const t=oe();return null===t?fe(n,e):om(lr(),t,Q(n),e)}function zm(n,e,t,r,i,s,o,a,u,d,g){const m=e.blueprint.slice();return m[pn]=i,m[Je]=140|r,(null!==d||n&&2048&n[Je])&&(m[Je]|=2048),pc(m),m[Ht]=m[$s]=n,m[rn]=t,m[No]=o||n&&n[No],m[He]=a||n&&n[He],m[xi]=u||n&&n[xi]||null,m[ir]=s,m[xo]=function aB(){return oB++}(),m[pi]=g,m[yh]=d,m[sn]=2==e.type?n[sn]:m,m}function jc(n,e,t,r,i){let s=n.data[e];if(null===s)s=function RI(n,e,t,r,i){const s=mc(),o=kh(),u=n.data[e]=function fj(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function Na(){return null!==je.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(n,e,t,r,i),function Fh(){return je.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function Vu(){const n=je.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return mi(s,!0),s}function ff(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function CS(n,e,t,r,i){const s=wS(e,Oo),o=dr(),a=2&r;try{Cs(-1),a&&e.length>st&&DS(n,e,st,!1),ns(a?2:0,i);const d=a?s:null,g=Th(d);try{null!==d&&(d.dirty=!1),t(r,i)}finally{bh(d,g)}}finally{a&&null===e[Oo]&&TS(e,Oo),Cs(o),ns(a?3:1,i)}}function MI(n,e,t){if(Ou(e)){const r=Qr(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{Qr(r)}}}function NI(n,e,t){jg()&&(function Ej(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;ko(t)&&function Cj(n,e,t){const r=ur(e,n),i=SS(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=qm(n,zm(n,i,null,o,r,e,null,n[No].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Dc(t,e),kr(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const u=n.data[a],d=jo(e,n,a,t);kr(d,e),null!==o&&Sj(0,a-i,d,u,0,o),ki(u)&&(Yr(t.index,e)[rn]=jo(e,n,a,t))}}(n,e,t,ur(t,e)),64==(64&t.flags)&&xS(n,e,t))}function xI(n,e,t=ur){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function SS(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=OI(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function OI(n,e,t,r,i,s,o,a,u,d,g){const m=st+r,v=m+i,T=function aj(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:Xe);return t}(m,v),D="function"==typeof d?d():d;return T[we]={type:n,blueprint:T,template:t,queries:null,viewQuery:a,declTNode:e,data:T.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:D,incompleteFirstPass:!1,ssrId:g}}let PS=n=>null;function RS(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?MS(t,e,i,s):r.hasOwnProperty(i)&&MS(t,e,r[i],s)}return t}function MS(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function kI(n,e,t,r){if(jg()){const i=null===r?null:{"":-1},s=function wj(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(Ta(e,o.selectors,!1))if(r||(r=[]),ki(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),FI(n,e,a.length)}else r.unshift(o),FI(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&NS(n,e,t,o,i,a),i&&function Tj(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new Y(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=Ro(t.mergedAttrs,t.attrs)}function NS(n,e,t,r,i,s){for(let d=0;d<r.length;d++)zh(Dc(t,e),n,r[d].type);!function Aj(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let d=0;d<r.length;d++){const g=r[d];g.providersResolver&&g.providersResolver(g)}let o=!1,a=!1,u=ff(n,e,r.length,null);for(let d=0;d<r.length;d++){const g=r[d];t.mergedAttrs=Ro(t.mergedAttrs,g.hostAttrs),Dj(n,t,e,u,g),bj(u,g,i),null!==g.contentQueries&&(t.flags|=4),(null!==g.hostBindings||null!==g.hostAttrs||0!==g.hostVars)&&(t.flags|=64);const m=g.type.prototype;!o&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}!function pj(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let u=null,d=null;for(let g=e.directiveStart;g<i;g++){const m=s[g],v=t?t.get(m):null,D=v?v.outputs:null;u=RS(m.inputs,g,u,v?v.inputs:null),d=RS(m.outputs,g,d,D);const S=null===u||null===o||nc(e)?null:Pj(u,g,o);a.push(S)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=d}(n,t,s)}function xS(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function mE(){return je.lFrame.currentDirectiveIndex}();try{Cs(s);for(let a=r;a<i;a++){const u=n.data[a],d=e[a];Uu(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&Ij(u,d)}}finally{Cs(-1),Uu(o)}}function Ij(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function FI(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function bj(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ki(e)&&(t[""]=n)}}function Dj(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=Fo(i.type)),o=new Fa(s,ki(i),de);n.blueprint[r]=o,t[r]=o,function yj(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function vj(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,ff(n,t,i.hostVars,Xe),i)}function Xs(n,e,t,r,i,s){const o=ur(n,e);!function VI(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?Ae(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[He],o,s,n.value,t,r,i)}function Sj(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)OS(r,t,o[a++],o[a++],o[a++])}function OS(n,e,t,r,i){const s=Qr(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{Qr(s)}}function Pj(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function kS(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function FS(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];Vh(t[r]),o.contentQueries(2,e[s],s)}}}function qm(n,e){return n[Nu]?n[ic][Kr]=e:n[Nu]=e,n[ic]=e,e}function LI(n,e,t){Vh(0);const r=Qr(null);try{e(n,t)}finally{Qr(r)}}function VS(n){return n[Da]||(n[Da]=[])}function LS(n){return n.cleanup||(n.cleanup=[])}function US(n,e){const t=n[xi],r=t?t.get(qo,null):null;r&&r.handleError(e)}function BI(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];OS(n.data[o],e[o],r,a,i)}}function Wo(n,e,t){const r=fc(e,n);!function gC(n,e,t){n.setValue(e,t)}(n[He],r,t)}function Rj(n,e){const t=Yr(e,n),r=t[we];!function Mj(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[pn];null!==i&&null===t[pi]&&(t[pi]=vI(i,t[xi])),UI(r,t,t[rn])}function UI(n,e,t){ju(e);try{const r=n.viewQuery;null!==r&&LI(1,r,t);const i=n.template;null!==i&&CS(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&FS(n,e),n.staticViewQueries&&LI(2,n.viewQuery,t);const s=n.components;null!==s&&function Nj(n,e){for(let t=0;t<e.length;t++)Rj(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Je]&=-5,Bo()}}let jS=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function Pg(n,e,t){const r=Object.create(iE);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>bg(r),run:()=>{if(r.dirty=!1,r.hasRun&&!Ag(r))return;r.hasRun=!0;const o=Th(r);try{r.cleanupFn(),r.cleanupFn=Rg,r.fn(i)}finally{bh(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,d=>{this.all.has(d)&&this.queue.set(d,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:()=>new n})}}return n})();function Gm(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=b(i,a):2==s&&(r=b(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function pf(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(Bt(s)),or(s)&&$S(s,r);const o=t.type;if(8&o)pf(n,e,t.child,r);else if(32&o){const a=zE(t,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=bC(e,t);if(Array.isArray(a))r.push(...a);else{const u=tf(e[sn]);pf(u[we],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function $S(n,e){for(let t=kn;t<n.length;t++){const r=n[t],i=r[we].firstChild;null!==i&&pf(r[we],r,i,e)}n[gi]!==n[pn]&&e.push(n[gi])}function Wm(n,e,t,r=!0){const i=e[No],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{HS(n,e,n.template,t)}catch(u){throw r&&US(e,u),u}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function HS(n,e,t,r){const i=e[Je];if(256!=(256&i)){e[No].effectManager?.flush(),ju(e);try{pc(e),function _c(n){return je.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&CS(n,e,t,2,r);const o=3==(3&i);if(o){const d=n.preOrderCheckHooks;null!==d&&Ic(e,d,null)}else{const d=n.preOrderHooks;null!==d&&wc(e,d,0,null),$u(e,0)}if(function kj(n){for(let e=hC(n);null!==e;e=fC(e)){if(!e[hg])continue;const t=e[qs];for(let r=0;r<t.length;r++){Fg(t[r])}}}(e),zS(e,2),null!==n.contentQueries&&FS(n,e),o){const d=n.contentCheckHooks;null!==d&&Ic(e,d)}else{const d=n.contentHooks;null!==d&&wc(e,d,1),$u(e,1)}!function oj(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=wS(e,Ca);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)Cs(~s);else{const o=s,a=t[++i],u=t[++i];gE(a,o),r.dirty=!1;const d=Th(r);try{u(2,e[o])}finally{bh(r,d)}}}}finally{null===e[Ca]&&TS(e,Ca),Cs(-1)}}(n,e);const a=n.components;null!==a&&GS(e,a,0);const u=n.viewQuery;if(null!==u&&LI(2,u,r),o){const d=n.viewCheckHooks;null!==d&&Ic(e,d)}else{const d=n.viewHooks;null!==d&&wc(e,d,2),$u(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Je]&=-73,Vg(e)}finally{Bo()}}}function zS(n,e){for(let t=hC(n);null!==t;t=fC(t))for(let r=kn;r<t.length;r++)qS(t[r],e)}function Fj(n,e,t){qS(Yr(e,n),t)}function qS(n,e){if(!function kg(n){return 128==(128&n[Je])}(n))return;const t=n[we],r=n[Je];if(80&r&&0===e||1024&r||2===e)HS(t,n,t.template,n[rn]);else if(n[vr]>0){zS(n,1);const i=t.components;null!==i&&GS(n,i,1)}}function GS(n,e,t){for(let r=0;r<e.length;r++)Fj(n,e[r],t)}class gf{get rootNodes(){const e=this._lView,t=e[we];return pf(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[rn]}set context(e){this._lView[rn]=e}get destroyed(){return 256==(256&this._lView[Je])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Ht];if(or(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(wm(e,r),ne(t,r))}this._attachedToViewContainer=!1}GE(this._lView[we],this._lView)}onDestroy(e){!function aE(n,e){if(256==(256&n[Je]))throw new Y(911,!1);null===n[Zi]&&(n[Zi]=[]),n[Zi].push(e)}(this._lView,e)}markForCheck(){hf(this._cdRefInjectingView||this._lView)}detach(){this._lView[Je]&=-129}reattach(){this._lView[Je]|=128}detectChanges(){Wm(this._lView[we],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Y(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function IB(n,e){rf(n,e,e[He],2,null,null)}(this._lView[we],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Y(902,!1);this._appRef=e}}class Vj extends gf{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Wm(e[we],e,e[rn],!1)}checkNoChanges(){}get context(){return null}}class WS extends Um{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=vt(e);return new mf(t,this.ngModule)}}function KS(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class Bj{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Ql(r);const i=this.injector.get(e,TI,r);return i!==TI||t===TI?i:this.parentInjector.get(e,t,r)}}class mf extends tS{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=KS(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return KS(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Wv(n){return n.map(gh).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof Js?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new Bj(e,s):e,a=o.get(cf,null);if(null===a)throw new Y(407,!1);const m={rendererFactory:a,sanitizer:o.get(OU,null),effectManager:o.get(jS,null),afterRenderEventManager:o.get(PI,null)},v=a.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",D=r?function uj(n,e,t,r){const s=r.get(yS,!1)||t===Or.ShadowDom,o=n.selectRootElement(e,s);return function lj(n){PS(n)}(o),o}(v,r,this.componentDef.encapsulation,o):Im(v,T,function Lj(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(T)),W=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let B=null;null!==D&&(B=vI(D,o,!0));const z=OI(0,null,null,1,0,null,null,null,null,null,null),te=zm(null,z,null,W,null,null,m,v,o,null,B);let he,Te;ju(te);try{const L=this.componentDef;let R,F=null;L.findHostDirectiveDefs?(R=[],F=new Map,L.findHostDirectiveDefs(L,R,F),R.push(L)):R=[L];const U=function jj(n,e){const t=n[we],r=st;return n[r]=e,jc(t,r,2,"#host",null)}(te,D),H=function $j(n,e,t,r,i,s,o){const a=i[we];!function Hj(n,e,t,r){for(const i of n)e.mergedAttrs=Ro(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Gm(e,e.mergedAttrs,!0),null!==t&&SC(r,t,e))}(r,n,e,o);let u=null;null!==e&&(u=vI(e,i[xi]));const d=s.rendererFactory.createRenderer(e,t);let g=16;t.signals?g=4096:t.onPush&&(g=64);const m=zm(i,SS(t),null,g,i[n.index],n,s,d,null,null,u);return a.firstCreatePass&&FI(a,n,r.length-1),qm(i,m),i[n.index]=m}(U,D,L,R,te,m,v);Te=Ma(z,st),D&&function qj(n,e,t,r){if(r)dh(n,t,["ng-version",wI.full]);else{const{attrs:i,classes:s}=function mh(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Ni(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&dh(n,t,i),s&&s.length>0&&CC(n,t,s.join(" "))}}(v,L,D,r),void 0!==t&&function Gj(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(Te,this.ngContentSelectors,t),he=function zj(n,e,t,r,i,s){const o=lr(),a=i[we],u=ur(o,i);NS(a,i,o,t,null,r);for(let g=0;g<t.length;g++)kr(jo(i,a,o.directiveStart+g,o),i);xS(a,i,o),u&&kr(u,i);const d=jo(i,a,o.directiveStart+o.componentOffset,o);if(n[rn]=i[rn]=d,null!==s)for(const g of s)g(d,e);return MI(a,o,n),d}(H,L,R,F,te,[Wj]),UI(z,te,null)}finally{Bo()}return new Uj(this.componentType,he,Lc(Te,te),te,Te)}}class Uj extends SU{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Vj(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;BI(s[we],s,i,e,t),this.previousInputValues.set(e,t),hf(Yr(this._tNode.index,s))}}get injector(){return new hr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function Wj(){const n=lr();ka(oe()[we],n)}function xt(n){let e=function QS(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(ki(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Y(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=Km(n.inputs),o.inputTransforms=Km(n.inputTransforms),o.declaredInputs=Km(n.declaredInputs),o.outputs=Km(n.outputs);const a=i.hostBindings;a&&Jj(n,a);const u=i.viewQuery,d=i.contentQueries;if(u&&Qj(n,u),d&&Yj(n,d),A(n.inputs,i.inputs),A(n.declaredInputs,i.declaredInputs),A(n.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),A(o.inputTransforms,i.inputTransforms)),ki(i)&&i.data.animation){const g=n.data;g.animation=(g.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===xt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function Kj(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ro(i.hostAttrs,t=Ro(t,i.hostAttrs))}}(r)}function Km(n){return n===Yi?{}:n===ht?[]:n}function Qj(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function Yj(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function Jj(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function Qm(n){return!!function jI(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Zs(n,e,t){return n[e]=t}function Fr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function tl(n,e,t,r){const i=Fr(n,e,t);return Fr(n,e+1,r)||i}function eo(n,e,t,r){const i=oe();return Fr(i,xa(),e)&&(lt(),Xs(zt(),i,n,e,t,r)),eo}function zc(n,e,t,r,i,s){const a=tl(n,function Ds(){return je.lFrame.bindingIndex}(),t,i);return Sr(2),a?e+Ae(t)+r+Ae(i)+s:Xe}function Xr(n,e,t,r,i,s,o,a){const u=oe(),d=lt(),g=n+st,m=d.firstCreatePass?function T$(n,e,t,r,i,s,o,a,u){const d=e.consts,g=jc(e,n,4,o||null,Gs(d,a));kI(e,t,g,Gs(d,u)),ka(e,g);const m=g.tView=OI(2,g,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return null!==e.queries&&(e.queries.template(e,g),m.queries=e.queries.embeddedTView(g)),g}(g,d,u,e,t,r,i,s,o):d.data[g];mi(m,!1);const v=dP(d,u,m,n);Oa()&&bm(d,u,v,m),kr(v,u),qm(u,u[g]=kS(v,u,v,m)),Sa(m)&&NI(d,u,m),null!=o&&xI(u,m,a)}let dP=function hP(n,e,t,r){return Ws(!0),e[He].createComment("")};function as(n){return As(function pE(){return je.lFrame.contextLView}(),st+n)}function Ot(n,e,t){const r=oe();return Fr(r,xa(),e)&&function Vi(n,e,t,r,i,s,o,a){const u=ur(e,t);let g,d=e.inputs;!a&&null!=d&&(g=d[r])?(BI(n,t,g,r,i),ko(e)&&function mj(n,e){const t=Yr(e,n);16&t[Je]||(t[Je]|=64)}(t,e.index)):3&e.type&&(r=function gj(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}(lt(),zt(),r,n,e,r[He],t,!1),Ot}function WI(n,e,t,r,i){const o=i?"class":"style";BI(n,t,e.inputs[o],o,r)}function Qe(n,e,t,r){const i=oe(),s=lt(),o=st+n,a=i[He],u=s.firstCreatePass?function C$(n,e,t,r,i,s){const o=e.consts,u=jc(e,n,2,r,Gs(o,i));return kI(e,t,u,Gs(o,s)),null!==u.attrs&&Gm(u,u.attrs,!1),null!==u.mergedAttrs&&Gm(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,t,r):s.data[o],d=fP(s,i,u,a,e,n);i[o]=d;const g=Sa(u);return mi(u,!0),SC(a,d,u),32!=(32&u.flags)&&Oa()&&bm(s,i,d,u),0===function uE(){return je.lFrame.elementDepthCount}()&&kr(d,i),function lE(){je.lFrame.elementDepthCount++}(),g&&(NI(s,i,u),MI(s,u,i)),null!==r&&xI(i,u),Qe}function pt(){let n=lr();kh()?Lu():(n=n.parent,mi(n,!1));const e=n;(function cE(n){return je.skipHydrationRootTNode===n})(e)&&function fE(){je.skipHydrationRootTNode=null}(),function gc(){je.lFrame.elementDepthCount--}();const t=lt();return t.firstCreatePass&&(ka(t,n),Ou(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function em(n){return 0!=(8&n.flags)}(e)&&WI(t,e,oe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function wE(n){return 0!=(16&n.flags)}(e)&&WI(t,e,oe(),e.stylesWithoutHost,!1),pt}function to(n,e,t,r){return Qe(n,e,t,r),pt(),to}let fP=(n,e,t,r,i,s)=>(Ws(!0),Im(r,i,function Jg(){return je.lFrame.currentNamespace}()));function e_(n,e,t){const r=oe(),i=lt(),s=n+st,o=i.firstCreatePass?function R$(n,e,t,r,i){const s=e.consts,o=Gs(s,r),a=jc(e,n,8,"ng-container",o);return null!==o&&Gm(a,o,!0),kI(e,t,a,Gs(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,t):i.data[s];mi(o,!0);const a=gP(i,r,o,n);return r[s]=a,Oa()&&bm(i,r,a,o),kr(a,r),Sa(o)&&(NI(i,r,o),MI(i,o,r)),null!=t&&xI(r,o),e_}function t_(){let n=lr();const e=lt();return kh()?Lu():(n=n.parent,mi(n,!1)),e.firstCreatePass&&(ka(e,n),Ou(n)&&e.queries.elementEnd(n)),t_}let gP=(n,e,t,r)=>(Ws(!0),qE(e[He],""));function nl(){return oe()}function n_(n){return!!n&&"function"==typeof n.then}function mP(n){return!!n&&"function"==typeof n.subscribe}function Tn(n,e,t,r){const i=oe(),s=lt(),o=lr();return function yP(n,e,t,r,i,s,o){const a=Sa(r),d=n.firstCreatePass&&LS(n),g=e[rn],m=VS(e);let v=!0;if(3&r.type||o){const S=ur(r,e),x=o?o(S):S,W=m.length,B=o?te=>o(Bt(te[r.index])):r.index;let z=null;if(!o&&a&&(z=function x$(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[Da],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==z)(z.__ngLastListenerFn__||z).__ngNextListenerFn__=s,z.__ngLastListenerFn__=s,v=!1;else{s=EP(r,e,g,s,!1);const te=t.listen(x,i,s);m.push(s,te),d&&d.push(i,B,W,W+1)}}else s=EP(r,e,g,s,!1);const T=r.outputs;let D;if(v&&null!==T&&(D=T[i])){const S=D.length;if(S)for(let x=0;x<S;x+=2){const he=e[D[x]][D[x+1]].subscribe(s),Te=m.length;m.push(s,he),d&&d.push(i,r.index,Te,-(Te+1))}}}(s,i,i[He],o,n,e,r),Tn}function vP(n,e,t,r){try{return ns(6,e,t),!1!==t(r)}catch(i){return US(n,i),!1}finally{ns(7,e,t)}}function EP(n,e,t,r,i){return function s(o){if(o===Function)return r;hf(n.componentOffset>-1?Yr(n.index,e):e);let u=vP(e,t,r,o),d=s.__ngNextListenerFn__;for(;d;)u=vP(e,t,d,o)&&u,d=d.__ngNextListenerFn__;return i&&!1===u&&o.preventDefault(),u}}function Ct(n=1){return function _E(n){return(je.lFrame.contextLView=function yE(n,e){for(;n>0;)e=e[$s],n--;return e}(n,je.lFrame.contextLView))[rn]}(n)}function r_(n,e){return n<<17|e<<2}function Ua(n){return n>>17&32767}function QI(n){return 2|n}function rl(n){return(131068&n)>>2}function YI(n,e){return-131069&n|e<<2}function JI(n){return 1|n}function RP(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?Ua(s):rl(s),u=!1;for(;0!==a&&(!1===u||o);){const g=n[a+1];$$(n[a],e)&&(u=!0,n[a+1]=r?JI(g):QI(g)),a=r?Ua(g):rl(g)}u&&(n[t+1]=r?QI(s):JI(s))}function $$(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&wr(n,e)>=0}function i_(n,e,t){return Rs(n,e,t,!1),i_}function ja(n,e){return Rs(n,e,null,!0),ja}function Rs(n,e,t,r){const i=oe(),s=lt(),o=Sr(2);s.firstUpdatePass&&function LP(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[dr()],o=function VP(n,e){return e>=n.expandoStartIndex}(n,t);(function $P(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function J$(n,e,t,r){const i=function yc(n){const e=je.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=If(t=XI(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=XI(i,n,e,t,r),null===s){let u=function X$(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==rl(r))return n[Ua(r)]}(n,e,r);void 0!==u&&Array.isArray(u)&&(u=XI(null,n,e,u[1],r),u=If(u,e.attrs,r),function Z$(n,e,t,r){n[Ua(t?e.classBindings:e.styleBindings)]=r}(n,e,r,u))}else s=function eH(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=If(r,n[s].hostAttrs,t);return If(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function U$(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Ua(o),u=rl(o);n[r]=t;let g,d=!1;if(Array.isArray(t)?(g=t[1],(null===g||wr(t,g)>0)&&(d=!0)):g=t,i)if(0!==u){const v=Ua(n[a+1]);n[r+1]=r_(v,a),0!==v&&(n[v+1]=YI(n[v+1],r)),n[a+1]=function L$(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=r_(a,0),0!==a&&(n[a+1]=YI(n[a+1],r)),a=r;else n[r+1]=r_(u,0),0===a?a=r:n[u+1]=YI(n[u+1],r),u=r;d&&(n[r+1]=QI(n[r+1])),RP(n,g,r,!0),RP(n,g,r,!1),function j$(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&wr(s,e)>=0&&(t[r+1]=JI(t[r+1]))}(e,g,n,r,s),o=r_(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==Xe&&Fr(i,o,e)&&function UP(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const u=n.data,d=u[a+1],g=function B$(n){return 1==(1&n)}(d)?jP(u,e,t,i,rl(d),o):void 0;s_(g)||(s_(s)||function V$(n){return 2==(2&n)}(d)&&(s=jP(u,null,t,i,a,o)),function MB(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:Ba.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Ba.Important),n.setStyle(t,r,i,s))}}(r,o,fc(dr(),t),i,s))}(s,s.data[dr()],i,i[He],n,i[o+1]=function iH(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=I(Fi(n)))),n}(e,t),r,o)}function XI(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=If(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function If(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),qt(n,o,!!t||e[++s]))}return void 0===n?null:n}function jP(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const u=n[i],d=Array.isArray(u),g=d?u[1]:u,m=null===g;let v=t[i+1];v===Xe&&(v=m?ht:void 0);let T=m?Jr(v,r):g===r?v:void 0;if(d&&!s_(T)&&(T=Jr(u,r)),s_(T)&&(a=T,o))return a;const D=n[i+1];i=o?Ua(D):rl(D)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=Jr(u,r))}return a}function s_(n){return void 0!==n}function Ut(n,e=""){const t=oe(),r=lt(),i=n+st,s=r.firstCreatePass?jc(r,i,1,e,null):r.data[i],o=HP(r,t,s,e,n);t[i]=o,Oa()&&bm(r,t,o,s),mi(s,!1)}let HP=(n,e,t,r,i)=>(Ws(!0),function Em(n,e){return n.createText(e)}(e[He],r));function us(n){return ls("",n,""),us}function ls(n,e,t){const r=oe(),i=function Hc(n,e,t,r){return Fr(n,xa(),t)?e+Ae(t)+r:Xe}(r,n,e,t);return i!==Xe&&Wo(r,dr(),i),ls}function ZI(n,e,t,r,i){const s=oe(),o=zc(s,n,e,t,r,i);return o!==Xe&&Wo(s,dr(),o),ZI}const il=void 0;var DH=["en",[["a","p"],["AM","PM"],il],[["AM","PM"],il,il],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],il,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],il,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",il,"{1} 'at' {0}",il],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function AH(n){const t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}];let Xc={};function Zr(n){const e=function CH(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=lR(e);if(t)return t;const r=e.split("-")[0];if(t=lR(r),t)return t;if("en"===r)return DH;throw new Y(701,!1)}function lR(n){return n in Xc||(Xc[n]=Lt.ng&&Lt.ng.common&&Lt.ng.common.locales&&Lt.ng.common.locales[n]),Xc[n]}var Xt=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Xt||{});const Zc="en-US";let cR=Zc;function nw(n,e,t,r,i){if(n=Q(n),Array.isArray(n))for(let s=0;s<n.length;s++)nw(n[s],e,t,r,i);else{const s=lt(),o=oe(),a=lr();let u=Zu(n)?n:Q(n.provide);const d=KC(n),g=1048575&a.providerIndexes,m=a.directiveStart,v=a.providerIndexes>>20;if(Zu(n)||!n.multi){const T=new Fa(d,i,de),D=iw(u,e,i?g:g+v,m);-1===D?(zh(Dc(a,o),s,u),rw(s,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(T),o.push(T)):(t[D]=T,o[D]=T)}else{const T=iw(u,e,g+v,m),D=iw(u,e,g,g+v),x=D>=0&&t[D];if(i&&!x||!i&&!(T>=0&&t[T])){zh(Dc(a,o),s,u);const W=function Az(n,e,t,r,i){const s=new Fa(n,t,de);return s.multi=[],s.index=e,s.componentProviders=0,kR(s,i,r&&!t),s}(i?bz:Tz,t.length,i,r,d);!i&&x&&(t[D].providerFactory=W),rw(s,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(W),o.push(W)}else rw(s,n,T>-1?T:D,kR(t[i?D:T],d,!i&&r));!i&&r&&x&&t[D].componentProviders++}}}function rw(n,e,t,r){const i=Zu(e),s=function dU(n){return!!n.useClass}(e);if(i||s){const u=(s?Q(e.useClass):e).prototype.ngOnDestroy;if(u){const d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const g=d.indexOf(t);-1===g?d.push(t,[r,u]):d[g+1].push(r,u)}else d.push(t,u)}}}function kR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function iw(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Tz(n,e,t,r){return sw(this.multi,[])}function bz(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=jo(t,t[we],this.providerFactory.index,r);s=a.slice(0,o),sw(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],sw(i,s);return s}function sw(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function gn(n,e=[]){return t=>{t.providersResolver=(r,i)=>function wz(n,e,t){const r=lt();if(r.firstCreatePass){const i=ki(n);nw(t,r.data,r.blueprint,i,!0),nw(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class sl{}class Dz{}class ow extends sl{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new WS(this);const i=function rr(n,e){const t=n[Xl]||null;if(!t&&!0===e)throw new Error(`Type ${I(n)} does not have '\u0275mod' property.`);return t}(e);this._bootstrapComponents=function Go(n){return n instanceof Function?n():n}(i.bootstrap),this._r3Injector=aS(e,t,[{provide:sl,useValue:this},{provide:Um,useValue:this.componentFactoryResolver},...r],I(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class aw extends Dz{constructor(e){super(),this.moduleType=e}create(e){return new ow(this.moduleType,e,[])}}function HR(n,e,t,r,i,s){return function GR(n,e,t,r,i,s,o,a){const u=e+t;return function Ym(n,e,t,r,i){const s=tl(n,e,t,r);return Fr(n,e+2,i)||s}(n,u,i,s,o)?Zs(n,u+3,a?r.call(a,i,s,o):r(i,s,o)):Cf(n,u+3)}(oe(),cr(),n,e,t,r,i,s)}function Cf(n,e){const t=n[e];return t===Xe?void 0:t}function c_(n,e){const t=lt();let r;const i=n+st;t.firstCreatePass?(r=function Qz(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const s=r.factory||(r.factory=Fo(r.type)),a=Cr(de);try{const u=Ac(!1),d=s();return Ac(u),function D$(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,oe(),i,d),d}finally{Cr(a)}}function d_(n,e,t,r){const i=n+st,s=oe(),o=As(s,i);return function Sf(n,e){return n[we].data[e].pure}(s,i)?function qR(n,e,t,r,i,s,o){const a=e+t;return tl(n,a,i,s)?Zs(n,a+2,o?r.call(o,i,s):r(i,s)):Cf(n,a+2)}(s,cr(),e,o.transform,t,r,o):o.transform(t,r)}function e4(){return this._results[Symbol.iterator]()}class lw{get changes(){return this._changes||(this._changes=new Fn)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=lw.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=e4)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=function w(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function y(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function n4(n,e,t,r=!0){const i=e[we];if(function TB(n,e,t,r){const i=kn+r,s=t.length;r>0&&(t[i-1][Kr]=e),r<s-kn?(e[Kr]=t[i],j(t,kn+r,e)):(t.push(e),e[Kr]=null),e[Ht]=t;const o=e[Hs];null!==o&&t!==o&&function bB(n,e){const t=n[qs];e[sn]!==e[Ht][Ht][sn]&&(n[hg]=!0),null===t?n[qs]=[e]:t.push(e)}(o,e);const a=e[Oi];null!==a&&a.insertView(n),e[Je]|=128}(i,e,n,t),r){const s=YE(t,n),o=e[He],a=Tm(o,n[gi]);null!==a&&function EB(n,e,t,r,i,s){r[pn]=i,r[ir]=e,rf(n,r,t,1,i,s)}(i,n[ir],o,e,a,s)}}let Ko=(()=>{class n{static{this.__NG_ELEMENT_ID__=s4}}return n})();const r4=Ko,i4=class extends r4{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function t4(n,e,t,r){const i=e.tView,a=zm(n,i,t,4096&n[Je]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Hs]=n[e.index];const d=n[Oi];return null!==d&&(a[Oi]=d.createEmbeddedView(i)),UI(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new gf(i)}};function s4(){return h_(lr(),oe())}function h_(n,e){return 4&n.type?new i4(e,n,Lc(n,e)):null}let io=(()=>{class n{static{this.__NG_ELEMENT_ID__=d4}}return n})();function d4(){return tM(lr(),oe())}const h4=io,ZR=class extends h4{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Lc(this._hostTNode,this._hostLView)}get injector(){return new hr(this._hostTNode,this._hostLView)}get parentInjector(){const e=Cc(this._hostTNode,this._hostLView);if(jh(e)){const t=Uo(e,this._hostLView),r=Hu(e);return new hr(t[we].data[r+8],t)}return new hr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=eM(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-kn}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function p(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const S=t||{};a=S.index,r=S.injector,i=S.projectableNodes,s=S.environmentInjector||S.ngModuleRef}const u=o?e:new mf(vt(e)),d=r||this.parentInjector;if(!s&&null==u.ngModule){const x=(o?d:this.parentInjector).get(Js,null);x&&(s=x)}vt(u.componentType??{});const T=u.create(d,i,null,s);return this.insertImpl(T.hostView,a,false),T}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function xh(n){return or(n[Ht])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=i[Ht],g=new ZR(d,d[ir],d[Ht]);g.detach(g.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return n4(a,i,o,!r),e.attachToViewContainerRef(),j(cw(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=eM(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=wm(this._lContainer,t);r&&(ne(cw(this._lContainer),t),GE(r[we],r))}detach(e){const t=this._adjustIndex(e,-1),r=wm(this._lContainer,t);return r&&null!=ne(cw(this._lContainer),t)?new gf(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function eM(n){return n[8]}function cw(n){return n[8]||(n[8]=[])}function tM(n,e){let t;const r=e[n.index];return or(r)?t=r:(t=kS(r,e,null,n),e[n.index]=t,qm(e,t)),nM(t,e,n,r),new ZR(t,n,e)}let nM=function rM(n,e,t,r){if(n[gi])return;let i;i=8&t.type?Bt(r):function f4(n,e){const t=n[He],r=t.createComment(""),i=ur(e,n);return Ju(t,Tm(t,i),r,function SB(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[gi]=i};class dw{constructor(e){this.queryList=e,this.matches=null}clone(){return new dw(this.queryList)}setDirty(){this.queryList.setDirty()}}class hw{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new hw(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==dM(e,t).matches&&this.queries[t].setDirty()}}class iM{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class fw{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new fw(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class pw{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new pw(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,m4(t,s)),this.matchTNodeWithReadOption(e,t,qu(t,e,s,!1,!1))}else r===Ko?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,qu(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Ps||i===io||i===Ko&&4&t.type)this.addMatch(t.index,-2);else{const s=qu(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function m4(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function y4(n,e,t,r){return-1===t?function _4(n,e){return 11&n.type?Lc(n,e):4&n.type?h_(n,e):null}(e,n):-2===t?function v4(n,e,t){return t===Ps?Lc(e,n):t===Ko?h_(e,n):t===io?tM(e,n):void 0}(n,e,r):jo(n,n[we],t,e)}function sM(n,e,t,r){const i=e[Oi].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let u=0;u<o.length;u+=2){const d=o[u];a.push(d<0?null:y4(e,s[d],o[u+1],t.metadata.read))}i.matches=a}return i.matches}function gw(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=sM(n,e,i,t);for(let a=0;a<s.length;a+=2){const u=s[a];if(u>0)r.push(o[a/2]);else{const d=s[a+1],g=e[-u];for(let m=kn;m<g.length;m++){const v=g[m];v[Hs]===v[Ht]&&gw(v[we],v,d,r)}if(null!==g[qs]){const m=g[qs];for(let v=0;v<m.length;v++){const T=m[v];gw(T[we],T,d,r)}}}}}return r}function oM(n){const e=oe(),t=lt(),r=zg();Vh(r+1);const i=dM(t,r);if(n.dirty&&function Nh(n){return 4==(4&n[Je])}(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const s=i.crossesNgTemplate?gw(t,e,r,[]):sM(t,e,i,r);n.reset(s,NU),n.notifyOnChanges()}return!0}return!1}function aM(n,e,t){const r=lt();r.firstCreatePass&&(function cM(n,e,t){null===n.queries&&(n.queries=new fw),n.queries.track(new pw(e,t))}(r,new iM(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),function lM(n,e,t){const r=new lw(4==(4&t));(function hj(n,e,t,r){const i=VS(e);i.push(t),n.firstCreatePass&&LS(n).push(r,i.length-1)})(n,e,r,r.destroy),null===e[Oi]&&(e[Oi]=new hw),e[Oi].queries.push(new dw(r))}(r,oe(),e)}function dM(n,e){return n.queries.getByIndex(e)}const z4=new Ie("Application Initializer");let Ew=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=yt(z4,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(n_(s))t.push(s);else if(mP(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Qo=new Ie("LocaleId",{providedIn:"root",factory:()=>yt(Qo,at.Optional|at.SkipSelf)||function G4(){return typeof $localize<"u"&&$localize.locale||Zc}()});let Iw=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new nr(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const NM=new Ie(""),m_=new Ie("");let Dw,bw=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Dw||(function _3(n){Dw=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Nt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(fe(Nt),fe(Aw),fe(m_))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})(),Aw=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Dw?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),$a=null;const xM=new Ie("AllowMultipleToken"),Cw=new Ie("PlatformDestroyListeners"),OM=new Ie("appBootstrapListener");function VM(n,e,t=[]){const r=`Platform: ${e}`,i=new Ie(r);return(s=[])=>{let o=Sw();if(!o||o.injector.get(xM,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function E3(n){if($a&&!$a.get(xM,!1))throw new Y(400,!1);(function kM(){!function Dh(n){lc=n}(()=>{throw new Y(600,!1)})})(),$a=n;const e=n.get(BM);(function FM(n){n.get(QC,null)?.forEach(t=>t())})(n)}(function LM(n=[],e){return yi.create({name:e,providers:[{provide:uI,useValue:"platform"},{provide:Cw,useValue:new Set([()=>$a=null])},...n]})}(a,r))}return function w3(n){const e=Sw();if(!e)throw new Y(401,!1);return e}()}}function Sw(){return $a?.get(BM)??null}let BM=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function T3(n="zone.js",e){return"noop"===n?new WU:"zone.js"===n?new Nt(e):n}(r?.ngZone,function UM(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function Sz(n,e,t){return new ow(n,e,t)}(t.moduleType,this.injector,function qM(n){return[{provide:Nt,useFactory:n},{provide:Rm,multi:!0,useFactory:()=>{const e=yt(A3,{optional:!0});return()=>e.initialize()}},{provide:zM,useFactory:b3},{provide:hS,useFactory:fS}]}(()=>i)),o=s.injector.get(qo,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{__(this._modules,s),a.unsubscribe()})}),function jM(n,e,t){try{const r=t();return n_(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(Ew);return a.runInitializers(),a.donePromise.then(()=>(function dR(n){qn(n,"Expected localeId to be defined"),"string"==typeof n&&(cR=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Qo,Zc)||Zc),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=$M({},r);return function y3(n,e,t){const r=new aw(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(nd);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new Y(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Y(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(Cw,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(fe(yi))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function $M(n,e){return Array.isArray(e)?e.reduce($M,n):{...n,...e}}let nd=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=yt(zM),this.zoneIsStable=yt(hS),this.componentTypes=[],this.components=[],this.isStable=yt(Iw).hasPendingTasks.pipe(wn(t=>t?Tt(!1):this.zoneIsStable),Bs(),Qi()),this._injector=yt(Js)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof tS;if(!this._injector.get(Ew).done)throw!i&&function Xi(n){const e=vt(n)||On(n)||nn(n);return null!==e&&e.standalone}(t),new Y(405,!1);let o;o=i?t:this._injector.get(Um).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function v3(n){return n.isBoundToModule}(o)?void 0:this._injector.get(sl),d=o.create(yi.NULL,[],r||o.selector,a),g=d.location.nativeElement,m=d.injector.get(NM,null);return m?.registerApplication(g),d.onDestroy(()=>{this.detachView(d.hostView),__(this.components,d),m?.unregisterApplication(g)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new Y(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;__(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(OM,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>__(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Y(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function __(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const zM=new Ie("",{providedIn:"root",factory:()=>yt(qo).handleError.bind(void 0)});function b3(){const n=yt(Nt),e=yt(qo);return t=>n.runOutsideAngular(()=>e.handleError(t))}let A3=(()=>{class n{constructor(){this.zone=yt(Nt),this.applicationRef=yt(nd)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();let Pw=(()=>{class n{static{this.__NG_ELEMENT_ID__=C3}}return n})();function C3(n){return function S3(n,e,t){if(ko(n)&&!t){const r=Yr(n.index,e);return new gf(r,r)}return 47&n.type?new gf(e[sn],e):null}(lr(),oe(),16==(16&n))}class JM{constructor(){}supports(e){return Qm(e)}create(e){return new x3(e)}}const N3=(n,e)=>e;class x3{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||N3}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<ZM(r,i,s)?t:r,a=ZM(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const d=a-i,g=u-i;if(d!=g){for(let v=0;v<d;v++){const T=v<s.length?s[v]:s[v]=0,D=T+v;g<=D&&D<d&&(s[v]=T+1)}s[o.previousIndex]=g-d}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Qm(e))throw new Y(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function s$(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new O3(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new XM),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new XM),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class O3{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class k3{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class XM{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new k3,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ZM(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function tN(){return new E_([new JM])}let E_=(()=>{class n{static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:tN})}constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||tN()),deps:[[n,new FE,new is]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new Y(901,!1)}}return n})();const U3=VM(null,"core",[]);let j3=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(fe(nd))}}static{this.\u0275mod=Wn({type:n})}static{this.\u0275inj=Gn({})}}return n})(),Fw=null;function Nf(){return Fw}class eq{}const cs=new Ie("DocumentToken");var w_=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(w_||{}),Vn=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(Vn||{});function ds(n,e){const t=Zr(n),r=t[Xt.NumberSymbols][e];if(typeof r>"u"){if(e===Vn.CurrencyDecimal)return t[Xt.NumberSymbols][Vn.Decimal];if(e===Vn.CurrencyGroup)return t[Xt.NumberSymbols][Vn.Group]}return r}const Pq=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function zw(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function vN(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}class $q{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ww=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new $q(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),wN(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{wN(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(de(io),de(Ko),de(E_))}}static{this.\u0275dir=qe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function wN(n,e){n.context.$implicit=e.item}let Kw=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Hq,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){TN("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){TN("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(de(io),de(Ko))}}static{this.\u0275dir=qe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class Hq{constructor(){this.$implicit=null,this.ngIf=null}}function TN(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${I(e)}'.`)}let DN=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function Jw(n){return!(null==n||""===n||n!=n)}(t))return null;i=i||this._locale;try{return function kq(n,e,t){return function $w(n,e,t,r,i,s,o=!1){let a="",u=!1;if(isFinite(n)){let d=function Vq(n){let r,i,s,o,a,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;"0"===e.charAt(s);s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;"0"===e.charAt(a);)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);o&&(d=function Fq(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(d));let g=e.minInt,m=e.minFrac,v=e.maxFrac;if(s){const B=s.match(Pq);if(null===B)throw new Error(`${s} is not a valid digit info`);const z=B[1],te=B[3],he=B[5];null!=z&&(g=zw(z)),null!=te&&(m=zw(te)),null!=he?v=zw(he):null!=te&&m>v&&(v=m)}!function Lq(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const s=Math.min(Math.max(e,i),t);let o=s+n.integerLen,a=r[o];if(o>0){r.splice(Math.max(n.integerLen,o));for(let m=o;m<r.length;m++)r[m]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let m=1;m<o;m++)r[m]=0}if(a>=5)if(o-1<0){for(let m=0;m>o;m--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let u=0!==s;const d=e+n.integerLen,g=r.reduceRight(function(m,v,T,D){return D[T]=(v+=m)<10?v:v-10,u&&(0===D[T]&&T>=d?D.pop():u=!1),v>=10?1:0},0);g&&(r.unshift(g),n.integerLen++)}(d,m,v);let T=d.digits,D=d.integerLen;const S=d.exponent;let x=[];for(u=T.every(B=>!B);D<g;D++)T.unshift(0);for(;D<0;D++)T.unshift(0);D>0?x=T.splice(D,T.length):(x=T,T=[0]);const W=[];for(T.length>=e.lgSize&&W.unshift(T.splice(-e.lgSize,T.length).join(""));T.length>e.gSize;)W.unshift(T.splice(-e.gSize,T.length).join(""));T.length&&W.unshift(T.join("")),a=W.join(ds(t,r)),x.length&&(a+=ds(t,i)+x.join("")),S&&(a+=ds(t,Vn.Exponential)+"+"+S)}else a=ds(t,Vn.Infinity);return a=n<0&&!u?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(n,function Hw(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],s=r[1],o=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],a=o[0],u=o[1]||"";t.posPre=a.substring(0,a.indexOf("#"));for(let g=0;g<u.length;g++){const m=u.charAt(g);"0"===m?t.minFrac=t.maxFrac=g+1:"#"===m?t.maxFrac=g+1:t.posSuf+=m}const d=a.split(",");if(t.gSize=d[1]?d[1].length:0,t.lgSize=d[2]||d[1]?(d[2]||d[1]).length:0,s){const g=i.length-t.posPre.length-t.posSuf.length,m=s.indexOf("#");t.negPre=s.substring(0,m).replace(/'/g,""),t.negSuf=s.slice(m+g).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function Vw(n,e){return Zr(n)[Xt.NumberFormats][e]}(e,w_.Decimal),ds(e,Vn.MinusSign)),e,Vn.Group,Vn.Decimal,t)}(function Xw(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(s){throw function xs(n,e){return new Y(2100,!1)}()}}static{this.\u0275fac=function(r){return new(r||n)(de(Qo,16))}}static{this.\u0275pipe=xn({name:"number",type:n,pure:!0,standalone:!0})}}return n})();let Zw=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Wn({type:n})}static{this.\u0275inj=Gn({})}}return n})();function N_(n){return"server"===n}class SN{}class BG extends eq{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class nT extends BG{static makeCurrent(){!function Z3(n){Fw||(Fw=n)}(new nT)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function UG(){return Ff=Ff||document.querySelector("base"),Ff?Ff.getAttribute("href"):null}();return null==t?null:function jG(n){k_=k_||document.createElement("a"),k_.setAttribute("href",n);const e=k_.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ff=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return vN(document.cookie,e)}}let k_,Ff=null,HG=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();const rT=new Ie("EventManagerPlugins");let xN=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new Y(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(fe(rT),fe(Nt))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();class ON{constructor(e){this._doc=e}}const iT="ng-app-id";let kN=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=N_(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${iT}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(iT),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(iT,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(fe(cs),fe(Om),fe(JC,8),fe(Ss))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();const sT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},oT=/%COMP%/g,WG=new Ie("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function VN(n,e){return e.map(t=>t.replace(oT,n))}let aT=(()=>{class n{constructor(t,r,i,s,o,a,u,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=N_(a),this.defaultRenderer=new uT(t,o,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Or.ShadowDom&&(r={...r,encapsulation:Or.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof BN?i.applyToHost(t):i instanceof lT&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case Or.Emulated:s=new BN(u,d,r,this.appId,g,o,a,m);break;case Or.ShadowDom:return new JG(u,d,t,r,o,a,this.nonce,m);default:s=new lT(u,d,r,g,o,a,m)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(fe(xN),fe(kN),fe(Om),fe(WG),fe(cs),fe(Ss),fe(Nt),fe(JC))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();class uT{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(sT[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(LN(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(LN(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new Y(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=sT[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=sT[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ba.DashCase|Ba.Important)?e.style.setProperty(t,r,i&Ba.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ba.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=Nf().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function LN(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class JG extends uT{constructor(e,t,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=VN(i.id,i.styles);for(const g of d){const m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=g,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class lT extends uT{constructor(e,t,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?VN(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class BN extends lT{constructor(e,t,r,i,s,o,a,u){const d=i+"-"+r.id;super(e,t,r,s,o,a,u,d),this.contentAttr=function KG(n){return"_ngcontent-%COMP%".replace(oT,n)}(d),this.hostAttr=function QG(n){return"_nghost-%COMP%".replace(oT,n)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let XG=(()=>{class n extends ON{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(fe(cs))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();const UN=["alt","control","meta","shift"],ZG={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},eW={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let tW=(()=>{class n extends ON{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Nf().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),UN.forEach(d=>{const g=r.indexOf(d);g>-1&&(r.splice(g,1),o+=d+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=ZG[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),UN.forEach(o=>{o!==i&&(0,eW[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(fe(cs))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();const $N=[{provide:Ss,useValue:"browser"},{provide:QC,useValue:function nW(){nT.makeCurrent()},multi:!0},{provide:cs,useFactory:function iW(){return function FB(n){ZE=n}(document),document},deps:[]}],sW=VM(U3,"browser",$N),oW=new Ie(""),HN=[{provide:m_,useClass:class $G{addToWindow(e){Lt.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Y(5103,!1);return s},Lt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Lt.getAllAngularRootElements=()=>e.getAllRootElements(),Lt.frameworkStabilizers||(Lt.frameworkStabilizers=[]),Lt.frameworkStabilizers.push(r=>{const i=Lt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Nf().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:NM,useClass:bw,deps:[Nt,Aw,m_]},{provide:bw,useClass:bw,deps:[Nt,Aw,m_]}],zN=[{provide:uI,useValue:"root"},{provide:qo,useFactory:function rW(){return new qo},deps:[]},{provide:rT,useClass:XG,multi:!0,deps:[cs,Nt,Ss]},{provide:rT,useClass:tW,multi:!0,deps:[cs]},aT,kN,xN,{provide:cf,useExisting:aT},{provide:SN,useClass:HG,deps:[]},[]];let qN=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Om,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(fe(oW,12))}}static{this.\u0275mod=Wn({type:n})}static{this.\u0275inj=Gn({providers:[...zN,...HN],imports:[Zw,j3]})}}return n})();typeof window<"u"&&window;let KN=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:function(r){let i=null;return i=r?new(r||n):fe(QN),i},providedIn:"root"})}}return n})(),QN=(()=>{class n extends KN{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case ss.NONE:return r;case ss.HTML:return Ys(r,"HTML")?Fi(r):LC(this._doc,String(r)).toString();case ss.STYLE:return Ys(r,"Style")?Fi(r):r;case ss.SCRIPT:if(Ys(r,"Script"))return Fi(r);throw new Y(5200,!1);case ss.URL:return Ys(r,"URL")?Fi(r):Sm(String(r));case ss.RESOURCE_URL:if(Ys(r,"ResourceURL"))return Fi(r);throw new Y(5201,!1);default:throw new Y(5202,!1)}}bypassSecurityTrustHtml(t){return function HB(n){return new VB(n)}(t)}bypassSecurityTrustStyle(t){return function zB(n){return new LB(n)}(t)}bypassSecurityTrustScript(t){return function qB(n){return new BB(n)}(t)}bypassSecurityTrustUrl(t){return function GB(n){return new UB(n)}(t)}bypassSecurityTrustResourceUrl(t){return function WB(n){return new jB(n)}(t)}static{this.\u0275fac=function(r){return new(r||n)(fe(cs))}}static{this.\u0275prov=Ue({token:n,factory:function(r){let i=null;return i=r?new r:function hW(n){return new QN(n.get(cs))}(fe(yi)),i},providedIn:"root"})}}return n})();class JN{}class fW{}const Xo="*";function pW(n,e){return{type:7,name:n,definitions:e,options:{}}}function gW(n,e=null){return{type:4,styles:e,timings:n}}function XN(n,e=null){return{type:2,steps:n,options:e}}function dT(n){return{type:6,styles:n,offset:null}}function mW(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function _W(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}class Vf{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class ZN{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function ex(n){return new Y(3e3,!1)}function za(n){switch(n.length){case 0:return new Vf;case 1:return n[0];default:return new ZN(n)}}function tx(n,e,t=new Map,r=new Map){const i=[],s=[];let o=-1,a=null;if(e.forEach(u=>{const d=u.get("offset"),g=d==o,m=g&&a||new Map;u.forEach((v,T)=>{let D=T,S=v;if("offset"!==T)switch(D=n.normalizePropertyName(D,i),S){case"!":S=t.get(T);break;case Xo:S=r.get(T);break;default:S=n.normalizeStyleValue(T,D,S,i)}m.set(D,S)}),g||s.push(m),a=m,o=d}),i.length)throw function UW(n){return new Y(3502,!1)}();return s}function fT(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&pT(t,"start",n)));break;case"done":n.onDone(()=>r(t&&pT(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&pT(t,"destroy",n)))}}function pT(n,e,t){const s=gT(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function gT(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Bi(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function nx(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const XW=(()=>typeof document>"u"?null:document.documentElement)();function mT(n){const e=n.parentNode||n.host||null;return e===XW?null:e}let al=null,rx=!1;function ix(n,e){for(;e;){if(e===n)return!0;e=mT(e)}return!1}function sx(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let ox=(()=>{class n{validateStyleProperty(t){return function e9(n){al||(al=function t9(){return typeof document<"u"?document.body:null}()||{},rx=!!al.style&&"WebkitAppearance"in al.style);let e=!0;return al.style&&!function ZW(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in al.style,!e&&rx&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in al.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return ix(t,r)}getParentElement(t){return mT(t)}query(t,r,i){return sx(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],u){return new Vf(i,s)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})(),_T=(()=>{class n{static{this.NOOP=new ox}}return n})();const n9=1e3,yT="ng-enter",F_="ng-leave",V_="ng-trigger",L_=".ng-trigger",ux="ng-animating",vT=".ng-animating";function Zo(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:ET(parseFloat(e[1]),e[2])}function ET(n,e){return"s"===e?n*n9:n}function B_(n,e,t){return n.hasOwnProperty("duration")?n:function i9(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(ex()),{duration:0,delay:0,easing:""};i=ET(parseFloat(a[1]),a[2]);const u=a[3];null!=u&&(s=ET(parseFloat(u),a[4]));const d=a[5];d&&(o=d)}else i=n;if(!t){let a=!1,u=e.length;i<0&&(e.push(function yW(){return new Y(3100,!1)}()),a=!0),s<0&&(e.push(function vW(){return new Y(3101,!1)}()),a=!0),a&&e.splice(u,0,ex())}return{duration:i,delay:s,easing:o}}(n,e,t)}function Lf(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function lx(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function qa(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function so(n,e,t){e.forEach((r,i)=>{const s=wT(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function ul(n,e){e.forEach((t,r)=>{const i=wT(r);n.style[i]=""})}function Bf(n){return Array.isArray(n)?1==n.length?n[0]:XN(n):n}const IT=new RegExp("{{\\s*(.+?)\\s*}}","g");function dx(n){let e=[];if("string"==typeof n){let t;for(;t=IT.exec(n);)e.push(t[1]);IT.lastIndex=0}return e}function Uf(n,e,t){const r=n.toString(),i=r.replace(IT,(s,o)=>{let a=e[o];return null==a&&(t.push(function IW(n){return new Y(3003,!1)}()),a=""),a.toString()});return i==r?n:i}function U_(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const a9=/-+([a-z0-9])/g;function wT(n){return n.replace(a9,(...e)=>e[1].toUpperCase())}function Ui(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function wW(n){return new Y(3004,!1)}()}}function hx(n,e){return window.getComputedStyle(n)[e]}const j_="*";function c9(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function d9(n,e,t){if(":"==n[0]){const u=function h9(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function FW(n){return new Y(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof u)return void e.push(u);n=u}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function kW(n){return new Y(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(fx(i,o));"<"==s[0]&&!(i==j_&&o==j_)&&e.push(fx(o,i))}(r,t,e)):t.push(n),t}const $_=new Set(["true","1"]),H_=new Set(["false","0"]);function fx(n,e){const t=$_.has(n)||H_.has(n),r=$_.has(e)||H_.has(e);return(i,s)=>{let o=n==j_||n==i,a=e==j_||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?$_.has(n):H_.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?$_.has(e):H_.has(e)),o&&a}}const f9=new RegExp("s*:selfs*,?","g");function TT(n,e,t,r){return new p9(n).build(e,t,r)}class p9{constructor(e){this._driver=e}build(e,t,r){const i=new _9(t);return this._resetContextStyleTimingState(i),Ui(this,Bf(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function bW(){return new Y(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const u=a,d=u.name;d.toString().split(/\s*,\s*/).forEach(g=>{u.name=g,s.push(this.visitState(u,t))}),u.name=d}else if(1==a.type){const u=this.visitTransition(a,t);r+=u.queryCount,i+=u.depCount,o.push(u)}else t.errors.push(function AW(){return new Y(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(u=>{dx(u).forEach(d=>{o.hasOwnProperty(d)||s.add(d)})})}),s.size&&(U_(s.values()),t.errors.push(function DW(n,e){return new Y(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Ui(this,Bf(e.animation),t);return{type:1,matchers:c9(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:ll(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Ui(this,r,t)),options:ll(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=Ui(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:3,steps:s,options:ll(e.options)}}visitAnimate(e,t){const r=function v9(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return bT(B_(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=bT(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=B_(t,e);return bT(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:dT({});if(5==s.type)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const d={};r.easing&&(d.easing=r.easing),o=dT(d)}t.currentTime+=r.duration+r.delay;const u=this.visitStyle(o,t);u.isEmptyStep=a,i=u}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===Xo?r.push(a):t.errors.push(new Y(3002,!1)):r.push(lx(a));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let u of a.values())if(u.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,u)=>{const d=t.collectedStyles.get(t.currentQuerySelector),g=d.get(u);let m=!0;g&&(s!=i&&s>=g.startTime&&i<=g.endTime&&(t.errors.push(function SW(n,e,t,r,i){return new Y(3010,!1)}()),m=!1),s=g.startTime),m&&d.set(u,{startTime:s,endTime:i}),t.options&&function o9(n,e,t){const r=e.params||{},i=dx(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function EW(n){return new Y(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function PW(){return new Y(3011,!1)}()),r;let s=0;const o=[];let a=!1,u=!1,d=0;const g=e.steps.map(W=>{const B=this._makeStyleAst(W,t);let z=null!=B.offset?B.offset:function y9(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(B.styles),te=0;return null!=z&&(s++,te=B.offset=z),u=u||te<0||te>1,a=a||te<d,d=te,o.push(te),B});u&&t.errors.push(function RW(){return new Y(3012,!1)}()),a&&t.errors.push(function MW(){return new Y(3200,!1)}());const m=e.steps.length;let v=0;s>0&&s<m?t.errors.push(function NW(){return new Y(3202,!1)}()):0==s&&(v=1/(m-1));const T=m-1,D=t.currentTime,S=t.currentAnimateTimings,x=S.duration;return g.forEach((W,B)=>{const z=v>0?B==T?1:v*B:o[B],te=z*x;t.currentTime=D+S.delay+te,S.duration=te,this._validateStyleAst(W,t),W.offset=z,r.styles.push(W)}),r}visitReference(e,t){return{type:8,animation:Ui(this,Bf(e.animation),t),options:ll(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:ll(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:ll(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function g9(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(f9,"")),n=n.replace(/@\*/g,L_).replace(/@\w+/g,t=>L_+"-"+t.slice(1)).replace(/:animating/g,vT),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Bi(t.collectedStyles,t.currentQuerySelector,new Map);const a=Ui(this,Bf(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:ll(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function xW(){return new Y(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:B_(e.timings,t.errors,!0);return{type:12,animation:Ui(this,Bf(e.animation),t),timings:r,options:null}}}class _9{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function ll(n){return n?(n=Lf(n)).params&&(n.params=function m9(n){return n?Lf(n):null}(n.params)):n={},n}function bT(n,e,t){return{duration:n,delay:e,easing:t}}function AT(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class z_{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const w9=new RegExp(":enter","g"),b9=new RegExp(":leave","g");function DT(n,e,t,r,i,s=new Map,o=new Map,a,u,d=[]){return(new A9).buildKeyframes(n,e,t,r,i,s,o,a,u,d)}class A9{buildKeyframes(e,t,r,i,s,o,a,u,d,g=[]){d=d||new z_;const m=new CT(e,t,d,i,s,g,[]);m.options=u;const v=u.delay?Zo(u.delay):0;m.currentTimeline.delayNextStep(v),m.currentTimeline.setStyles([o],null,m.errors,u),Ui(this,r,m);const T=m.timelines.filter(D=>D.containsAnimation());if(T.length&&a.size){let D;for(let S=T.length-1;S>=0;S--){const x=T[S];if(x.element===t){D=x;break}}D&&!D.allowOnlyTimelineStyles()&&D.setStyles([a],null,m.errors,u)}return T.length?T.map(D=>D.buildKeyframes()):[AT(t,[],[],[],0,v,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:Zo(Uf(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?Zo(r.duration):null,a=null!=r.delay?Zo(r.delay):null;return 0!==o&&e.forEach(u=>{const d=t.appendInstructionToTimeline(u,o,a);s=Math.max(s,d.duration+d.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Ui(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=q_);const o=Zo(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Ui(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Zo(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),Ui(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return B_(t.params?Uf(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(u=>{a.forwardTime((u.offset||0)*s),a.setStyles(u.styles,u.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Zo(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=q_);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let u=null;a.forEach((d,g)=>{t.currentQueryIndex=g;const m=t.createSubContext(e.options,d);s&&m.delayNextStep(s),d===t.element&&(u=m.currentTimeline),Ui(this,e.animation,m),m.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,m.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),u&&(t.currentTimeline.mergeTimelineCollectedStyles(u),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let u=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":u=a-u;break;case"full":u=r.currentStaggerTime}const g=t.currentTimeline;u&&g.delayNextStep(u);const m=g.currentTime;Ui(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-m+(i.startTime-r.currentTimeline.startTime)}}const q_={};class CT{constructor(e,t,r,i,s,o,a,u){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=q_,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new G_(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Zo(r.duration)),null!=r.delay&&(i.delay=Zo(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Uf(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new CT(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=q_,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new D9(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(w9,"."+this._enterClassName)).replace(b9,"."+this._leaveClassName);let d=this._driver.query(this.element,e,1!=r);0!==r&&(d=r<0?d.slice(d.length+r,d.length):d.slice(0,r)),a.push(...d)}return!s&&0==a.length&&o.push(function OW(n){return new Y(3014,!1)}()),a}}class G_{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new G_(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Xo),this._currentKeyframe.set(t,Xo);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},o=function C9(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,Xo)}else qa(i,t)}),t}(e,this._globalTimelineStyles);for(let[a,u]of o){const d=Uf(u,s,r);this._pendingStyles.set(a,d),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Xo),this._updateStyle(a,d)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,u)=>{const d=qa(a,new Map,this._backFill);d.forEach((g,m)=>{"!"===g?e.add(m):g===Xo&&t.add(m)}),r||d.set("offset",u/this.duration),i.push(d)});const s=e.size?U_(e.values()):[],o=t.size?U_(t.values()):[];if(r){const a=i[0],u=new Map(a);a.set("offset",0),u.set("offset",1),i=[a,u]}return AT(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class D9 extends G_{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,u=qa(e[0]);u.set("offset",0),s.push(u);const d=qa(e[0]);d.set("offset",mx(a)),s.push(d);const g=e.length-1;for(let m=1;m<=g;m++){let v=qa(e[m]);const T=v.get("offset");v.set("offset",mx((t+T*r)/o)),s.push(v)}r=o,t=0,i="",e=s}return AT(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function mx(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class ST{}const S9=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class P9 extends ST{normalizePropertyName(e,t){return wT(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(S9.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function TW(n,e){return new Y(3005,!1)}())}return o+s}}function _x(n,e,t,r,i,s,o,a,u,d,g,m,v){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:u,preStyleProps:d,postStyleProps:g,totalTime:m,errors:v}}const PT={};class yx{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function R9(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,u,d,g){const m=[],v=this.ast.options&&this.ast.options.params||PT,D=this.buildStyles(r,a&&a.params||PT,m),S=u&&u.params||PT,x=this.buildStyles(i,S,m),W=new Set,B=new Map,z=new Map,te="void"===i,he={params:M9(S,v),delay:this.ast.options?.delay},Te=g?[]:DT(e,t,this.ast.animation,s,o,D,x,he,d,m);let L=0;if(Te.forEach(F=>{L=Math.max(F.duration+F.delay,L)}),m.length)return _x(t,this._triggerName,r,i,te,D,x,[],[],B,z,L,m);Te.forEach(F=>{const U=F.element,H=Bi(B,U,new Set);F.preStyleProps.forEach(V=>H.add(V));const K=Bi(z,U,new Set);F.postStyleProps.forEach(V=>K.add(V)),U!==t&&W.add(U)});const R=U_(W.values());return _x(t,this._triggerName,r,i,te,D,x,Te,R,B,z,L)}}function M9(n,e){const t=Lf(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class N9{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Lf(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(i[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=Uf(o,i,t));const u=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,u,o,t),r.set(a,o)})}),r}}class O9{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new N9(i.style,i.options&&i.options.params||{},r))}),vx(this.states,"true","1"),vx(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new yx(e,i,this.states))}),this.fallbackTransition=function k9(n,e,t){return new yx(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function vx(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const F9=new z_;class V9{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=TT(this._driver,t,r,[]);if(r.length)throw function jW(n){return new Y(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=tx(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=DT(this._driver,t,s,yT,F_,new Map,new Map,r,F9,i),o.forEach(g=>{const m=Bi(a,g.element,new Map);g.postStyleProps.forEach(v=>m.set(v,null))})):(i.push(function $W(){return new Y(3300,!1)}()),o=[]),i.length)throw function HW(n){return new Y(3504,!1)}();a.forEach((g,m)=>{g.forEach((v,T)=>{g.set(T,this._driver.computeStyle(m,T,Xo))})});const d=za(o.map(g=>{const m=a.get(g.element);return this._buildPlayer(g,new Map,m)}));return this._playersById.set(e,d),d.onDestroy(()=>this.destroy(e)),this.players.push(d),d}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function zW(n){return new Y(3301,!1)}();return t}listen(e,t,r,i){const s=gT(t,"","","");return fT(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const Ex="ng-animate-queued",RT="ng-animate-disabled",$9=[],Ix={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},H9={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Os="__ng_removed";class MT{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function W9(n){return n??null}(r?e.value:e),r){const s=Lf(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const jf="void",NT=new MT(jf);class z9{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,fs(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function qW(n,e){return new Y(3302,!1)}();if(null==r||0==r.length)throw function GW(n){return new Y(3303,!1)}();if(!function K9(n){return"start"==n||"done"==n}(r))throw function WW(n,e){return new Y(3400,!1)}();const s=Bi(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=Bi(this._engine.statesByElement,e,new Map);return a.has(t)||(fs(e,V_),fs(e,V_+"-"+t),a.set(t,NT)),()=>{this._engine.afterFlush(()=>{const u=s.indexOf(o);u>=0&&s.splice(u,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function KW(n){return new Y(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new xT(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(fs(e,V_),fs(e,V_+"-"+t),this._engine.statesByElement.set(e,a=new Map));let u=a.get(t);const d=new MT(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&u&&d.absorbOptions(u.options),a.set(t,d),u||(u=NT),d.value!==jf&&u.value===d.value){if(!function J9(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(u.params,d.params)){const S=[],x=s.matchStyles(u.value,u.params,S),W=s.matchStyles(d.value,d.params,S);S.length?this._engine.reportError(S):this._engine.afterFlush(()=>{ul(e,x),so(e,W)})}return}const v=Bi(this._engine.playersByElement,e,[]);v.forEach(S=>{S.namespaceId==this.id&&S.triggerName==t&&S.queued&&S.destroy()});let T=s.matchTransition(u.value,d.value,e,d.params),D=!1;if(!T){if(!i)return;T=s.fallbackTransition,D=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:T,fromState:u,toState:d,player:o,isFallbackTransition:D}),D||(fs(e,Ex),o.onStart(()=>{id(e,Ex)})),o.onDone(()=>{let S=this.players.indexOf(o);S>=0&&this.players.splice(S,1);const x=this._engine.playersByElement.get(e);if(x){let W=x.indexOf(o);W>=0&&x.splice(W,1)}}),this.players.push(o),v.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,L_,!0);r.forEach(i=>{if(i[Os])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((u,d)=>{if(o.set(d,u.value),this._triggers.has(d)){const g=this.trigger(e,d,jf,i);g&&a.push(g)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&za(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const u=this._triggers.get(o).fallbackTransition,d=r.get(o)||NT,g=new MT(jf),m=new xT(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:u,fromState:d,toState:g,player:m,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Os];(!s||s===Ix)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){fs(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const u=gT(s,r.triggerName,r.fromState.value,r.toState.value);u._data=e,fT(r.player,a.phase,u,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class q9{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new z9(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const u=i.get(a);if(u){const d=r.indexOf(u);r.splice(d+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(W_(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!W_(t))return;const s=t[Os];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),fs(e,RT)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),id(e,RT))}removeNode(e,t,r){if(W_(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Os]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return W_(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,L_,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,vT,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return za(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Os];if(t&&t.setForRemoval){if(e[Os]=Ix,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(RT)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)fs(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?za(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function QW(n){return new Y(3402,!1)}()}_flushAnimations(e,t){const r=new z_,i=[],s=new Map,o=[],a=new Map,u=new Map,d=new Map,g=new Set;this.disabledNodes.forEach(Se=>{g.add(Se);const Ne=this.driver.query(Se,".ng-animate-queued",!0);for(let Fe=0;Fe<Ne.length;Fe++)g.add(Ne[Fe])});const m=this.bodyNode,v=Array.from(this.statesByElement.keys()),T=bx(v,this.collectedEnterElements),D=new Map;let S=0;T.forEach((Se,Ne)=>{const Fe=yT+S++;D.set(Ne,Fe),Se.forEach(ct=>fs(ct,Fe))});const x=[],W=new Set,B=new Set;for(let Se=0;Se<this.collectedLeaveElements.length;Se++){const Ne=this.collectedLeaveElements[Se],Fe=Ne[Os];Fe&&Fe.setForRemoval&&(x.push(Ne),W.add(Ne),Fe.hasAnimation?this.driver.query(Ne,".ng-star-inserted",!0).forEach(ct=>W.add(ct)):B.add(Ne))}const z=new Map,te=bx(v,Array.from(W));te.forEach((Se,Ne)=>{const Fe=F_+S++;z.set(Ne,Fe),Se.forEach(ct=>fs(ct,Fe))}),e.push(()=>{T.forEach((Se,Ne)=>{const Fe=D.get(Ne);Se.forEach(ct=>id(ct,Fe))}),te.forEach((Se,Ne)=>{const Fe=z.get(Ne);Se.forEach(ct=>id(ct,Fe))}),x.forEach(Se=>{this.processLeaveNode(Se)})});const he=[],Te=[];for(let Se=this._namespaceList.length-1;Se>=0;Se--)this._namespaceList[Se].drainQueuedTransitions(t).forEach(Fe=>{const ct=Fe.player,Un=Fe.element;if(he.push(ct),this.collectedEnterElements.length){const Pn=Un[Os];if(Pn&&Pn.setForMove){if(Pn.previousTriggersValues&&Pn.previousTriggersValues.has(Fe.triggerName)){const da=Pn.previousTriggersValues.get(Fe.triggerName),Ti=this.statesByElement.get(Fe.element);if(Ti&&Ti.has(Fe.triggerName)){const ha=Ti.get(Fe.triggerName);ha.value=da,Ti.set(Fe.triggerName,ha)}}return void ct.destroy()}}const ms=!m||!this.driver.containsElement(m,Un),Sn=z.get(Un),ln=D.get(Un),cn=this._buildInstruction(Fe,r,ln,Sn,ms);if(cn.errors&&cn.errors.length)return void Te.push(cn);if(ms)return ct.onStart(()=>ul(Un,cn.fromStyles)),ct.onDestroy(()=>so(Un,cn.toStyles)),void i.push(ct);if(Fe.isFallbackTransition)return ct.onStart(()=>ul(Un,cn.fromStyles)),ct.onDestroy(()=>so(Un,cn.toStyles)),void i.push(ct);const yu=[];cn.timelines.forEach(Pn=>{Pn.stretchStartingKeyframe=!0,this.disabledNodes.has(Pn.element)||yu.push(Pn)}),cn.timelines=yu,r.append(Un,cn.timelines),o.push({instruction:cn,player:ct,element:Un}),cn.queriedElements.forEach(Pn=>Bi(a,Pn,[]).push(ct)),cn.preStyleProps.forEach((Pn,da)=>{if(Pn.size){let Ti=u.get(da);Ti||u.set(da,Ti=new Set),Pn.forEach((ha,vu)=>Ti.add(vu))}}),cn.postStyleProps.forEach((Pn,da)=>{let Ti=d.get(da);Ti||d.set(da,Ti=new Set),Pn.forEach((ha,vu)=>Ti.add(vu))})});if(Te.length){const Se=[];Te.forEach(Ne=>{Se.push(function YW(n,e){return new Y(3505,!1)}())}),he.forEach(Ne=>Ne.destroy()),this.reportError(Se)}const L=new Map,R=new Map;o.forEach(Se=>{const Ne=Se.element;r.has(Ne)&&(R.set(Ne,Ne),this._beforeAnimationBuild(Se.player.namespaceId,Se.instruction,L))}),i.forEach(Se=>{const Ne=Se.element;this._getPreviousPlayers(Ne,!1,Se.namespaceId,Se.triggerName,null).forEach(ct=>{Bi(L,Ne,[]).push(ct),ct.destroy()})});const F=x.filter(Se=>Dx(Se,u,d)),U=new Map;Tx(U,this.driver,B,d,Xo).forEach(Se=>{Dx(Se,u,d)&&F.push(Se)});const K=new Map;T.forEach((Se,Ne)=>{Tx(K,this.driver,new Set(Se),u,"!")}),F.forEach(Se=>{const Ne=U.get(Se),Fe=K.get(Se);U.set(Se,new Map([...Ne?.entries()??[],...Fe?.entries()??[]]))});const V=[],gs=[],_u={};o.forEach(Se=>{const{element:Ne,player:Fe,instruction:ct}=Se;if(r.has(Ne)){if(g.has(Ne))return Fe.onDestroy(()=>so(Ne,ct.toStyles)),Fe.disabled=!0,Fe.overrideTotalTime(ct.totalTime),void i.push(Fe);let Un=_u;if(R.size>1){let Sn=Ne;const ln=[];for(;Sn=Sn.parentNode;){const cn=R.get(Sn);if(cn){Un=cn;break}ln.push(Sn)}ln.forEach(cn=>R.set(cn,Un))}const ms=this._buildAnimation(Fe.namespaceId,ct,L,s,K,U);if(Fe.setRealPlayer(ms),Un===_u)V.push(Fe);else{const Sn=this.playersByElement.get(Un);Sn&&Sn.length&&(Fe.parentPlayer=za(Sn)),i.push(Fe)}}else ul(Ne,ct.fromStyles),Fe.onDestroy(()=>so(Ne,ct.toStyles)),gs.push(Fe),g.has(Ne)&&i.push(Fe)}),gs.forEach(Se=>{const Ne=s.get(Se.element);if(Ne&&Ne.length){const Fe=za(Ne);Se.setRealPlayer(Fe)}}),i.forEach(Se=>{Se.parentPlayer?Se.syncPlayerEvents(Se.parentPlayer):Se.destroy()});for(let Se=0;Se<x.length;Se++){const Ne=x[Se],Fe=Ne[Os];if(id(Ne,F_),Fe&&Fe.hasAnimation)continue;let ct=[];if(a.size){let ms=a.get(Ne);ms&&ms.length&&ct.push(...ms);let Sn=this.driver.query(Ne,vT,!0);for(let ln=0;ln<Sn.length;ln++){let cn=a.get(Sn[ln]);cn&&cn.length&&ct.push(...cn)}}const Un=ct.filter(ms=>!ms.destroyed);Un.length?Q9(this,Ne,Un):this.processLeaveNode(Ne)}return x.length=0,V.forEach(Se=>{this.players.push(Se),Se.onDone(()=>{Se.destroy();const Ne=this.players.indexOf(Se);this.players.splice(Ne,1)}),Se.play()}),V}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const u=!s||s==jf;a.forEach(d=>{d.queued||!u&&d.triggerName!=i||o.push(d)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const u of t.timelines){const d=u.element,g=d!==s,m=Bi(r,d,[]);this._getPreviousPlayers(d,g,o,a,t.toState).forEach(T=>{const D=T.getRealPlayer();D.beforeDestroy&&D.beforeDestroy(),T.destroy(),m.push(T)})}ul(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,u=t.element,d=[],g=new Set,m=new Set,v=t.timelines.map(D=>{const S=D.element;g.add(S);const x=S[Os];if(x&&x.removedBeforeQueried)return new Vf(D.duration,D.delay);const W=S!==u,B=function Y9(n){const e=[];return Ax(n,e),e}((r.get(S)||$9).map(L=>L.getRealPlayer())).filter(L=>!!L.element&&L.element===S),z=s.get(S),te=o.get(S),he=tx(this._normalizer,D.keyframes,z,te),Te=this._buildPlayer(D,he,B);if(D.subTimeline&&i&&m.add(S),W){const L=new xT(e,a,S);L.setRealPlayer(Te),d.push(L)}return Te});d.forEach(D=>{Bi(this.playersByQueriedElement,D.element,[]).push(D),D.onDone(()=>function G9(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,D.element,D))}),g.forEach(D=>fs(D,ux));const T=za(v);return T.onDestroy(()=>{g.forEach(D=>id(D,ux)),so(u,t.toStyles)}),m.forEach(D=>{Bi(i,D,[]).push(T)}),T}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Vf(e.duration,e.delay)}}class xT{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Vf,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>fT(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Bi(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function W_(n){return n&&1===n.nodeType}function wx(n,e){const t=n.style.display;return n.style.display=e??"none",t}function Tx(n,e,t,r,i){const s=[];t.forEach(u=>s.push(wx(u)));const o=[];r.forEach((u,d)=>{const g=new Map;u.forEach(m=>{const v=e.computeStyle(d,m,i);g.set(m,v),(!v||0==v.length)&&(d[Os]=H9,o.push(d))}),n.set(d,g)});let a=0;return t.forEach(u=>wx(u,s[a++])),o}function bx(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let u=s.get(a);if(u)return u;const d=a.parentNode;return u=t.has(d)?d:i.has(d)?1:o(d),s.set(a,u),u}return e.forEach(a=>{const u=o(a);1!==u&&t.get(u).push(a)}),t}function fs(n,e){n.classList?.add(e)}function id(n,e){n.classList?.remove(e)}function Q9(n,e,t){za(t).onDone(()=>n.processLeaveNode(e))}function Ax(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof ZN?Ax(r.players,e):e.push(r)}}function Dx(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class K_{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new q9(e,t,r),this._timelineEngine=new V9(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const u=[],g=TT(this._driver,s,u,[]);if(u.length)throw function BW(n,e){return new Y(3404,!1)}();a=function x9(n,e,t){return new O9(n,e,t)}(i,g,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=nx(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=nx(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let Z9=(()=>{class n{static{this.initialStylesByElement=new WeakMap}constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&so(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(so(this._element,this._initialStyles),this._endStyles&&(so(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(ul(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ul(this._element,this._endStyles),this._endStyles=null),so(this._element,this._initialStyles),this._state=3)}}return n})();function OT(n){let e=null;return n.forEach((t,r)=>{(function e6(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class Cx{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:hx(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class t6{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return ix(e,t)}getParentElement(e){return mT(e)}query(e,t,r){return sx(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,o=[]){const u={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(u.easing=s);const d=new Map,g=o.filter(T=>T instanceof Cx);(function u9(n,e){return 0===n||0===e})(r,i)&&g.forEach(T=>{T.currentSnapshot.forEach((D,S)=>d.set(S,D))});let m=function s9(n){return n.length?n[0]instanceof Map?n:n.map(e=>lx(e)):[]}(t).map(T=>qa(T));m=function l9(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,hx(n,a)))}}return e}(e,m,d);const v=function X9(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=OT(e[0]),e.length>1&&(r=OT(e[e.length-1]))):e instanceof Map&&(t=OT(e)),t||r?new Z9(n,t,r):null}(e,m);return new Cx(e,m,u,v)}}let n6=(()=>{class n extends JN{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:Or.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?XN(t):t;return Sx(this._renderer,null,r,"register",[i]),new r6(r,this._renderer)}static{this.\u0275fac=function(r){return new(r||n)(fe(cf),fe(cs))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();class r6 extends fW{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new i6(this._id,e,t||{},this._renderer)}}class i6{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Sx(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Sx(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const Px="@.disabled";let s6=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,r.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let g=this._rendererCache.get(s);return g||(g=new Rx("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,g)),g}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const u=g=>{Array.isArray(g)?g.forEach(u):this.engine.registerTrigger(o,a,t,g.name,g)};return r.data.animation.forEach(u),new o6(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static{this.\u0275fac=function(r){return new(r||n)(fe(cf),fe(K_),fe(Nt))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();class Rx{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==Px?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class o6 extends Rx{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Px?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function a6(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function u6(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}let l6=(()=>{class n extends K_{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(r){return new(r||n)(fe(cs),fe(_T),fe(ST),fe(nd))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();const Mx=[{provide:JN,useClass:n6},{provide:ST,useFactory:function c6(){return new P9}},{provide:K_,useClass:l6},{provide:cf,useFactory:function d6(n,e,t){return new s6(n,e,t)},deps:[aT,K_,Nt]}],kT=[{provide:_T,useFactory:()=>new t6},{provide:YC,useValue:"BrowserAnimations"},...Mx],Nx=[{provide:_T,useClass:ox},{provide:YC,useValue:"NoopAnimations"},...Mx];let h6=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?Nx:kT}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Wn({type:n})}static{this.\u0275inj=Gn({providers:kT,imports:[qN]})}}return n})();function $f(n,e){return function(r){return r.lift(new p6(n,e))}}class p6{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new g6(e,this.predicate,this.thisArg))}}class g6 extends xe{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}function xx(n){return e=>e.lift(new m6(n))}class m6{constructor(e){this.callback=e}call(e,t){return t.subscribe(new _6(e,this.callback))}}class _6 extends xe{constructor(e,t){super(e),this.add(new ee(t))}}class Y_{}class J_{}class oo{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof oo?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new oo;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof oo?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class y6{encodeKey(e){return Ox(e)}encodeValue(e){return Ox(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const E6=/%(\d[a-f0-9])/gi,I6={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Ox(n){return encodeURIComponent(n).replace(E6,(e,t)=>I6[t]??e)}function X_(n){return`${n}`}class Ga{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new y6,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function v6(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=t.get(o)||[];u.push(a),t.set(o,u)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(X_):[X_(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ga({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(X_(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(X_(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class w6{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function kx(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Fx(n){return typeof Blob<"u"&&n instanceof Blob}function Vx(n){return typeof FormData<"u"&&n instanceof FormData}class Hf{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function T6(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new oo),this.context||(this.context=new w6),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Ga,this.urlWithParams=t}serializeBody(){return null===this.body?null:kx(this.body)||Fx(this.body)||Vx(this.body)||function b6(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ga?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Vx(this.body)?null:Fx(this.body)?this.body.type||null:kx(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ga?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let u=e.headers||this.headers,d=e.params||this.params;const g=e.context??this.context;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((m,v)=>m.set(v,e.setHeaders[v]),u)),e.setParams&&(d=Object.keys(e.setParams).reduce((m,v)=>m.set(v,e.setParams[v]),d)),new Hf(t,r,s,{params:d,headers:u,context:g,reportProgress:a,responseType:i,withCredentials:o})}}var sd=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(sd||{});class FT{constructor(e,t=200,r="OK"){this.headers=e.headers||new oo,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class VT extends FT{constructor(e={}){super(e),this.type=sd.ResponseHeader}clone(e={}){return new VT({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class od extends FT{constructor(e={}){super(e),this.type=sd.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new od({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Lx extends FT{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function LT(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Bx=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Hf)s=t;else{let u,d;u=i.headers instanceof oo?i.headers:new oo(i.headers),i.params&&(d=i.params instanceof Ga?i.params:new Ga({fromObject:i.params})),s=new Hf(t,r,void 0!==i.body?i.body:null,{headers:u,context:i.context,params:d,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=Tt(s).pipe(function f6(n,e){return _r(n,e,1)}(u=>this.handler.handle(u)));if(t instanceof Hf||"events"===i.observe)return o;const a=o.pipe($f(u=>u instanceof od));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(At(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(At(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(At(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return a.pipe(At(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Ga).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,LT(i,r))}post(t,r,i={}){return this.request("POST",t,LT(i,r))}put(t,r,i={}){return this.request("PUT",t,LT(i,r))}static{this.\u0275fac=function(r){return new(r||n)(fe(Y_))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();function $x(n,e){return e(n)}function D6(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const S6=new Ie(""),zf=new Ie(""),Hx=new Ie("");function P6(){let n=null;return(e,t)=>{null===n&&(n=(yt(S6,{optional:!0})??[]).reduceRight(D6,$x));const r=yt(Iw),i=r.add();return n(e,t).pipe(xx(()=>r.remove(i)))}}let zx=(()=>{class n extends Y_{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=yt(Iw)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(zf),...this.injector.get(Hx,[])]));this.chain=i.reduceRight((s,o)=>function C6(n,e,t){return(r,i)=>t.runInContext(()=>e(r,s=>n(s,i)))}(s,o,this.injector),$x)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(xx(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||n)(fe(J_),fe(Js))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();const x6=/^\)\]\}',?\n/;let Gx=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Y(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?er(r.\u0275loadImpl()):Tt(null)).pipe(wn(()=>new rt(s=>{const o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((S,x)=>o.setRequestHeader(S,x.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const S=t.detectContentTypeHeader();null!==S&&o.setRequestHeader("Content-Type",S)}if(t.responseType){const S=t.responseType.toLowerCase();o.responseType="json"!==S?S:"text"}const a=t.serializeBody();let u=null;const d=()=>{if(null!==u)return u;const S=o.statusText||"OK",x=new oo(o.getAllResponseHeaders()),W=function O6(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return u=new VT({headers:x,status:o.status,statusText:S,url:W}),u},g=()=>{let{headers:S,status:x,statusText:W,url:B}=d(),z=null;204!==x&&(z=typeof o.response>"u"?o.responseText:o.response),0===x&&(x=z?200:0);let te=x>=200&&x<300;if("json"===t.responseType&&"string"==typeof z){const he=z;z=z.replace(x6,"");try{z=""!==z?JSON.parse(z):null}catch(Te){z=he,te&&(te=!1,z={error:Te,text:z})}}te?(s.next(new od({body:z,headers:S,status:x,statusText:W,url:B||void 0})),s.complete()):s.error(new Lx({error:z,headers:S,status:x,statusText:W,url:B||void 0}))},m=S=>{const{url:x}=d(),W=new Lx({error:S,status:o.status||0,statusText:o.statusText||"Unknown Error",url:x||void 0});s.error(W)};let v=!1;const T=S=>{v||(s.next(d()),v=!0);let x={type:sd.DownloadProgress,loaded:S.loaded};S.lengthComputable&&(x.total=S.total),"text"===t.responseType&&o.responseText&&(x.partialText=o.responseText),s.next(x)},D=S=>{let x={type:sd.UploadProgress,loaded:S.loaded};S.lengthComputable&&(x.total=S.total),s.next(x)};return o.addEventListener("load",g),o.addEventListener("error",m),o.addEventListener("timeout",m),o.addEventListener("abort",m),t.reportProgress&&(o.addEventListener("progress",T),null!==a&&o.upload&&o.upload.addEventListener("progress",D)),o.send(a),s.next({type:sd.Sent}),()=>{o.removeEventListener("error",m),o.removeEventListener("abort",m),o.removeEventListener("load",g),o.removeEventListener("timeout",m),t.reportProgress&&(o.removeEventListener("progress",T),null!==a&&o.upload&&o.upload.removeEventListener("progress",D)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(fe(SN))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();const BT=new Ie("XSRF_ENABLED"),Wx=new Ie("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Kx=new Ie("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Qx{}let V6=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=vN(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(fe(cs),fe(Ss),fe(Wx))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();function L6(n,e){const t=n.url.toLowerCase();if(!yt(BT)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=yt(Qx).getToken(),i=yt(Kx);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Wa=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Wa||{});function cl(n,e){return{\u0275kind:n,\u0275providers:e}}function B6(...n){const e=[Bx,Gx,zx,{provide:Y_,useExisting:zx},{provide:J_,useExisting:Gx},{provide:zf,useValue:L6,multi:!0},{provide:BT,useValue:!0},{provide:Qx,useClass:V6}];for(const t of n)e.push(...t.\u0275providers);return function sI(n){return{\u0275providers:n}}(e)}const Yx=new Ie("LEGACY_INTERCEPTOR_FN");let j6=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Wn({type:n})}static{this.\u0275inj=Gn({providers:[B6(cl(Wa.LegacyInterceptors,[{provide:Yx,useFactory:P6},{provide:zf,useExisting:Yx,multi:!0}]))]})}}return n})();function ey(n,e){return new rt(t=>{const r=n.length;if(0===r)return void t.complete();const i=new Array(r);let s=0,o=0;for(let a=0;a<r;a++){const u=er(n[a]);let d=!1;t.add(u.subscribe({next:g=>{d||(d=!0,o++),i[a]=g},error:g=>t.error(g),complete:()=>{s++,(s===r||!d)&&(o===r&&t.next(e?e.reduce((g,m,v)=>(g[m]=i[v],g),{}):i),t.complete())}}))}})}let Jx=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(de(el),de(Ps))}}static{this.\u0275dir=qe({type:n})}}return n})(),dl=(()=>{class n extends Jx{static{this.\u0275fac=function(){let t;return function(i){return(t||(t=function Kn(n){return xr(()=>{const e=n.prototype.constructor,t=e[Is]||Wh(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Is]||Wh(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}(n)))(i||n)}}()}static{this.\u0275dir=qe({type:n,features:[xt]})}}return n})();const ao=new Ie("NgValueAccessor"),Q6={provide:ao,useExisting:O(()=>ty),multi:!0},J6=new Ie("CompositionEventMode");let ty=(()=>{class n extends Jx{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Y6(){const n=Nf()?Nf().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(de(el),de(Ps),de(J6,8))}}static{this.\u0275dir=qe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Tn("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[gn([Q6]),xt]})}}return n})();function Ka(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function Zx(n){return null!=n&&"number"==typeof n.length}const Vr=new Ie("NgValidators"),Qa=new Ie("NgAsyncValidators"),X6=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Z6{static min(e){return function e1(n){return e=>{if(Ka(e.value)||Ka(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function t1(n){return e=>{if(Ka(e.value)||Ka(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function n1(n){return Ka(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function r1(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function i1(n){return Ka(n.value)||X6.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function s1(n){return e=>Ka(e.value)||!Zx(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function o1(n){return e=>Zx(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function a1(n){if(!n)return ny;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Ka(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return f1(e)}static composeAsync(e){return p1(e)}}function ny(n){return null}function u1(n){return null!=n}function l1(n){return n_(n)?er(n):n}function c1(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function d1(n,e){return e.map(t=>t(n))}function h1(n){return n.map(e=>function e5(n){return!n.validate}(e)?e:t=>e.validate(t))}function f1(n){if(!n)return null;const e=n.filter(u1);return 0==e.length?null:function(t){return c1(d1(t,e))}}function UT(n){return null!=n?f1(h1(n)):null}function p1(n){if(!n)return null;const e=n.filter(u1);return 0==e.length?null:function(t){return function W6(...n){if(1===n.length){const e=n[0];if(hn(e))return ey(e,null);if(Qt(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return ey(t.map(r=>e[r]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return ey(n=1===n.length&&hn(n[0])?n[0]:n,null).pipe(At(t=>e(...t)))}return ey(n,null)}(d1(t,e).map(l1)).pipe(At(c1))}}function jT(n){return null!=n?p1(h1(n)):null}function g1(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function m1(n){return n._rawValidators}function _1(n){return n._rawAsyncValidators}function $T(n){return n?Array.isArray(n)?n:[n]:[]}function ry(n,e){return Array.isArray(n)?n.includes(e):n===e}function y1(n,e){const t=$T(e);return $T(n).forEach(i=>{ry(t,i)||t.push(i)}),t}function v1(n,e){return $T(e).filter(t=>!ry(n,t))}class E1{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=UT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=jT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ni extends E1{get formDirective(){return null}get path(){return null}}class Ya extends E1{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class I1{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let w1=(()=>{class n extends I1{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(de(Ya,2))}}static{this.\u0275dir=qe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&ja("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[xt]})}}return n})(),T1=(()=>{class n extends I1{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(de(ni,10))}}static{this.\u0275dir=qe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&ja("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[xt]})}}return n})();const qf="VALID",sy="INVALID",ad="PENDING",Gf="DISABLED";function qT(n){return(oy(n)?n.validators:n)||null}function GT(n,e){return(oy(e)?e.asyncValidators:n)||null}function oy(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class WT{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===qf}get invalid(){return this.status===sy}get pending(){return this.status==ad}get disabled(){return this.status===Gf}get enabled(){return this.status!==Gf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(y1(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(y1(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(v1(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(v1(e,this._rawAsyncValidators))}hasValidator(e){return ry(this._rawValidators,e)}hasAsyncValidator(e){return ry(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ad,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Gf,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=qf,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===qf||this.status===ad)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Gf:qf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ad,this._hasOwnPendingAsyncValidator=!0;const t=l1(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Fn,this.statusChanges=new Fn}_calculateStatus(){return this._allControlsDisabled()?Gf:this.errors?sy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ad)?ad:this._anyControlsHaveStatus(sy)?sy:qf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){oy(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function i5(n){return Array.isArray(n)?UT(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function s5(n){return Array.isArray(n)?jT(n):n||null}(this._rawAsyncValidators)}}class ay extends WT{constructor(e,t,r){super(qT(t),GT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function D1(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new Y(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function A1(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new Y(1e3,"");if(!r[t])throw new Y(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const hl=new Ie("CallSetDisabledState",{providedIn:"root",factory:()=>Wf}),Wf="always";function Kf(n,e,t=Wf){KT(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function u5(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&C1(n,e)})}(n,e),function c5(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function l5(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&C1(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function a5(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ly(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),dy(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function cy(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function KT(n,e){const t=m1(n);null!==e.validator?n.setValidators(g1(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=_1(n);null!==e.asyncValidator?n.setAsyncValidators(g1(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();cy(e._rawValidators,i),cy(e._rawAsyncValidators,i)}function dy(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=m1(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=_1(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return cy(e._rawValidators,r),cy(e._rawAsyncValidators,r),t}function C1(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function R1(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function M1(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const hy=class extends WT{constructor(e=null,t,r){super(qT(t),GT(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),oy(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=M1(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){R1(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){R1(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){M1(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let F1=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=qe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),L1=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Wn({type:n})}static{this.\u0275inj=Gn({})}}return n})();const ZT=new Ie("NgModelWithFormControlWarning"),b5={provide:ni,useExisting:O(()=>fy)};let fy=(()=>{class n extends ni{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Fn,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(dy(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Kf(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){ly(t.control||null,t,!1),function p5(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function P1(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(ly(r||null,t),(n=>n instanceof hy)(i)&&(Kf(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function S1(n,e){KT(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function d5(n,e){return dy(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){KT(this.form,this),this._oldForm&&dy(this._oldForm,this)}_checkFormPresent(){}static{this.\u0275fac=function(r){return new(r||n)(de(Vr,10),de(Qa,10),de(hl,8))}}static{this.\u0275dir=qe({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&Tn("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[gn([b5]),xt,ts]})}}return n})();const C5={provide:Ya,useExisting:O(()=>nb)};let nb=(()=>{class n extends Ya{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new Fn,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function JT(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===ty?t=s:function f5(n){return Object.getPrototypeOf(n.constructor)===dl}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){this._added||this._setUpControl(),function YT(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function uy(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||n)(de(ni,13),de(Vr,10),de(Qa,10),de(ao,10),de(ZT,8))}}static{this.\u0275dir=qe({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[gn([C5]),xt,ts]})}}return n})(),eO=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Wn({type:n})}static{this.\u0275inj=Gn({imports:[L1]})}}return n})(),H5=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:hl,useValue:t.callSetDisabledState??Wf}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Wn({type:n})}static{this.\u0275inj=Gn({imports:[eO]})}}return n})(),z5=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ZT,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:hl,useValue:t.callSetDisabledState??Wf}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Wn({type:n})}static{this.\u0275inj=Gn({imports:[eO]})}}return n})();class q5 extends ee{constructor(e,t){super()}schedule(e,t=0){return this}}class ob extends q5{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,r=0){return setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!==r&&this.delay===r&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=!!s&&s||new Error(s)}if(r)return this.unsubscribe(),i}_unsubscribe(){const e=this.id,t=this.scheduler,r=t.actions,i=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&r.splice(i,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}let tO=(()=>{class n{constructor(t,r=n.now){this.SchedulerAction=t,this.now=r}schedule(t,r=0,i){return new this.SchedulerAction(this,t).schedule(i,r)}}return n.now=()=>Date.now(),n})();class uo extends tO{constructor(e,t=tO.now){super(e,()=>uo.delegate&&uo.delegate!==this?uo.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,r){return uo.delegate&&uo.delegate!==this?uo.delegate.schedule(e,t,r):super.schedule(e,t,r)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const ab=new uo(ob),nO=ab;function rO(n){return!hn(n)&&n-parseFloat(n)+1>=0}function iO(n=0,e=nO){return(!rO(n)||n<0)&&(n=0),(!e||"function"!=typeof e.schedule)&&(e=nO),new rt(t=>(t.add(e.schedule(G5,n,{subscriber:t,counter:0,period:n})),t))}function G5(n){const{subscriber:e,counter:t,period:r}=n;e.next(t),this.schedule({subscriber:e,counter:t+1,period:r},r)}function ea(){}const sO=new rt(ea),W5=new rt(n=>n.complete());function oO(n){return n?function K5(n){return new rt(e=>n.schedule(()=>e.complete()))}(n):W5}function Y5({error:n,subscriber:e}){e.error(n)}class ri{constructor(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,r){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return r&&r()}}accept(e,t,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,r)}toObservable(){switch(this.kind){case"N":return Tt(this.value);case"E":return function Q5(n,e){return new rt(e?t=>e.schedule(Y5,0,{error:n,subscriber:t}):t=>t.error(n))}(this.error);case"C":return oO()}throw new Error("unexpected notification kind value")}static createNext(e){return typeof e<"u"?new ri("N",e):ri.undefinedValueNotification}static createError(e){return new ri("E",void 0,e)}static createComplete(){return ri.completeNotification}}ri.completeNotification=new ri("C"),ri.undefinedValueNotification=new ri("N",void 0);class Z5{call(e,t){return t.subscribe(new e8(e))}}class e8 extends xe{constructor(e){super(e)}_next(e){this.destination.next(ri.createNext(e))}_error(e){const t=this.destination;t.next(ri.createError(e)),t.complete()}_complete(){const e=this.destination;e.next(ri.createComplete()),e.complete()}}class n8{call(e,t){return t.subscribe(new r8(e))}}class r8 extends xe{constructor(e){super(e)}_next(e){e.observe(this.destination)}}var ub=function(n,e){return(ub=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)},s8=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return function i8(n,e){function t(){this.constructor=n}ub(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,n),e.prototype.pause=function(){this.pauser.next(!0)},e.prototype.resume=function(){this.pauser.next(!1)},e}(rt);var ii=$e(979);(0,ii.registerVersion)("firebase","10.14.1","app");const aO=new class c8 extends uo{}(class l8 extends ob{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!==r&&r>0||null===r&&this.delay>0?super.requestAsyncId(e,t,r):e.flush(this)}}),d8=aO;class f8{constructor(e,t,r){this.nextOrObserver=e,this.error=t,this.complete=r}call(e,t){return t.subscribe(new p8(e,this.nextOrObserver,this.error,this.complete))}}class p8 extends xe{constructor(e,t,r,i){super(e),this._tapNext=ea,this._tapError=ea,this._tapComplete=ea,this._tapError=r||ea,this._tapComplete=i||ea,P(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||ea,this._tapError=t.error||ea,this._tapComplete=t.complete||ea)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}let g8=1;const m8=Promise.resolve(),py={};function uO(n){return n in py&&(delete py[n],!0)}const lO={setImmediate(n){const e=g8++;return py[e]=!0,m8.then(()=>uO(e)&&n()),e},clearImmediate(n){uO(n)}},lb=new class y8 extends uo{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let r,i=-1,s=t.length;e=e||t.shift();do{if(r=e.execute(e.state,e.delay))break}while(++i<s&&(e=t.shift()));if(this.active=!1,r){for(;++i<s&&(e=t.shift());)e.unsubscribe();throw r}}}(class _8 extends ob{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e.scheduled||(e.scheduled=lO.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,r=0){if(null!==r&&r>0||null===r&&this.delay>0)return super.recycleAsyncId(e,t,r);0===e.actions.length&&(lO.clearImmediate(t),e.scheduled=void 0)}});class gy extends rt{constructor(e,t=0,r=lb){super(),this.source=e,this.delayTime=t,this.scheduler=r,(!rO(t)||t<0)&&(this.delayTime=0),(!r||"function"!=typeof r.schedule)&&(this.scheduler=lb)}static create(e,t=0,r=lb){return new gy(e,t,r)}static dispatch(e){const{source:t,subscriber:r}=e;return this.add(t.subscribe(r))}_subscribe(e){return this.scheduler.schedule(gy.dispatch,this.delayTime,{source:this.source,subscriber:e})}}function Yf(n,e=0){return function(r){return r.lift(new v8(n,e))}}class v8{constructor(e,t){this.scheduler=e,this.delay=t}call(e,t){return new gy(t,this.delay,this.scheduler).subscribe(e)}}function ud(n,e=0){return function(r){return r.lift(new E8(n,e))}}class E8{constructor(e,t=0){this.scheduler=e,this.delay=t}call(e,t){return t.subscribe(new my(e,this.scheduler,this.delay))}}class my extends xe{constructor(e,t,r=0){super(e),this.scheduler=t,this.delay=r}static dispatch(e){const{notification:t,destination:r}=e;t.observe(r),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(my.dispatch,this.delay,new I8(e,this.destination)))}_next(e){this.scheduleMessage(ri.createNext(e))}_error(e){this.scheduleMessage(ri.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(ri.createComplete()),this.unsubscribe()}}class I8{constructor(e,t){this.notification=e,this.destination=t}}const ld=new df("ANGULARFIRE2_VERSION");const cb=(n,e)=>{const t=e?[e]:(0,ii.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};class db{constructor(){return cb(w8)}}const w8="app-check";function cd(){}class dO{zone;delegate;constructor(e,t=aO){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class T8{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",cd,{},cd,cd)),t.pipe(function h8(n,e,t){return function(i){return i.lift(new f8(n,e,t))}}({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let _y=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new dO(Zone.current)),this.insideAngular=t.run(()=>new dO(Zone.current,ab)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(fe(Nt))};static \u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function dd(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function pl(n){return dd().ngZone.run(()=>n())}function ji(n){return function A8(n){return function(t){return(t=t.lift(new T8(n.ngZone))).pipe(Yf(n.outsideAngular),ud(n.insideAngular))}}(dd())(n)}const D8=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),pl(()=>n.apply(void 0,r))},hO=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||=pl(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",cd,{},cd,cd))),r[s]=D8(r[s],t));const i=function b8(n){return dd().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof rt){const s=dd();return i.pipe(Yf(s.outsideAngular),ud(s.insideAngular))}return pl(()=>i)}return i instanceof rt?i.pipe(ji):i instanceof Promise?pl(()=>new Promise((s,o)=>i.then(a=>pl(()=>s(a)),a=>pl(()=>o(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:pl(()=>i)};var Ja=$e(574);Ja.A.registerVersion("firebase","10.14.1","app-compat");const P8=["ngOnDestroy"];class fO{constructor(e){return e}}const yy=new Ie("angularfire2.app.options"),vy=new Ie("angularfire2.app.name");function hb(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=Ja.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Ja.A.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;N8("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new fO(o)}const N8=(n,...e)=>{},x8={provide:fO,useFactory:hb,deps:[yy,Nt,[new is,vy]]};let O8=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:yy,useValue:t},{provide:vy,useValue:r}]}}constructor(t){Ja.A.registerVersion("angularfire",ld.full,"core"),Ja.A.registerVersion("angularfire",ld.full,"app-compat"),Ja.A.registerVersion("angular",wI.full,t.toString())}static \u0275fac=function(r){return new(r||n)(fe(Ss))};static \u0275mod=Wn({type:n});static \u0275inj=Gn({providers:[x8]})}return n})();function pO(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function k8(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(gO("error",`${e} was already initialized on the ${t} Firebase App with different settings.${F8?" You may need to reload as Firebase is not HMR aware.":""}`),gO("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const F8=typeof module<"u"&&!!module.hot,gO=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],$e(46);class V8 extends Nn{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new L8(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,r=t?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,s=r.length;let o;if(this.closed)throw new Ye;if(this.isStopped||this.hasError?o=ee.EMPTY:(this.observers.push(e),o=new Mn(this,e)),i&&e.add(e=new my(e,i)),t)for(let a=0;a<s&&!e.closed;a++)e.next(r[a]);else for(let a=0;a<s&&!e.closed;a++)e.next(r[a].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),o}_getNow(){return(this.scheduler||d8).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,r=this._windowTime,i=this._events,s=i.length;let o=0;for(;o<s&&!(e-i[o].time<r);)o++;return s>t&&(o=Math.max(o,s-t)),o>0&&i.splice(0,o),i}}class L8{constructor(e,t){this.time=e,this.value=t}}function mO(n,e,t){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},i=>i.lift(function B8({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(g){let m;s++,!i||a?(a=!1,i=new V8(n,e,r),m=i.subscribe(this),o=g.subscribe({next(v){i.next(v)},error(v){a=!0,i.error(v)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):m=i.subscribe(this),this.add(()=>{s--,m.unsubscribe(),m=void 0,o&&!u&&t&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}const _O=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})(),U8=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();class $8{constructor(e){if(this.total=e,this.total<0)throw new U8}call(e,t){return t.subscribe(new H8(e,this.total))}}class H8 extends xe{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}class q8{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new G8(e,this.defaultValue))}}class G8 extends xe{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function W8(n=Y8){return e=>e.lift(new K8(n))}class K8{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new Q8(e,this.errorFactory))}}class Q8 extends xe{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Y8(){return new _O}function yO(n,e){return e?wn(()=>n,e):wn(()=>n)}const vO=new Ie("angularfire2.auth.use-emulator"),EO=new Ie("angularfire2.auth.settings"),IO=new Ie("angularfire2.auth.tenant-id"),wO=new Ie("angularfire2.auth.langugage-code"),TO=new Ie("angularfire2.auth.use-device-language"),bO=new Ie("angularfire.auth.persistence"),AO=(n,e,t,r,i,s,o,a)=>pO(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[d,g]of Object.entries(o))u.settings[d]=g;return a&&u.setPersistence(a),u},[t,r,i,s,o,a]);let DO=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,u,d,g,m,v,T){const D=new Nn,S=Tt(void 0).pipe(ud(o.outsideAngular),wn(()=>s.runOutsideAngular(()=>Promise.resolve().then($e.bind($e,46)))),At(()=>hb(t,s,r)),At(x=>AO(x,s,a,d,g,m,u,v)),mO({bufferSize:1,refCount:!1}));if(N_(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Tt(null);else{S.pipe(function J8(n,e){const t=arguments.length>=2;return r=>r.pipe(n?$f((i,s)=>n(i,s,r)):$n,function j8(n){return e=>0===n?oO():e.lift(new $8(n))}(1),t?function z8(n=null){return e=>e.lift(new q8(n))}(e):W8(()=>new _O))}()).subscribe();const x=S.pipe(wn(z=>z.getRedirectResult().then(te=>te,()=>null)),ji,mO({bufferSize:1,refCount:!1})),W=S.pipe(wn(z=>new rt(te=>({unsubscribe:s.runOutsideAngular(()=>z.onAuthStateChanged(he=>te.next(he),he=>te.error(he),()=>te.complete()))})))),B=S.pipe(wn(z=>new rt(te=>({unsubscribe:s.runOutsideAngular(()=>z.onIdTokenChanged(he=>te.next(he),he=>te.error(he),()=>te.complete()))}))));this.authState=x.pipe(yO(W),Yf(o.outsideAngular),ud(o.insideAngular)),this.user=x.pipe(yO(B),Yf(o.outsideAngular),ud(o.insideAngular)),this.idToken=this.user.pipe(wn(z=>z?er(z.getIdToken()):Tt(null))),this.idTokenResult=this.user.pipe(wn(z=>z?er(z.getIdTokenResult()):Tt(null))),this.credential=Yt(x,D,this.authState.pipe($f(z=>!z))).pipe(At(z=>z?.user?z:null),Yf(o.outsideAngular),ud(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(P8.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const u=a?.[s];return"function"==typeof u?u.bind(a):u?.then?u.then(d=>t.run(()=>d)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,d)=>o.then(g=>{const m=g?.(...d);return r?.spy?.apply&&r.spy.apply(s,d,m),m})})})}))(this,S,s,{spy:{apply:(x,W,B)=>{(x.startsWith("signIn")||x.startsWith("createUser"))&&B.then(z=>D.next(z))}}})}static \u0275fac=function(r){return new(r||n)(fe(yy),fe(vy,8),fe(Ss),fe(Nt),fe(_y),fe(vO,8),fe(EO,8),fe(IO,8),fe(wO,8),fe(TO,8),fe(bO,8),fe(db,8))};static \u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function CO(...n){return function Z8(){return le(1)}()(Tt(...n))}function fb(...n){const e=n[n.length-1];return li(e)?(n.pop(),t=>CO(n,t,e)):t=>CO(n,t)}function pb(){return n=>n.lift(new eK)}class eK{call(e,t){return t.subscribe(new tK(e))}}class tK extends xe{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}function gb(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(i){return i.lift(new nK(n,e,t))}}class nK{constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new rK(e,this.accumulator,this.seed,this.hasSeed))}}class rK extends xe{constructor(e,t,r,i){super(e),this.accumulator=t,this._seed=r,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(i){this.destination.error(i)}this.seed=r,this.destination.next(r)}}var gl,MO,re=$e(467),SO=$e(779),lo=$e(398),St=$e(401),PO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},RO={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(L,R,F){F||(F=0);var U=Array(16);if("string"==typeof R)for(var H=0;16>H;++H)U[H]=R.charCodeAt(F++)|R.charCodeAt(F++)<<8|R.charCodeAt(F++)<<16|R.charCodeAt(F++)<<24;else for(H=0;16>H;++H)U[H]=R[F++]|R[F++]<<8|R[F++]<<16|R[F++]<<24;var K=L.g[3],V=(R=L.g[0])+(K^(F=L.g[1])&((H=L.g[2])^K))+U[0]+3614090360&4294967295;V=(F=(H=(K=(R=(F=(H=(K=(R=(F=(H=(K=(R=(F=(H=(K=(R=(F=(H=(K=(R=(F=(H=(K=(R=(F=(H=(K=(R=(F=(H=(K=(R=(F=(H=(K=(R=(F=(H=(K=(R=(F=(H=(K=(R=(F=(H=(K=(R=(F=(H=(K=(R=(F=(H=(K=(R=(F=(H=(K=(R=F+(V<<7&4294967295|V>>>25))+((V=K+(H^R&(F^H))+U[1]+3905402710&4294967295)<<12&4294967295|V>>>20))+((V=H+(F^K&(R^F))+U[2]+606105819&4294967295)<<17&4294967295|V>>>15))+((V=F+(R^H&(K^R))+U[3]+3250441966&4294967295)<<22&4294967295|V>>>10))+((V=R+(K^F&(H^K))+U[4]+4118548399&4294967295)<<7&4294967295|V>>>25))+((V=K+(H^R&(F^H))+U[5]+1200080426&4294967295)<<12&4294967295|V>>>20))+((V=H+(F^K&(R^F))+U[6]+2821735955&4294967295)<<17&4294967295|V>>>15))+((V=F+(R^H&(K^R))+U[7]+4249261313&4294967295)<<22&4294967295|V>>>10))+((V=R+(K^F&(H^K))+U[8]+1770035416&4294967295)<<7&4294967295|V>>>25))+((V=K+(H^R&(F^H))+U[9]+2336552879&4294967295)<<12&4294967295|V>>>20))+((V=H+(F^K&(R^F))+U[10]+4294925233&4294967295)<<17&4294967295|V>>>15))+((V=F+(R^H&(K^R))+U[11]+2304563134&4294967295)<<22&4294967295|V>>>10))+((V=R+(K^F&(H^K))+U[12]+1804603682&4294967295)<<7&4294967295|V>>>25))+((V=K+(H^R&(F^H))+U[13]+4254626195&4294967295)<<12&4294967295|V>>>20))+((V=H+(F^K&(R^F))+U[14]+2792965006&4294967295)<<17&4294967295|V>>>15))+((V=F+(R^H&(K^R))+U[15]+1236535329&4294967295)<<22&4294967295|V>>>10))+((V=R+(H^K&(F^H))+U[1]+4129170786&4294967295)<<5&4294967295|V>>>27))+((V=K+(F^H&(R^F))+U[6]+3225465664&4294967295)<<9&4294967295|V>>>23))+((V=H+(R^F&(K^R))+U[11]+643717713&4294967295)<<14&4294967295|V>>>18))+((V=F+(K^R&(H^K))+U[0]+3921069994&4294967295)<<20&4294967295|V>>>12))+((V=R+(H^K&(F^H))+U[5]+3593408605&4294967295)<<5&4294967295|V>>>27))+((V=K+(F^H&(R^F))+U[10]+38016083&4294967295)<<9&4294967295|V>>>23))+((V=H+(R^F&(K^R))+U[15]+3634488961&4294967295)<<14&4294967295|V>>>18))+((V=F+(K^R&(H^K))+U[4]+3889429448&4294967295)<<20&4294967295|V>>>12))+((V=R+(H^K&(F^H))+U[9]+568446438&4294967295)<<5&4294967295|V>>>27))+((V=K+(F^H&(R^F))+U[14]+3275163606&4294967295)<<9&4294967295|V>>>23))+((V=H+(R^F&(K^R))+U[3]+4107603335&4294967295)<<14&4294967295|V>>>18))+((V=F+(K^R&(H^K))+U[8]+1163531501&4294967295)<<20&4294967295|V>>>12))+((V=R+(H^K&(F^H))+U[13]+2850285829&4294967295)<<5&4294967295|V>>>27))+((V=K+(F^H&(R^F))+U[2]+4243563512&4294967295)<<9&4294967295|V>>>23))+((V=H+(R^F&(K^R))+U[7]+1735328473&4294967295)<<14&4294967295|V>>>18))+((V=F+(K^R&(H^K))+U[12]+2368359562&4294967295)<<20&4294967295|V>>>12))+((V=R+(F^H^K)+U[5]+4294588738&4294967295)<<4&4294967295|V>>>28))+((V=K+(R^F^H)+U[8]+2272392833&4294967295)<<11&4294967295|V>>>21))+((V=H+(K^R^F)+U[11]+1839030562&4294967295)<<16&4294967295|V>>>16))+((V=F+(H^K^R)+U[14]+4259657740&4294967295)<<23&4294967295|V>>>9))+((V=R+(F^H^K)+U[1]+2763975236&4294967295)<<4&4294967295|V>>>28))+((V=K+(R^F^H)+U[4]+1272893353&4294967295)<<11&4294967295|V>>>21))+((V=H+(K^R^F)+U[7]+4139469664&4294967295)<<16&4294967295|V>>>16))+((V=F+(H^K^R)+U[10]+3200236656&4294967295)<<23&4294967295|V>>>9))+((V=R+(F^H^K)+U[13]+681279174&4294967295)<<4&4294967295|V>>>28))+((V=K+(R^F^H)+U[0]+3936430074&4294967295)<<11&4294967295|V>>>21))+((V=H+(K^R^F)+U[3]+3572445317&4294967295)<<16&4294967295|V>>>16))+((V=F+(H^K^R)+U[6]+76029189&4294967295)<<23&4294967295|V>>>9))+((V=R+(F^H^K)+U[9]+3654602809&4294967295)<<4&4294967295|V>>>28))+((V=K+(R^F^H)+U[12]+3873151461&4294967295)<<11&4294967295|V>>>21))+((V=H+(K^R^F)+U[15]+530742520&4294967295)<<16&4294967295|V>>>16))+((V=F+(H^K^R)+U[2]+3299628645&4294967295)<<23&4294967295|V>>>9))+((V=R+(H^(F|~K))+U[0]+4096336452&4294967295)<<6&4294967295|V>>>26))+((V=K+(F^(R|~H))+U[7]+1126891415&4294967295)<<10&4294967295|V>>>22))+((V=H+(R^(K|~F))+U[14]+2878612391&4294967295)<<15&4294967295|V>>>17))+((V=F+(K^(H|~R))+U[5]+4237533241&4294967295)<<21&4294967295|V>>>11))+((V=R+(H^(F|~K))+U[12]+1700485571&4294967295)<<6&4294967295|V>>>26))+((V=K+(F^(R|~H))+U[3]+2399980690&4294967295)<<10&4294967295|V>>>22))+((V=H+(R^(K|~F))+U[10]+4293915773&4294967295)<<15&4294967295|V>>>17))+((V=F+(K^(H|~R))+U[1]+2240044497&4294967295)<<21&4294967295|V>>>11))+((V=R+(H^(F|~K))+U[8]+1873313359&4294967295)<<6&4294967295|V>>>26))+((V=K+(F^(R|~H))+U[15]+4264355552&4294967295)<<10&4294967295|V>>>22))+((V=H+(R^(K|~F))+U[6]+2734768916&4294967295)<<15&4294967295|V>>>17))+((V=F+(K^(H|~R))+U[13]+1309151649&4294967295)<<21&4294967295|V>>>11))+((K=(R=F+((V=R+(H^(F|~K))+U[4]+4149444226&4294967295)<<6&4294967295|V>>>26))+((V=K+(F^(R|~H))+U[11]+3174756917&4294967295)<<10&4294967295|V>>>22))^((H=K+((V=H+(R^(K|~F))+U[2]+718787259&4294967295)<<15&4294967295|V>>>17))|~R))+U[9]+3951481745&4294967295,L.g[0]=L.g[0]+R&4294967295,L.g[1]=L.g[1]+(H+(V<<21&4294967295|V>>>11))&4294967295,L.g[2]=L.g[2]+H&4294967295,L.g[3]=L.g[3]+K&4294967295}function o(L,R){this.h=R;for(var F=[],U=!0,H=L.length-1;0<=H;H--){var K=0|L[H];U&&K==R||(F[H]=K,U=!1)}this.g=F}(function e(L,R){function F(){}F.prototype=R.prototype,L.D=R.prototype,L.prototype=new F,L.prototype.constructor=L,L.C=function(U,H,K){for(var V=Array(arguments.length-2),gs=2;gs<arguments.length;gs++)V[gs-2]=arguments[gs];return R.prototype[H].apply(U,V)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(L,R){void 0===R&&(R=L.length);for(var F=R-this.blockSize,U=this.B,H=this.h,K=0;K<R;){if(0==H)for(;K<=F;)i(this,L,K),K+=this.blockSize;if("string"==typeof L){for(;K<R;)if(U[H++]=L.charCodeAt(K++),H==this.blockSize){i(this,U),H=0;break}}else for(;K<R;)if(U[H++]=L[K++],H==this.blockSize){i(this,U),H=0;break}}this.h=H,this.o+=R},r.prototype.v=function(){var L=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);L[0]=128;for(var R=1;R<L.length-8;++R)L[R]=0;var F=8*this.o;for(R=L.length-8;R<L.length;++R)L[R]=255&F,F/=256;for(this.u(L),L=Array(16),R=F=0;4>R;++R)for(var U=0;32>U;U+=8)L[F++]=this.g[R]>>>U&255;return L};var a={};function u(L){return-128<=L&&128>L?function s(L,R){var F=a;return Object.prototype.hasOwnProperty.call(F,L)?F[L]:F[L]=R(L)}(L,function(R){return new o([0|R],0>R?-1:0)}):new o([0|L],0>L?-1:0)}function d(L){if(isNaN(L)||!isFinite(L))return m;if(0>L)return x(d(-L));for(var R=[],F=1,U=0;L>=F;U++)R[U]=L/F|0,F*=4294967296;return new o(R,0)}var m=u(0),v=u(1),T=u(16777216);function D(L){if(0!=L.h)return!1;for(var R=0;R<L.g.length;R++)if(0!=L.g[R])return!1;return!0}function S(L){return-1==L.h}function x(L){for(var R=L.g.length,F=[],U=0;U<R;U++)F[U]=~L.g[U];return new o(F,~L.h).add(v)}function W(L,R){return L.add(x(R))}function B(L,R){for(;(65535&L[R])!=L[R];)L[R+1]+=L[R]>>>16,L[R]&=65535,R++}function z(L,R){this.g=L,this.h=R}function te(L,R){if(D(R))throw Error("division by zero");if(D(L))return new z(m,m);if(S(L))return R=te(x(L),R),new z(x(R.g),x(R.h));if(S(R))return R=te(L,x(R)),new z(x(R.g),R.h);if(30<L.g.length){if(S(L)||S(R))throw Error("slowDivide_ only works with positive integers.");for(var F=v,U=R;0>=U.l(L);)F=he(F),U=he(U);var H=Te(F,1),K=Te(U,1);for(U=Te(U,2),F=Te(F,2);!D(U);){var V=K.add(U);0>=V.l(L)&&(H=H.add(F),K=V),U=Te(U,1),F=Te(F,1)}return R=W(L,H.j(R)),new z(H,R)}for(H=m;0<=L.l(R);){for(F=Math.max(1,Math.floor(L.m()/R.m())),U=48>=(U=Math.ceil(Math.log(F)/Math.LN2))?1:Math.pow(2,U-48),V=(K=d(F)).j(R);S(V)||0<V.l(L);)V=(K=d(F-=U)).j(R);D(K)&&(K=v),H=H.add(K),L=W(L,V)}return new z(H,L)}function he(L){for(var R=L.g.length+1,F=[],U=0;U<R;U++)F[U]=L.i(U)<<1|L.i(U-1)>>>31;return new o(F,L.h)}function Te(L,R){var F=R>>5;R%=32;for(var U=L.g.length-F,H=[],K=0;K<U;K++)H[K]=0<R?L.i(K+F)>>>R|L.i(K+F+1)<<32-R:L.i(K+F);return new o(H,L.h)}(n=o.prototype).m=function(){if(S(this))return-x(this).m();for(var L=0,R=1,F=0;F<this.g.length;F++){var U=this.i(F);L+=(0<=U?U:4294967296+U)*R,R*=4294967296}return L},n.toString=function(L){if(2>(L=L||10)||36<L)throw Error("radix out of range: "+L);if(D(this))return"0";if(S(this))return"-"+x(this).toString(L);for(var R=d(Math.pow(L,6)),F=this,U="";;){var H=te(F,R).g,K=((0<(F=W(F,H.j(R))).g.length?F.g[0]:F.h)>>>0).toString(L);if(D(F=H))return K+U;for(;6>K.length;)K="0"+K;U=K+U}},n.i=function(L){return 0>L?0:L<this.g.length?this.g[L]:this.h},n.l=function(L){return S(L=W(this,L))?-1:D(L)?0:1},n.abs=function(){return S(this)?x(this):this},n.add=function(L){for(var R=Math.max(this.g.length,L.g.length),F=[],U=0,H=0;H<=R;H++){var K=U+(65535&this.i(H))+(65535&L.i(H)),V=(K>>>16)+(this.i(H)>>>16)+(L.i(H)>>>16);U=V>>>16,F[H]=(V&=65535)<<16|(K&=65535)}return new o(F,-2147483648&F[F.length-1]?-1:0)},n.j=function(L){if(D(this)||D(L))return m;if(S(this))return S(L)?x(this).j(x(L)):x(x(this).j(L));if(S(L))return x(this.j(x(L)));if(0>this.l(T)&&0>L.l(T))return d(this.m()*L.m());for(var R=this.g.length+L.g.length,F=[],U=0;U<2*R;U++)F[U]=0;for(U=0;U<this.g.length;U++)for(var H=0;H<L.g.length;H++){var K=this.i(U)>>>16,V=65535&this.i(U),gs=L.i(H)>>>16,_u=65535&L.i(H);F[2*U+2*H]+=V*_u,B(F,2*U+2*H),F[2*U+2*H+1]+=K*_u,B(F,2*U+2*H+1),F[2*U+2*H+1]+=V*gs,B(F,2*U+2*H+1),F[2*U+2*H+2]+=K*gs,B(F,2*U+2*H+2)}for(U=0;U<R;U++)F[U]=F[2*U+1]<<16|F[2*U];for(U=R;U<2*R;U++)F[U]=0;return new o(F,0)},n.A=function(L){return te(this,L).h},n.and=function(L){for(var R=Math.max(this.g.length,L.g.length),F=[],U=0;U<R;U++)F[U]=this.i(U)&L.i(U);return new o(F,this.h&L.h)},n.or=function(L){for(var R=Math.max(this.g.length,L.g.length),F=[],U=0;U<R;U++)F[U]=this.i(U)|L.i(U);return new o(F,this.h|L.h)},n.xor=function(L){for(var R=Math.max(this.g.length,L.g.length),F=[],U=0;U<R;U++)F[U]=this.i(U)^L.i(U);return new o(F,this.h^L.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,MO=RO.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=function g(L,R){if(0==L.length)throw Error("number format error: empty string");if(2>(R=R||10)||36<R)throw Error("radix out of range: "+R);if("-"==L.charAt(0))return x(g(L.substring(1),R));if(0<=L.indexOf("-"))throw Error('number format error: interior "-" character');for(var F=d(Math.pow(R,8)),U=m,H=0;H<L.length;H+=8){var K=Math.min(8,L.length-H),V=parseInt(L.substring(H,H+K),R);8>K?(K=d(Math.pow(R,K)),U=U.j(K).add(d(V))):U=(U=U.j(F)).add(d(V))}return U},gl=RO.Integer=o}).apply(typeof PO<"u"?PO:typeof self<"u"?self:typeof window<"u"?window:{});var NO,Jf,xO,Iy,mb,OO,kO,FO,Ey=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ta={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(h,_,E){return h==Array.prototype||h==Object.prototype||(h[_]=E.value),h},r=function t(h){h=["object"==typeof globalThis&&globalThis,h,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Ey&&Ey];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}(this);!function i(h,_){if(_)e:{var E=r;h=h.split(".");for(var C=0;C<h.length-1;C++){var q=h[C];if(!(q in E))break e;E=E[q]}(_=_(C=E[h=h[h.length-1]]))!=C&&null!=_&&e(E,h,{configurable:!0,writable:!0,value:_})}}("Array.prototype.values",function(h){return h||function(){return function s(h,_){h instanceof String&&(h+="");var E=0,C=!1,q={next:function(){if(!C&&E<h.length){var Z=E++;return{value:_(Z,h[Z]),done:!1}}return C=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}(this,function(_,E){return E})}});var o=o||{},a=this||self;function u(h){var _=typeof h;return"array"==(_="object"!=_?_:h?Array.isArray(h)?"array":_:"null")||"object"==_&&"number"==typeof h.length}function d(h){var _=typeof h;return"object"==_&&null!=h||"function"==_}function g(h,_,E){return h.call.apply(h.bind,arguments)}function m(h,_,E){if(!h)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,C),h.apply(_,q)}}return function(){return h.apply(_,arguments)}}function v(h,_,E){return(v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:m).apply(null,arguments)}function T(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var C=E.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function D(h,_){function E(){}E.prototype=_.prototype,h.aa=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(C,q,Z){for(var _e=Array(arguments.length-2),Kt=2;Kt<arguments.length;Kt++)_e[Kt-2]=arguments[Kt];return _.prototype[q].apply(C,_e)}}function S(h){const _=h.length;if(0<_){const E=Array(_);for(let C=0;C<_;C++)E[C]=h[C];return E}return[]}function x(h,_){for(let E=1;E<arguments.length;E++){const C=arguments[E];if(u(C)){const q=h.length||0,Z=C.length||0;h.length=q+Z;for(let _e=0;_e<Z;_e++)h[q+_e]=C[_e]}else h.push(C)}}function B(h){return/^[\s\xa0]*$/.test(h)}function z(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function te(h){return te[" "](h),h}te[" "]=function(){};var he=!(-1==z().indexOf("Gecko")||-1!=z().toLowerCase().indexOf("webkit")&&-1==z().indexOf("Edge")||-1!=z().indexOf("Trident")||-1!=z().indexOf("MSIE")||-1!=z().indexOf("Edge"));function Te(h,_,E){for(const C in h)_.call(E,h[C],C,h)}function R(h){const _={};for(const E in h)_[E]=h[E];return _}const F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(h,_){let E,C;for(let q=1;q<arguments.length;q++){for(E in C=arguments[q],C)h[E]=C[E];for(let Z=0;Z<F.length;Z++)E=F[Z],Object.prototype.hasOwnProperty.call(C,E)&&(h[E]=C[E])}}function H(h){var _=1;h=h.split(":");const E=[];for(;0<_&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function K(h){a.setTimeout(()=>{throw h},0)}function V(){var h=ct;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}var _u=new class W{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}(()=>new Se,h=>h.reset());class Se{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Ne,Fe=!1,ct=new class gs{constructor(){this.h=this.g=null}add(_,E){const C=_u.get();C.set(_,E),this.h?this.h.next=C:this.g=C,this.h=C}},Un=()=>{const h=a.Promise.resolve(void 0);Ne=()=>{h.then(ms)}};var ms=()=>{for(var h;h=V();){try{h.h.call(h.g)}catch(E){K(E)}var _=_u;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}Fe=!1};function Sn(){this.s=this.s,this.C=this.C}function ln(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}Sn.prototype.s=!1,Sn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Sn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},ln.prototype.h=function(){this.defaultPrevented=!0};var cn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};a.addEventListener("test",E,_),a.removeEventListener("test",E,_)}catch{}return h}();function yu(h,_){if(ln.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(he){e:{try{te(_.nodeName);var q=!0;break e}catch{}q=!1}q||(_=null)}}else"mouseover"==E?_=h.fromElement:"mouseout"==E&&(_=h.toElement);this.relatedTarget=_,C?(this.clientX=void 0!==C.clientX?C.clientX:C.pageX,this.clientY=void 0!==C.clientY?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=void 0!==h.clientX?h.clientX:h.pageX,this.clientY=void 0!==h.clientY?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType="string"==typeof h.pointerType?h.pointerType:YD[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&yu.aa.h.call(this)}}D(yu,ln);var YD={2:"touch",3:"pen",4:"mouse"};yu.prototype.h=function(){yu.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Pn="closure_listenable_"+(1e6*Math.random()|0),da=0;function Ti(h,_,E,C,q){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!C,this.ha=q,this.key=++da,this.da=this.fa=!1}function ha(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function vu(h){this.src=h,this.g={},this.h=0}function JD(h,_){var E=_.type;if(E in h.g){var Z,C=h.g[E],q=Array.prototype.indexOf.call(C,_,void 0);(Z=0<=q)&&Array.prototype.splice.call(C,q,1),Z&&(ha(_),0==h.g[E].length&&(delete h.g[E],h.h--))}}function XD(h,_,E,C){for(var q=0;q<h.length;++q){var Z=h[q];if(!Z.da&&Z.listener==_&&Z.capture==!!E&&Z.ha==C)return q}return-1}vu.prototype.add=function(h,_,E,C,q){var Z=h.toString();(h=this.g[Z])||(h=this.g[Z]=[],this.h++);var _e=XD(h,_,C,q);return-1<_e?(_=h[_e],E||(_.fa=!1)):((_=new Ti(_,this.src,Z,!!C,q)).fa=E,h.push(_)),_};var ZD="closure_lm_"+(1e6*Math.random()|0),e0={};function VL(h,_,E,C,q){if(C&&C.once)return BL(h,_,E,C,q);if(Array.isArray(_)){for(var Z=0;Z<_.length;Z++)VL(h,_[Z],E,C,q);return null}return E=s0(E),h&&h[Pn]?h.K(_,E,d(C)?!!C.capture:!!C,q):LL(h,_,E,!1,C,q)}function LL(h,_,E,C,q,Z){if(!_)throw Error("Invalid event type");var _e=d(q)?!!q.capture:!!q,Kt=n0(h);if(Kt||(h[ZD]=Kt=new vu(h)),(E=Kt.add(_,E,C,_e,Z)).proxy)return E;if(C=function TX(){const _=bX;return function h(E){return _.call(h.src,h.listener,E)}}(),E.proxy=C,C.src=h,C.listener=E,h.addEventListener)cn||(q=_e),void 0===q&&(q=!1),h.addEventListener(_.toString(),C,q);else if(h.attachEvent)h.attachEvent(jL(_.toString()),C);else{if(!h.addListener||!h.removeListener)throw Error("addEventListener and attachEvent are unavailable.");h.addListener(C)}return E}function BL(h,_,E,C,q){if(Array.isArray(_)){for(var Z=0;Z<_.length;Z++)BL(h,_[Z],E,C,q);return null}return E=s0(E),h&&h[Pn]?h.L(_,E,d(C)?!!C.capture:!!C,q):LL(h,_,E,!0,C,q)}function UL(h,_,E,C,q){if(Array.isArray(_))for(var Z=0;Z<_.length;Z++)UL(h,_[Z],E,C,q);else C=d(C)?!!C.capture:!!C,E=s0(E),h&&h[Pn]?(h=h.i,(_=String(_).toString())in h.g&&-1<(E=XD(Z=h.g[_],E,C,q))&&(ha(Z[E]),Array.prototype.splice.call(Z,E,1),0==Z.length&&(delete h.g[_],h.h--))):h&&(h=n0(h))&&(_=h.g[_.toString()],h=-1,_&&(h=XD(_,E,C,q)),(E=-1<h?_[h]:null)&&t0(E))}function t0(h){if("number"!=typeof h&&h&&!h.da){var _=h.src;if(_&&_[Pn])JD(_.i,h);else{var E=h.type,C=h.proxy;_.removeEventListener?_.removeEventListener(E,C,h.capture):_.detachEvent?_.detachEvent(jL(E),C):_.addListener&&_.removeListener&&_.removeListener(C),(E=n0(_))?(JD(E,h),0==E.h&&(E.src=null,_[ZD]=null)):ha(h)}}}function jL(h){return h in e0?e0[h]:e0[h]="on"+h}function bX(h,_){if(h.da)h=!0;else{_=new yu(_,this);var E=h.listener,C=h.ha||h.src;h.fa&&t0(h),h=E.call(C,_)}return h}function n0(h){return(h=h[ZD])instanceof vu?h:null}var r0="__closure_events_fn_"+(1e9*Math.random()>>>0);function s0(h){return"function"==typeof h?h:(h[r0]||(h[r0]=function(_){return h.handleEvent(_)}),h[r0])}function $r(){Sn.call(this),this.i=new vu(this),this.M=this,this.F=null}function ai(h,_){var E,C=h.F;if(C)for(E=[];C;C=C.F)E.push(C);if(h=h.M,C=_.type||_,"string"==typeof _)_=new ln(_,h);else if(_ instanceof ln)_.target=_.target||h;else{var q=_;U(_=new ln(C,h),q)}if(q=!0,E)for(var Z=E.length-1;0<=Z;Z--){var _e=_.g=E[Z];q=wv(_e,C,!0,_)&&q}if(q=wv(_e=_.g=h,C,!0,_)&&q,q=wv(_e,C,!1,_)&&q,E)for(Z=0;Z<E.length;Z++)q=wv(_e=_.g=E[Z],C,!1,_)&&q}function wv(h,_,E,C){if(!(_=h.i.g[String(_)]))return!0;_=_.concat();for(var q=!0,Z=0;Z<_.length;++Z){var _e=_[Z];if(_e&&!_e.da&&_e.capture==E){var Kt=_e.listener,Nr=_e.ha||_e.src;_e.fa&&JD(h.i,_e),q=!1!==Kt.call(Nr,C)&&q}}return q&&!C.defaultPrevented}function $L(h,_,E){if("function"==typeof h)E&&(h=v(h,E));else{if(!h||"function"!=typeof h.handleEvent)throw Error("Invalid listener argument");h=v(h.handleEvent,h)}return 2147483647<Number(_)?-1:a.setTimeout(h,_||0)}function HL(h){h.g=$L(()=>{h.g=null,h.i&&(h.i=!1,HL(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}D($r,Sn),$r.prototype[Pn]=!0,$r.prototype.removeEventListener=function(h,_,E,C){UL(this,h,_,E,C)},$r.prototype.N=function(){if($r.aa.N.call(this),this.i){var _,h=this.i;for(_ in h.g){for(var E=h.g[_],C=0;C<E.length;C++)ha(E[C]);delete h.g[_],h.h--}}this.F=null},$r.prototype.K=function(h,_,E,C){return this.i.add(String(h),_,!1,E,C)},$r.prototype.L=function(h,_,E,C){return this.i.add(String(h),_,!0,E,C)};class AX extends Sn{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:HL(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Up(h){Sn.call(this),this.h=h,this.g={}}D(Up,Sn);var zL=[];function qL(h){Te(h.g,function(_,E){this.g.hasOwnProperty(E)&&t0(_)},h),h.g={}}Up.prototype.N=function(){Up.aa.N.call(this),qL(this)},Up.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var o0=a.JSON.stringify,DX=a.JSON.parse,CX=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function a0(){}function WL(){}a0.prototype.h=null;var jp={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function u0(){ln.call(this,"d")}function l0(){ln.call(this,"c")}D(u0,ln),D(l0,ln);var Vl={},KL=null;function Tv(){return KL=KL||new $r}function QL(h){ln.call(this,Vl.La,h)}function $p(h){const _=Tv();ai(_,new QL(_))}function YL(h,_){ln.call(this,Vl.STAT_EVENT,h),this.stat=_}function ui(h){const _=Tv();ai(_,new YL(_,h))}function JL(h,_){ln.call(this,Vl.Ma,h),this.size=_}function Hp(h,_){if("function"!=typeof h)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function zp(){this.g=!0}function Yd(h,_,E,C){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+function MX(h,_){if(!h.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E)for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var C=E[h];if(!(2>C.length)){var q=C[1];if(Array.isArray(q)&&!(1>q.length)){var Z=q[0];if("noop"!=Z&&"stop"!=Z&&"close"!=Z)for(var _e=1;_e<q.length;_e++)q[_e]=""}}}return o0(E)}catch{return _}}(h,E)+(C?" "+C:"")})}Vl.La="serverreachability",D(QL,ln),Vl.STAT_EVENT="statevent",D(YL,ln),Vl.Ma="timingevent",D(JL,ln),zp.prototype.xa=function(){this.g=!1},zp.prototype.info=function(){};var c0,bv={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},XL={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Av(){}function Eu(h,_,E,C){this.j=h,this.i=_,this.l=E,this.R=C||1,this.U=new Up(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ZL}function ZL(){this.i=null,this.g="",this.h=!1}D(Av,a0),Av.prototype.g=function(){return new XMLHttpRequest},Av.prototype.i=function(){return{}},c0=new Av;var e2={},d0={};function h0(h,_,E){h.L=1,h.v=Pv(fa(_)),h.m=E,h.P=!0,t2(h,null)}function t2(h,_){h.F=Date.now(),Dv(h),h.A=fa(h.v);var E=h.A,C=h.R;Array.isArray(C)||(C=[String(C)]),g2(E.i,"t",C),h.C=0,E=h.j.J,h.h=new ZL,h.g=x2(h.j,E?_:null,!h.m),0<h.O&&(h.M=new AX(v(h.Y,h,h.g),h.O)),_=h.U,E=h.g,C=h.ca;var q="readystatechange";Array.isArray(q)||(q&&(zL[0]=q.toString()),q=zL);for(var Z=0;Z<q.length;Z++){var _e=VL(E,q[Z],C||_.handleEvent,!1,_.h||_);if(!_e)break;_.g[_e.key]=_e}_=h.H?R(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),$p(),function SX(h,_,E,C,q,Z){h.info(function(){if(h.g)if(Z)for(var _e="",Kt=Z.split("&"),Nr=0;Nr<Kt.length;Nr++){var Pt=Kt[Nr].split("=");if(1<Pt.length){var Hr=Pt[0];Pt=Pt[1];var zr=Hr.split("_");_e=2<=zr.length&&"type"==zr[1]?_e+(Hr+"=")+Pt+"&":_e+(Hr+"=redacted&")}}else _e=null;else _e=Z;return"XMLHTTP REQ ("+C+") [attempt "+q+"]: "+_+"\n"+E+"\n"+_e})}(h.i,h.u,h.A,h.l,h.R,h.m)}function n2(h){return!!h.g&&"GET"==h.u&&2!=h.L&&h.j.Ca}function NX(h,_){var E=h.C,C=_.indexOf("\n",E);return-1==C?d0:(E=Number(_.substring(E,C)),isNaN(E)?e2:(C+=1)+E>_.length?d0:(_=_.slice(C,C+E),h.C=C+E,_))}function Dv(h){h.S=Date.now()+h.I,r2(h,h.I)}function r2(h,_){if(null!=h.B)throw Error("WatchDog timer not null");h.B=Hp(v(h.ba,h),_)}function f0(h){h.B&&(a.clearTimeout(h.B),h.B=null)}function qp(h){0==h.j.G||h.J||P2(h.j,h)}function Ll(h){f0(h);var _=h.M;_&&"function"==typeof _.ma&&_.ma(),h.M=null,qL(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function p0(h,_){try{var E=h.j;if(0!=E.G&&(E.g==h||g0(E.h,h)))if(!h.K&&g0(E.h,h)&&3==E.G){try{var C=E.Da.g.parse(_)}catch{C=null}if(Array.isArray(C)&&3==C.length){var q=C;if(0==q[0]){e:if(!E.u){if(E.g){if(!(E.g.F+3e3<h.F))break e;Ov(E),Nv(E)}v0(E),ui(18)}}else E.za=q[1],0<E.za-E.T&&37500>q[2]&&E.F&&0==E.v&&!E.C&&(E.C=Hp(v(E.Za,E),6e3));if(1>=o2(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Ul(E,11)}else if((h.K||E.g==h)&&Ov(E),!B(_))for(q=E.Da.g.parse(_),_=0;_<q.length;_++){let Pt=q[_];if(E.T=Pt[0],Pt=Pt[1],2==E.G)if("c"==Pt[0]){E.K=Pt[1],E.ia=Pt[2];const Hr=Pt[3];null!=Hr&&(E.la=Hr,E.j.info("VER="+E.la));const zr=Pt[4];null!=zr&&(E.Aa=zr,E.j.info("SVER="+E.Aa));const Zd=Pt[5];null!=Zd&&"number"==typeof Zd&&0<Zd&&(E.L=C=1.5*Zd,E.j.info("backChannelRequestTimeoutMs_="+C)),C=E;const ks=h.g;if(ks){const Fv=ks.g?ks.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fv){var Z=C.h;Z.g||-1==Fv.indexOf("spdy")&&-1==Fv.indexOf("quic")&&-1==Fv.indexOf("h2")||(Z.j=Z.l,Z.g=new Set,Z.h&&(m0(Z,Z.h),Z.h=null))}if(C.D){const I0=ks.g?ks.g.getResponseHeader("X-HTTP-Session-Id"):null;I0&&(C.ya=I0,dn(C.I,C.D,I0))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms"));var _e=h;if((C=E).qa=N2(C,C.J?C.ia:null,C.W),_e.K){a2(C.h,_e);var Kt=_e,Nr=C.L;Nr&&(Kt.I=Nr),Kt.B&&(f0(Kt),Dv(Kt)),C.g=_e}else C2(C);0<E.i.length&&xv(E)}else"stop"!=Pt[0]&&"close"!=Pt[0]||Ul(E,7);else 3==E.G&&("stop"==Pt[0]||"close"==Pt[0]?"stop"==Pt[0]?Ul(E,7):y0(E):"noop"!=Pt[0]&&E.l&&E.l.ta(Pt),E.v=0)}$p()}catch{}}function i2(h){this.l=h||10,h=a.PerformanceNavigationTiming?0<(h=a.performance.getEntriesByType("navigation")).length&&("hq"==h[0].nextHopProtocol||"h2"==h[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function s2(h){return!!h.h||!!h.g&&h.g.size>=h.j}function o2(h){return h.h?1:h.g?h.g.size:0}function g0(h,_){return h.h?h.h==_:!!h.g&&h.g.has(_)}function m0(h,_){h.g?h.g.add(_):h.h=_}function a2(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}function u2(h){if(null!=h.h)return h.i.concat(h.h.D);if(null!=h.g&&0!==h.g.size){let _=h.i;for(const E of h.g.values())_=_.concat(E.D);return _}return S(h.i)}function l2(h,_){if(h.forEach&&"function"==typeof h.forEach)h.forEach(_,void 0);else if(u(h)||"string"==typeof h)Array.prototype.forEach.call(h,_,void 0);else for(var E=function kX(h){if(h.na&&"function"==typeof h.na)return h.na();if(!h.V||"function"!=typeof h.V){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(u(h)||"string"==typeof h){var _=[];h=h.length;for(var E=0;E<h;E++)_.push(E);return _}_=[],E=0;for(const C in h)_[E++]=C;return _}}}(h),C=function OX(h){if(h.V&&"function"==typeof h.V)return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if("string"==typeof h)return h.split("");if(u(h)){for(var _=[],E=h.length,C=0;C<E;C++)_.push(h[C]);return _}for(C in _=[],E=0,h)_[E++]=h[C];return _}(h),q=C.length,Z=0;Z<q;Z++)_.call(void 0,C[Z],E&&E[Z],h)}Eu.prototype.ca=function(h){h=h.target;const _=this.M;_&&3==pa(h)?_.j():this.Y(h)},Eu.prototype.Y=function(h){try{if(h==this.g)e:{const zr=pa(this.g);var _=this.g.Ba();if(this.g.Z(),!(3>zr)&&(3!=zr||this.g&&(this.h.h||this.g.oa()||w2(this.g)))){this.J||4!=zr||7==_||$p(),f0(this);var E=this.g.Z();this.X=E;t:if(n2(this)){var C=w2(this.g);h="";var q=C.length,Z=4==pa(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ll(this),qp(this);var _e="";break t}this.h.i=new a.TextDecoder}for(_=0;_<q;_++)this.h.h=!0,h+=this.h.i.decode(C[_],{stream:!(Z&&_==q-1)});C.length=0,this.h.g+=h,this.C=0,_e=this.h.g}else _e=this.g.oa();if(this.o=200==E,function PX(h,_,E,C,q,Z,_e){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+q+"]: "+_+"\n"+E+"\n"+Z+" "+_e})}(this.i,this.u,this.A,this.l,this.R,zr,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Kt,Nr=this.g;if((Kt=Nr.g?Nr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(Kt)){var Pt=Kt;break t}}Pt=null}if(!(E=Pt)){this.o=!1,this.s=3,ui(12),Ll(this),qp(this);break e}Yd(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,p0(this,E)}if(this.P){let ks;for(E=!0;!this.J&&this.C<_e.length;){if(ks=NX(this,_e),ks==d0){4==zr&&(this.s=4,ui(14),E=!1),Yd(this.i,this.l,null,"[Incomplete Response]");break}if(ks==e2){this.s=4,ui(15),Yd(this.i,this.l,_e,"[Invalid Chunk]"),E=!1;break}Yd(this.i,this.l,ks,null),p0(this,ks)}if(n2(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=zr||0!=_e.length||this.h.h||(this.s=1,ui(16),E=!1),this.o=this.o&&E,E){if(0<_e.length&&!this.W){this.W=!0;var Hr=this.j;Hr.g==this&&Hr.ba&&!Hr.M&&(Hr.j.info("Great, no buffering proxy detected. Bytes received: "+_e.length),E0(Hr),Hr.M=!0,ui(11))}}else Yd(this.i,this.l,_e,"[Invalid Chunked Response]"),Ll(this),qp(this)}else Yd(this.i,this.l,_e,null),p0(this,_e);4==zr&&Ll(this),this.o&&!this.J&&(4==zr?P2(this.j,this):(this.o=!1,Dv(this)))}else(function QX(h){const _={};h=(h.g&&2<=pa(h)&&h.g.getAllResponseHeaders()||"").split("\r\n");for(let C=0;C<h.length;C++){if(B(h[C]))continue;var E=H(h[C]);const q=E[0];if("string"!=typeof(E=E[1]))continue;E=E.trim();const Z=_[q]||[];_[q]=Z,Z.push(E)}!function L(h,_){for(const E in h)_.call(void 0,h[E],E,h)}(_,function(C){return C.join(", ")})})(this.g),400==E&&0<_e.indexOf("Unknown SID")?(this.s=3,ui(12)):(this.s=0,ui(13)),Ll(this),qp(this)}}}catch{}},Eu.prototype.cancel=function(){this.J=!0,Ll(this)},Eu.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(function RX(h,_){h.info(function(){return"TIMEOUT: "+_})}(this.i,this.A),2!=this.L&&($p(),ui(17)),Ll(this),this.s=2,qp(this)):r2(this,this.S-h)},i2.prototype.cancel=function(){if(this.i=u2(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const h of this.g.values())h.cancel();this.g.clear()}};var c2=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bl(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Bl){this.h=h.h,Cv(this,h.j),this.o=h.o,this.g=h.g,Sv(this,h.s),this.l=h.l;var _=h.i,E=new Kp;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),d2(this,E),this.m=h.m}else h&&(_=String(h).match(c2))?(this.h=!1,Cv(this,_[1]||"",!0),this.o=Gp(_[2]||""),this.g=Gp(_[3]||"",!0),Sv(this,_[4]),this.l=Gp(_[5]||"",!0),d2(this,_[6]||"",!0),this.m=Gp(_[7]||"")):(this.h=!1,this.i=new Kp(null,this.h))}function fa(h){return new Bl(h)}function Cv(h,_,E){h.j=E?Gp(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Sv(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function d2(h,_,E){_ instanceof Kp?(h.i=_,function $X(h,_){_&&!h.j&&(Iu(h),h.i=null,h.g.forEach(function(E,C){var q=C.toLowerCase();C!=q&&(f2(this,C),g2(this,q,E))},h)),h.j=_}(h.i,h.h)):(E||(_=Wp(_,UX)),h.i=new Kp(_,h.h))}function dn(h,_,E){h.i.set(_,E)}function Pv(h){return dn(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Gp(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Wp(h,_,E){return"string"==typeof h?(h=encodeURI(h).replace(_,VX),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function VX(h){return"%"+((h=h.charCodeAt(0))>>4&15).toString(16)+(15&h).toString(16)}Bl.prototype.toString=function(){var h=[],_=this.j;_&&h.push(Wp(_,h2,!0),":");var E=this.g;return(E||"file"==_)&&(h.push("//"),(_=this.o)&&h.push(Wp(_,h2,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(E=this.s)&&h.push(":",String(E))),(E=this.l)&&(this.g&&"/"!=E.charAt(0)&&h.push("/"),h.push(Wp(E,"/"==E.charAt(0)?BX:LX,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Wp(E,jX)),h.join("")};var h,h2=/[#\/\?@]/g,LX=/[#\?:]/g,BX=/[#\?]/g,UX=/[#\?@]/g,jX=/#/g;function Kp(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Iu(h){h.g||(h.g=new Map,h.h=0,h.i&&function FX(h,_){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var C=h[E].indexOf("="),q=null;if(0<=C){var Z=h[E].substring(0,C);q=h[E].substring(C+1)}else Z=h[E];_(Z,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}function f2(h,_){Iu(h),_=Jd(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function p2(h,_){return Iu(h),_=Jd(h,_),h.g.has(_)}function g2(h,_,E){f2(h,_),0<E.length&&(h.i=null,h.g.set(Jd(h,_),S(E)),h.h+=E.length)}function Jd(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function wu(h,_,E,C,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),C(E)}catch{}}function qX(){this.g=new CX}function GX(h,_,E){const C=E||"";try{l2(h,function(q,Z){let _e=q;d(q)&&(_e=o0(q)),_.push(C+Z+"="+encodeURIComponent(_e))})}catch(q){throw _.push(C+"type="+encodeURIComponent("_badmap")),q}}function Qp(h){this.l=h.Ub||null,this.j=h.eb||!1}function Rv(h,_){$r.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function m2(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}function Yp(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Jp(h)}function Jp(h){h.onreadystatechange&&h.onreadystatechange.call(h)}function _2(h){let _="";return Te(h,function(E,C){_+=C,_+=":",_+=E,_+="\r\n"}),_}function _0(h,_,E){e:{for(C in E){var C=!1;break e}C=!0}C||(E=_2(E),"string"==typeof h?null!=E&&encodeURIComponent(String(E)):dn(h,_,E))}function Rn(h){$r.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=Kp.prototype).add=function(h,_){Iu(this),this.i=null,h=Jd(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this},n.forEach=function(h,_){Iu(this),this.g.forEach(function(E,C){E.forEach(function(q){h.call(_,q,C,this)},this)},this)},n.na=function(){Iu(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let C=0;C<_.length;C++){const q=h[C];for(let Z=0;Z<q.length;Z++)E.push(_[C])}return E},n.V=function(h){Iu(this);let _=[];if("string"==typeof h)p2(this,h)&&(_=_.concat(this.g.get(Jd(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)_=_.concat(h[E])}return _},n.set=function(h,_){return Iu(this),this.i=null,p2(this,h=Jd(this,h))&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h&&0<(h=this.V(h)).length?String(h[0]):_},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var C=_[E];const Z=encodeURIComponent(String(C)),_e=this.V(C);for(C=0;C<_e.length;C++){var q=Z;""!==_e[C]&&(q+="="+encodeURIComponent(String(_e[C]))),h.push(q)}}return this.i=h.join("&")},D(Qp,a0),Qp.prototype.g=function(){return new Rv(this.l,this.j)},Qp.prototype.i=(h={},function(){return h}),D(Rv,$r),(n=Rv.prototype).open=function(h,_){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Jp(this)},n.send=function(h){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Yp(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Jp(this)),this.g&&(this.readyState=3,Jp(this),this.g)))if("arraybuffer"===this.responseType)h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;m2(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Yp(this):Jp(this),3==this.readyState&&m2(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Yp(this))},n.Qa=function(h){this.g&&(this.response=h,Yp(this))},n.ga=function(){this.g&&Yp(this)},n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)h.push((E=E.value)[0]+": "+E[1]),E=_.next();return h.join("\r\n")},Object.defineProperty(Rv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(h){this.m=h?"include":"same-origin"}}),D(Rn,$r);var WX=/^https?$/i,KX=["POST","PUT"];function y2(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,v2(h),Mv(h)}function v2(h){h.A||(h.A=!0,ai(h,"complete"),ai(h,"error"))}function E2(h){if(h.h&&typeof o<"u"&&(!h.v[1]||4!=pa(h)||2!=h.Z()))if(h.u&&4==pa(h))$L(h.Ea,0,h);else if(ai(h,"readystatechange"),4==pa(h)){h.h=!1;try{const _e=h.Z();e:switch(_e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var C;if(C=0===_e){var q=String(h.D).match(c2)[1]||null;!q&&a.self&&a.self.location&&(q=a.self.location.protocol.slice(0,-1)),C=!WX.test(q?q.toLowerCase():"")}E=C}if(E)ai(h,"complete"),ai(h,"success");else{h.m=6;try{var Z=2<pa(h)?h.g.statusText:""}catch{Z=""}h.l=Z+" ["+h.Z()+"]",v2(h)}}finally{Mv(h)}}}function Mv(h,_){if(h.g){I2(h);const E=h.g,C=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||ai(h,"ready");try{E.onreadystatechange=C}catch{}}}function I2(h){h.I&&(a.clearTimeout(h.I),h.I=null)}function pa(h){return h.g?h.g.readyState:0}function w2(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Xp(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function T2(h){this.Aa=0,this.i=[],this.j=new zp,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xp("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xp("baseRetryDelayMs",5e3,h),this.cb=Xp("retryDelaySeedMs",1e4,h),this.Wa=Xp("forwardChannelMaxRetries",2,h),this.wa=Xp("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new i2(h&&h.concurrentRequestLimit),this.Da=new qX,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function y0(h){if(b2(h),3==h.G){var _=h.U++,E=fa(h.I);if(dn(E,"SID",h.K),dn(E,"RID",_),dn(E,"TYPE","terminate"),Zp(h,E),(_=new Eu(h,h.j,_)).L=2,_.v=Pv(fa(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&a.Image&&((new Image).src=_.v,E=!0),E||(_.g=x2(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Dv(_)}M2(h)}function Nv(h){h.g&&(E0(h),h.g.cancel(),h.g=null)}function b2(h){Nv(h),h.u&&(a.clearTimeout(h.u),h.u=null),Ov(h),h.h.cancel(),h.s&&("number"==typeof h.s&&a.clearTimeout(h.s),h.s=null)}function xv(h){if(!s2(h.h)&&!h.s){h.s=!0;var _=h.Ga;Ne||Un(),Fe||(Ne(),Fe=!0),ct.add(_,h),h.B=0}}function A2(h,_){var E;E=_?_.l:h.U++;const C=fa(h.I);dn(C,"SID",h.K),dn(C,"RID",E),dn(C,"AID",h.T),Zp(h,C),h.m&&h.o&&_0(C,h.m,h.o),E=new Eu(h,h.j,E,h.B+1),null===h.m&&(E.H=h.o),_&&(h.i=_.D.concat(h.i)),_=D2(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),m0(h.h,E),h0(E,C,_)}function Zp(h,_){h.H&&Te(h.H,function(E,C){dn(_,C,E)}),h.l&&l2({},function(E,C){dn(_,C,E)})}function D2(h,_,E){E=Math.min(h.i.length,E);var C=h.l?v(h.l.Na,h.l,h):null;e:{var q=h.i;let Z=-1;for(;;){const _e=["count="+E];-1==Z?0<E?(Z=q[0].g,_e.push("ofs="+Z)):Z=0:_e.push("ofs="+Z);let Kt=!0;for(let Nr=0;Nr<E;Nr++){let Pt=q[Nr].g;const Hr=q[Nr].map;if(Pt-=Z,0>Pt)Z=Math.max(0,q[Nr].g-100),Kt=!1;else try{GX(Hr,_e,"req"+Pt+"_")}catch{C&&C(Hr)}}if(Kt){C=_e.join("&");break e}}}return h=h.i.splice(0,E),_.D=h,C}function C2(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;Ne||Un(),Fe||(Ne(),Fe=!0),ct.add(_,h),h.v=0}}function v0(h){return!(h.g||h.u||3<=h.v||(h.Y++,h.u=Hp(v(h.Fa,h),R2(h,h.v)),h.v++,0))}function E0(h){null!=h.A&&(a.clearTimeout(h.A),h.A=null)}function S2(h){h.g=new Eu(h,h.j,"rpc",h.Y),null===h.m&&(h.g.H=h.o),h.g.O=0;var _=fa(h.qa);dn(_,"RID","rpc"),dn(_,"SID",h.K),dn(_,"AID",h.T),dn(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&dn(_,"TO",h.ja),dn(_,"TYPE","xmlhttp"),Zp(h,_),h.m&&h.o&&_0(_,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=Pv(fa(_)),E.m=null,E.P=!0,t2(E,h)}function Ov(h){null!=h.C&&(a.clearTimeout(h.C),h.C=null)}function P2(h,_){var E=null;if(h.g==_){Ov(h),E0(h),h.g=null;var C=2}else{if(!g0(h.h,_))return;E=_.D,a2(h.h,_),C=1}if(0!=h.G)if(_.o)if(1==C){E=_.m?_.m.length:0,_=Date.now()-_.F;var q=h.B;ai(C=Tv(),new JL(C,E)),xv(h)}else C2(h);else if(3==(q=_.s)||0==q&&0<_.X||!(1==C&&function YX(h,_){return!(o2(h.h)>=h.h.j-(h.s?1:0)||(h.s?(h.i=_.D.concat(h.i),0):1==h.G||2==h.G||h.B>=(h.Va?0:h.Wa)||(h.s=Hp(v(h.Ga,h,_),R2(h,h.B)),h.B++,0)))}(h,_)||2==C&&v0(h)))switch(E&&0<E.length&&(_=h.h,_.i=_.i.concat(E)),q){case 1:Ul(h,5);break;case 4:Ul(h,10);break;case 3:Ul(h,6);break;default:Ul(h,2)}}function R2(h,_){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*_}function Ul(h,_){if(h.j.info("Error code "+_),2==_){var E=v(h.fb,h),C=h.Xa;const q=!C;C=new Bl(C||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Cv(C,"https"),Pv(C),q?function HX(h,_){const E=new zp;if(a.Image){const C=new Image;C.onload=T(wu,E,"TestLoadImage: loaded",!0,_,C),C.onerror=T(wu,E,"TestLoadImage: error",!1,_,C),C.onabort=T(wu,E,"TestLoadImage: abort",!1,_,C),C.ontimeout=T(wu,E,"TestLoadImage: timeout",!1,_,C),a.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else _(!1)}(C.toString(),E):function zX(h,_){new zp;const C=new AbortController,q=setTimeout(()=>{C.abort(),wu(0,0,!1,_)},1e4);fetch(h,{signal:C.signal}).then(Z=>{clearTimeout(q),wu(0,0,!!Z.ok,_)}).catch(()=>{clearTimeout(q),wu(0,0,!1,_)})}(C.toString(),E)}else ui(2);h.G=0,h.l&&h.l.sa(_),M2(h),b2(h)}function M2(h){if(h.G=0,h.ka=[],h.l){const _=u2(h.h);(0!=_.length||0!=h.i.length)&&(x(h.ka,_),x(h.ka,h.i),h.h.i.length=0,S(h.i),h.i.length=0),h.l.ra()}}function N2(h,_,E){var C=E instanceof Bl?fa(E):new Bl(E);if(""!=C.g)_&&(C.g=_+"."+C.g),Sv(C,C.s);else{var q=a.location;C=q.protocol,_=_?_+"."+q.hostname:q.hostname,q=+q.port;var Z=new Bl(null);C&&Cv(Z,C),_&&(Z.g=_),q&&Sv(Z,q),E&&(Z.l=E),C=Z}return _=h.ya,(E=h.D)&&_&&dn(C,E,_),dn(C,"VER",h.la),Zp(h,C),C}function x2(h,_,E){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return(_=new Rn(h.Ca&&!h.pa?new Qp({eb:E}):h.pa)).Ha(h.J),_}function O2(){}function kv(){}function qi(h,_){$r.call(this),this.g=new T2(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!B(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!B(_)&&(this.g.D=_,null!==(h=this.h)&&_ in h&&_ in(h=this.h)&&delete h[_]),this.j=new Xd(this)}function k2(h){u0.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const E in _){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,_=null!==_&&h in _?_[h]:void 0),this.data=_}else this.data=h}function F2(){l0.call(this),this.status=1}function Xd(h){this.g=h}(n=Rn.prototype).Ha=function(h){this.J=h},n.ea=function(h,_,E,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():c0.g(),this.v=function GL(h){return h.h||(h.h=h.i())}(this.o?this.o:c0),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(Z){return void y2(this,Z)}if(h=E||"",E=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var q in C)E.set(q,C[q]);else{if("function"!=typeof C.keys||"function"!=typeof C.get)throw Error("Unknown input type for opt_headers: "+String(C));for(const Z of C.keys())E.set(Z,C.get(Z))}C=Array.from(E.keys()).find(Z=>"content-type"==Z.toLowerCase()),q=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(KX,_,void 0))||C||q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,_e]of E)this.g.setRequestHeader(Z,_e);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{I2(this),this.u=!0,this.g.send(h),this.u=!1}catch(Z){y2(this,Z)}},n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,ai(this,"complete"),ai(this,"abort"),Mv(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mv(this,!0)),Rn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?E2(this):this.bb())},n.bb=function(){E2(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<pa(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&0==_.indexOf(h)&&(_=_.substring(h.length)),DX(_)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=T2.prototype).la=8,n.G=1,n.connect=function(h,_,E,C){ui(0),this.W=h,this.H=_||{},E&&void 0!==C&&(this.H.OSID=E,this.H.OAID=C),this.F=this.X,this.I=N2(this,null,this.W),xv(this)},n.Ga=function(h){if(this.s)if(this.s=null,1==this.G){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const q=new Eu(this,this.j,h);let Z=this.o;if(this.S&&(Z?(Z=R(Z),U(Z,this.S)):Z=this.S),null!==this.m||this.O||(q.H=Z,Z=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){var C=this.i[E];if(void 0===(C="__data__"in C.map&&"string"==typeof(C=C.map.__data__)?C.length:void 0))break;if(4096<(_+=C)){_=E;break e}if(4096===_||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=D2(this,q,_),dn(E=fa(this.I),"RID",h),dn(E,"CVER",22),this.D&&dn(E,"X-HTTP-Session-Id",this.D),Zp(this,E),Z&&(this.O?_="headers="+encodeURIComponent(String(_2(Z)))+"&"+_:this.m&&_0(E,this.m,Z)),m0(this.h,q),this.Ua&&dn(E,"TYPE","init"),this.P?(dn(E,"$req",_),dn(E,"SID","null"),q.T=!0,h0(q,E,null)):h0(q,E,_),this.G=2}}else 3==this.G&&(h?A2(this,h):0==this.i.length||s2(this.h)||A2(this))},n.Fa=function(){if(this.u=null,S2(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Hp(v(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ui(10),Nv(this),S2(this))},n.Za=function(){null!=this.C&&(this.C=null,Nv(this),v0(this),ui(19))},n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),ui(2)):(this.j.info("Failed to ping google.com"),ui(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=O2.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},kv.prototype.g=function(h,_){return new qi(h,_)},D(qi,$r),qi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qi.prototype.close=function(){y0(this.g)},qi.prototype.o=function(h){var _=this.g;if("string"==typeof h){var E={};E.__data__=h,h=E}else this.u&&((E={}).__data__=o0(h),h=E);_.i.push(new class{constructor(h,_){this.g=h,this.map=_}}(_.Ya++,h)),3==_.G&&xv(_)},qi.prototype.N=function(){this.g.l=null,delete this.j,y0(this.g),delete this.g,qi.aa.N.call(this)},D(k2,u0),D(F2,l0),D(Xd,O2),Xd.prototype.ua=function(){ai(this.g,"a")},Xd.prototype.ta=function(h){ai(this.g,new k2(h))},Xd.prototype.sa=function(h){ai(this.g,new F2)},Xd.prototype.ra=function(){ai(this.g,"b")},kv.prototype.createWebChannel=kv.prototype.g,qi.prototype.send=qi.prototype.o,qi.prototype.open=qi.prototype.m,qi.prototype.close=qi.prototype.close,FO=ta.createWebChannelTransport=function(){return new kv},kO=ta.getStatEventTarget=function(){return Tv()},OO=ta.Event=Vl,mb=ta.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},bv.NO_ERROR=0,bv.TIMEOUT=8,bv.HTTP_ERROR=6,Iy=ta.ErrorCode=bv,XL.COMPLETE="complete",xO=ta.EventType=XL,WL.EventType=jp,jp.OPEN="a",jp.CLOSE="b",jp.ERROR="c",jp.MESSAGE="d",$r.prototype.listen=$r.prototype.K,Jf=ta.WebChannel=WL,ta.FetchXmlHttpFactory=Qp,Rn.prototype.listenOnce=Rn.prototype.L,Rn.prototype.getLastError=Rn.prototype.Ka,Rn.prototype.getLastErrorCode=Rn.prototype.Ba,Rn.prototype.getStatus=Rn.prototype.Z,Rn.prototype.getResponseJson=Rn.prototype.Oa,Rn.prototype.getResponseText=Rn.prototype.oa,Rn.prototype.send=Rn.prototype.ea,Rn.prototype.setWithCredentials=Rn.prototype.Ha,NO=ta.XhrIo=Rn}).apply(typeof Ey<"u"?Ey:typeof self<"u"?self:typeof window<"u"?window:{});const VO="@firebase/firestore";class Tr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tr.UNAUTHENTICATED=new Tr(null),Tr.GOOGLE_CREDENTIALS=new Tr("google-credentials-uid"),Tr.FIRST_PARTY=new Tr("first-party-uid"),Tr.MOCK_USER=new Tr("mock-user");let hd="10.14.0";const Xa=new lo.Vy("@firebase/firestore");function fd(){return Xa.logLevel}function ue(n,...e){if(Xa.logLevel<=lo.$b.DEBUG){const t=e.map(_b);Xa.debug(`Firestore (${hd}): ${n}`,...t)}}function Ln(n,...e){if(Xa.logLevel<=lo.$b.ERROR){const t=e.map(_b);Xa.error(`Firestore (${hd}): ${n}`,...t)}}function $i(n,...e){if(Xa.logLevel<=lo.$b.WARN){const t=e.map(_b);Xa.warn(`Firestore (${hd}): ${n}`,...t)}}function _b(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function De(n="Unexpected state"){const e=`FIRESTORE (${hd}) INTERNAL ASSERTION FAILED: `+n;throw Ln(e),new Error(e)}function Ce(n,e){n||De()}function pe(n,e){return n}const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends St.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class br{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class LO{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Tr.UNAUTHENTICATED))}shutdown(){}}class uK{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class lK{constructor(e){this.t=e,this.currentUser=Tr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;Ce(void 0===this.o);let i=this.i;const s=d=>this.i!==i?(i=this.i,t(d)):Promise.resolve();let o=new br;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new br,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const d=o;e.enqueueRetryable((0,re.A)(function*(){yield d.promise,yield s(r.currentUser)}))},u=d=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new br)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ce("string"==typeof r.accessToken),new LO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(null===e||"string"==typeof e),new Tr(e)}}class cK{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Tr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class dK{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new cK(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Tr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class BO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hK{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ce(void 0===this.o);const r=s=>{null!=s.error&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ue("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ce("string"==typeof t.token),this.R=t.token,new BO(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function fK(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class UO{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=fK(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Ge(n,e){return n<e?-1:n>e?1:0}function pd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function jO(n){return n+"\0"}class mn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ae(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ae(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ae(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return mn.fromMillis(Date.now())}static fromDate(e){return mn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new mn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ge(this.nanoseconds,e.nanoseconds):Ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Me{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Me(e)}static min(){return new Me(new mn(0,0))}static max(){return new Me(new mn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Xf{constructor(e,t,r){void 0===t?t=0:t>e.length&&De(),void 0===r?r=e.length-t:r>e.length-t&&De(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Xf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class gt extends Xf{construct(e,t,r){return new gt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ae(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new gt(t)}static emptyPath(){return new gt([])}}const pK=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class on extends Xf{construct(e,t,r){return new on(e,t,r)}static isValidIdentifier(e){return pK.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),on.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new on(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new ae(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new ae(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ae(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ae(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new on(t)}static emptyPath(){return new on([])}}class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(gt.fromString(e))}static fromName(e){return new Ee(gt.fromString(e).popFirst(5))}static empty(){return new Ee(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===gt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return gt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new gt(e.slice()))}}class gd{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function yb(n){return n.fields.find(e=>2===e.kind)}function ml(n){return n.fields.filter(e=>2!==e.kind)}gd.UNKNOWN_ID=-1;class _l{constructor(e,t){this.fieldPath=e,this.kind=t}}class md{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new md(0,Hi.min())}}function $O(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Me.fromTimestamp(1e9===r?new mn(t+1,0):new mn(t,r));return new Hi(i,Ee.empty(),e)}function HO(n){return new Hi(n.readTime,n.key,-1)}class Hi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Hi(Me.min(),Ee.empty(),-1)}static max(){return new Hi(Me.max(),Ee.empty(),-1)}}function vb(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ee.comparator(n.documentKey,e.documentKey),0!==t?t:Ge(n.largestBatchId,e.largestBatchId))}const zO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Za(n){return Eb.apply(this,arguments)}function Eb(){return Eb=(0,re.A)(function*(n){if(n.code!==X.FAILED_PRECONDITION||n.message!==zO)throw n;ue("LocalStore","Unexpectedly lost primary lease")}),Eb.apply(this,arguments)}class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&De(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):G.reject(t)}static resolve(e){return new G((t,r)=>{t(e)})}static reject(e){return new G((t,r)=>{r(e)})}static waitFor(e){return new G((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=G.resolve(!1);for(const r of e)t=t.next(i=>i?G.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new G((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const d=u;t(e[d]).next(g=>{o[d]=g,++a,a===s&&r(o)},g=>i(g))}})}static doWhile(e,t){return new G((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class wy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new br,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Zf(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=Ib(r.target.error);this.V.reject(new Zf(e,i))}}static open(e,t,r,i){try{return new wy(t,e.transaction(i,r))}catch(s){throw new Zf(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ue("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new yK(t)}}class co{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===co.S((0,St.ZQ)())&&Ln("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ue("SimpleDb","Removing database:",e),yl(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,St.zW)())return!1;if(co.v())return!0;const e=(0,St.ZQ)(),t=co.S(e),r=0<t&&t<10,i=GO(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,re.A)(function*(){return t.db||(ue("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new Zf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new ae(X.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new ae(X.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Zf(e,a))},s.onupgradeneeded=o=>{ue("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{ue("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,re.A)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const u=wy.open(s.db,e,o?"readonly":"readwrite",r),d=i(u).next(g=>(u.g(),g)).catch(g=>(u.abort(g),G.reject(g))).toPromise();return d.catch(()=>{}),yield u.m,d}catch(u){const d=u,g="FirebaseError"!==d.name&&a<3;if(ue("SimpleDb","Transaction failed with error:",d.message,"Retrying:",g),s.close(),!g)return Promise.reject(d)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function GO(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class _K{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return yl(this.B.delete())}}class Zf extends ae{constructor(e,t){super(X.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function eu(n){return"IndexedDbTransactionError"===n.name}class yK{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ue("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ue("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),yl(r)}add(e){return ue("SimpleDb","ADD",this.store.name,e,e),yl(this.store.add(e))}get(e){return yl(this.store.get(e)).next(t=>(void 0===t&&(t=null),ue("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ue("SimpleDb","DELETE",this.store.name,e),yl(this.store.delete(e))}count(){return ue("SimpleDb","COUNT",this.store.name),yl(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new G((o,a)=>{s.onerror=u=>{a(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,u)=>{o.push(u)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new G((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){ue("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new G((r,i)=>{t.onerror=s=>{const o=Ib(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new G((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new _K(a),d=t(a.primaryKey,a.value,u);if(d instanceof G){const g=d.catch(m=>(u.done(),G.reject(m)));r.push(g)}u.isDone?i():null===u.K?a.continue():a.continue(u.K)}}).next(()=>G.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function yl(n){return new G((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Ib(r.target.error);t(i)}})}let WO=!1;function Ib(n){const e=co.S((0,St.ZQ)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return WO||(WO=!0,setTimeout(()=>{throw r},0)),r}}return n}class vK{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;ue("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,re.A)(function*(){t.task=null;try{ue("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){eu(r)?ue("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield Za(r)}yield t.X(6e4)}))}}class EK{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,re.A)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return G.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return ue("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(ue("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=HO(s);vb(o,r)>0&&(r=o)}),new Hi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let zi=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function ep(n){return null==n}function tp(n){return 0===n&&1/n==-1/0}function KO(n){return"number"==typeof n&&Number.isInteger(n)&&!tp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Lr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=QO(e)),e=IK(n.get(t),e);return QO(e)}function IK(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function QO(n){return n+"\x01\x01"}function ho(n){const e=n.length;if(Ce(e>=2),2===e)return Ce("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),gt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&De(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:De()}s=o+2}return new gt(r)}const YO=["userId","batchId"];function Ty(n,e){return[n,Lr(e)]}function JO(n,e,t){return[n,Lr(e),t]}const wK={},TK=["prefixPath","collectionGroup","readTime","documentId"],bK=["prefixPath","collectionGroup","documentId"],AK=["collectionGroup","readTime","prefixPath","documentId"],DK=["canonicalId","targetId"],CK=["targetId","path"],SK=["path","targetId"],PK=["collectionId","parent"],RK=["indexId","uid"],MK=["uid","sequenceNumber"],NK=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],xK=["indexId","uid","orderedDocumentKey"],OK=["userId","collectionPath","documentId"],kK=["userId","collectionPath","largestBatchId"],FK=["userId","collectionGroup","largestBatchId"],XO=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],VK=[...XO,"documentOverlays"],ZO=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ek=ZO,wb=[...ek,"indexConfiguration","indexState","indexEntries"],LK=wb,BK=[...wb,"globals"];class Tb extends qO{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function pr(n,e){const t=pe(n);return co.F(t._e,e)}function tk(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function tu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function rk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class en{constructor(e,t){this.comparator=e,this.root=t||Pr.EMPTY}insert(e,t){return new en(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pr.BLACK,null,null))}remove(e){return new en(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new by(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new by(this.root,e,this.comparator,!1)}getReverseIterator(){return new by(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new by(this.root,e,this.comparator,!0)}}class by{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pr{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Pr.RED,this.left=i??Pr.EMPTY,this.right=s??Pr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Pr(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Pr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Pr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw De();const e=this.left.check();if(e!==this.right.check())throw De();return e+(this.isRed()?0:1)}}Pr.EMPTY=null,Pr.RED=!0,Pr.BLACK=!1,Pr.EMPTY=new class{constructor(){this.size=0}get key(){throw De()}get value(){throw De()}get color(){throw De()}get left(){throw De()}get right(){throw De()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Pr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class jt{constructor(e){this.comparator=e,this.data=new en(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ik(this.data.getIterator())}getIteratorFrom(e){return new ik(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof jt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new jt(this.comparator);return t.data=e,t}}class ik{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function _d(n){return n.hasNext()?n.getNext():void 0}class Ii{constructor(e){this.fields=e,e.sort(on.comparator)}static empty(){return new Ii([])}unionWith(e){let t=new jt(on.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ii(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return pd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class sk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Cn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new sk("Invalid base64 string: "+s):s}}(e);return new Cn(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Cn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cn.EMPTY_BYTE_STRING=new Cn("");const jK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function na(n){if(Ce(!!n),"string"==typeof n){let e=0;const t=jK.exec(n);if(Ce(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_n(n.seconds),nanos:_n(n.nanos)}}function _n(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ra(n){return"string"==typeof n?Cn.fromBase64String(n):Cn.fromUint8Array(n)}function Ay(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Dy(n){const e=n.mapValue.fields.__previous_value__;return Ay(e)?Dy(e):e}function np(n){const e=na(n.mapValue.fields.__local_write_time__.timestampValue);return new mn(e.seconds,e.nanos)}class $K{constructor(e,t,r,i,s,o,a,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=d}}class nu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new nu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof nu&&e.projectId===this.projectId&&e.database===this.database}}const ru={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Cy={nullValue:"NULL_VALUE"};function iu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ay(n)?4:ck(n)?9007199254740991:Ry(n)?10:11:De()}function fo(n,e){if(n===e)return!0;const t=iu(n);if(t!==iu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return np(n).isEqual(np(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=na(i.timestampValue),a=na(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,ra(n.bytesValue).isEqual(ra(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return _n(i.geoPointValue.latitude)===_n(s.geoPointValue.latitude)&&_n(i.geoPointValue.longitude)===_n(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return _n(i.integerValue)===_n(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=_n(i.doubleValue),a=_n(s.doubleValue);return o===a?tp(o)===tp(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return pd(n.arrayValue.values||[],e.arrayValue.values||[],fo);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(tk(o)!==tk(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!fo(o[u],a[u])))return!1;return!0}(n,e);default:return De()}var s}function rp(n,e){return void 0!==(n.values||[]).find(t=>fo(t,e))}function su(n,e){if(n===e)return 0;const t=iu(n),r=iu(e);if(t!==r)return Ge(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ge(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=_n(s.integerValue||s.doubleValue),u=_n(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return ok(n.timestampValue,e.timestampValue);case 4:return ok(np(n),np(e));case 5:return Ge(n.stringValue,e.stringValue);case 6:return function(s,o){const a=ra(s),u=ra(o);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let d=0;d<a.length&&d<u.length;d++){const g=Ge(a[d],u[d]);if(0!==g)return g}return Ge(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ge(_n(s.latitude),_n(o.latitude));return 0!==a?a:Ge(_n(s.longitude),_n(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return ak(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,d,g;const T=null===(a=(s.fields||{}).value)||void 0===a?void 0:a.arrayValue,D=null===(u=(o.fields||{}).value)||void 0===u?void 0:u.arrayValue,S=Ge((null===(d=T?.values)||void 0===d?void 0:d.length)||0,(null===(g=D?.values)||void 0===g?void 0:g.length)||0);return 0!==S?S:ak(T,D)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===ru.mapValue&&o===ru.mapValue)return 0;if(s===ru.mapValue)return 1;if(o===ru.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),d=o.fields||{},g=Object.keys(d);u.sort(),g.sort();for(let m=0;m<u.length&&m<g.length;++m){const v=Ge(u[m],g[m]);if(0!==v)return v;const T=su(a[u[m]],d[g[m]]);if(0!==T)return T}return Ge(u.length,g.length)}(n.mapValue,e.mapValue);default:throw De()}}function ok(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ge(n,e);const t=na(n),r=na(e),i=Ge(t.seconds,r.seconds);return 0!==i?i:Ge(t.nanos,r.nanos)}function ak(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=su(t[i],r[i]);if(s)return s}return Ge(t.length,r.length)}function yd(n){return bb(n)}function bb(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=na(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ra(n.bytesValue).toBase64():"referenceValue"in n?Ee.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=bb(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${bb(t.fields[o])}`;return i+"}"}(n.mapValue):De()}function vl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ab(n){return!!n&&"integerValue"in n}function ip(n){return!!n&&"arrayValue"in n}function uk(n){return!!n&&"nullValue"in n}function lk(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Py(n){return!!n&&"mapValue"in n}function Ry(n){var e,t;return"__vector__"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function sp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return tu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=sp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=sp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function ck(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}const dk={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function HK(n){return"nullValue"in n?Cy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?vl(nu.empty(),Ee.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Ry(n)?dk:{mapValue:{}}:De()}function zK(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?vl(nu.empty(),Ee.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?dk:"mapValue"in n?Ry(n)?{mapValue:{}}:ru:De()}function hk(n,e){const t=su(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function fk(n,e){const t=su(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Rr{constructor(e){this.value=e}static empty(){return new Rr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Py(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sp(t)}setAll(e){let t=on.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=sp(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Py(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Py(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){tu(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Rr(sp(this.value))}}function pk(n){const e=[];return tu(n.fields,(t,r)=>{const i=new on([t]);if(Py(r)){const s=pk(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Ii(e)}class an{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new an(e,0,Me.min(),Me.min(),Me.min(),Rr.empty(),0)}static newFoundDocument(e,t,r,i){return new an(e,1,t,Me.min(),r,i,0)}static newNoDocument(e,t){return new an(e,2,t,Me.min(),Me.min(),Rr.empty(),0)}static newUnknownDocument(e,t){return new an(e,3,t,Me.min(),Me.min(),Rr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Me.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof an&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new an(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ou{constructor(e,t){this.position=e,this.inclusive=t}}function gk(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Ee.comparator(Ee.fromName(o.referenceValue),t.key):su(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function mk(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!fo(n.position[t],e.position[t]))return!1;return!0}class op{constructor(e,t="asc"){this.field=e,this.dir=t}}function qK(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class _k{}class mt extends _k{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new GK(e,t,r):"array-contains"===t?new QK(e,r):"in"===t?new Tk(e,r):"not-in"===t?new YK(e,r):"array-contains-any"===t?new JK(e,r):new mt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new WK(e,r):new KK(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(su(t,this.value)):null!==t&&iu(this.value)===iu(t)&&this.matchesComparison(su(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return De()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kt extends _k{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new kt(e,t)}matches(e){return vd(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function vd(n){return"and"===n.op}function Db(n){return"or"===n.op}function Cb(n){return yk(n)&&vd(n)}function yk(n){for(const e of n.filters)if(e instanceof kt)return!1;return!0}function Sb(n){if(n instanceof mt)return n.field.canonicalString()+n.op.toString()+yd(n.value);if(Cb(n))return n.filters.map(e=>Sb(e)).join(",");{const e=n.filters.map(t=>Sb(t)).join(",");return`${n.op}(${e})`}}function vk(n,e){return n instanceof mt?(r=n,(i=e)instanceof mt&&r.op===i.op&&r.field.isEqual(i.field)&&fo(r.value,i.value)):n instanceof kt?function(r,i){return i instanceof kt&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&vk(o,i.filters[a]),!0)}(n,e):void De();var r,i}function Ek(n,e){const t=n.filters.concat(e);return kt.create(t,n.op)}function Ik(n){return n instanceof mt?`${(t=n).field.canonicalString()} ${t.op} ${yd(t.value)}`:n instanceof kt?function(t){return t.op.toString()+" {"+t.getFilters().map(Ik).join(" ,")+"}"}(n):"Filter";var t}class GK extends mt{constructor(e,t,r){super(e,t,r),this.key=Ee.fromName(r.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class WK extends mt{constructor(e,t){super(e,"in",t),this.keys=wk(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class KK extends mt{constructor(e,t){super(e,"not-in",t),this.keys=wk(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function wk(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ee.fromName(r.referenceValue))}class QK extends mt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ip(t)&&rp(t.arrayValue,this.value)}}class Tk extends mt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&rp(this.value.arrayValue,t)}}class YK extends mt{constructor(e,t){super(e,"not-in",t)}matches(e){if(rp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!rp(this.value.arrayValue,t)}}class JK extends mt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ip(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>rp(this.value.arrayValue,r))}}class XK{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Pb(n,e=null,t=[],r=[],i=null,s=null,o=null){return new XK(n,e,t,r,i,s,o)}function El(n){const e=pe(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Sb(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),ep(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>yd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>yd(r)).join(",")),e.ue=t}return e.ue}function ap(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!qK(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!vk(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!mk(n.startAt,e.startAt)&&mk(n.endAt,e.endAt)}function My(n){return Ee.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Ny(n,e){return n.filters.filter(t=>t instanceof mt&&t.field.isEqual(e))}function bk(n,e,t){let r=Cy,i=!0;for(const s of Ny(n,e)){let o=Cy,a=!0;switch(s.op){case"<":case"<=":o=HK(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Cy}hk({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];hk({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function Ak(n,e,t){let r=ru,i=!0;for(const s of Ny(n,e)){let o=ru,a=!0;switch(s.op){case">=":case">":o=zK(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=ru}fk({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];fk({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class ia{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null}}function Dk(n,e,t,r,i,s,o,a){return new ia(n,e,t,r,i,s,o,a)}function Ed(n){return new ia(n)}function Ck(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Rb(n){return null!==n.collectionGroup}function Id(n){const e=pe(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new jt(on.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new op(s,r))}),t.has(on.keyField().canonicalString())||e.ce.push(new op(on.keyField(),r))}return e.ce}function Br(n){const e=pe(n);return e.le||(e.le=function Pk(n,e){if("F"===n.limitType)return Pb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new op(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new ou(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ou(n.startAt.position,n.startAt.inclusive):null;return Pb(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,Id(n))),e.le}function Mb(n,e){const t=n.filters.concat([e]);return new ia(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function xy(n,e,t){return new ia(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function up(n,e){return ap(Br(n),Br(e))&&n.limitType===e.limitType}function Rk(n){return`${El(Br(n))}|lt:${n.limitType}`}function wd(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Ik(i)).join(", ")}]`),ep(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>yd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>yd(i)).join(",")),`Target(${r})`}(Br(n))}; limitType=${n.limitType})`}function lp(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ee.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Id(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,u){const d=gk(o,a,u);return o.inclusive?d<=0:d<0}(r.startAt,Id(r),i)||r.endAt&&!function(o,a,u){const d=gk(o,a,u);return o.inclusive?d>=0:d>0}(r.endAt,Id(r),i)));var r,i}function Mk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Nk(n){return(e,t)=>{let r=!1;for(const i of Id(n)){const s=ZK(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function ZK(n,e,t){const r=n.field.isKeyField()?Ee.comparator(e.key,t.key):function(s,o,a){const u=o.data.field(s),d=a.data.field(s);return null!==u&&null!==d?su(u,d):De()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return De()}}class sa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){tu(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return rk(this.inner)}size(){return this.innerSize}}const e7=new en(Ee.comparator);function wi(){return e7}const xk=new en(Ee.comparator);function cp(...n){let e=xk;for(const t of n)e=e.insert(t.key,t);return e}function Ok(n){let e=xk;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function po(){return dp()}function kk(){return dp()}function dp(){return new sa(n=>n.toString(),(n,e)=>n.isEqual(e))}const t7=new en(Ee.comparator),n7=new jt(Ee.comparator);function nt(...n){let e=n7;for(const t of n)e=e.add(t);return e}const r7=new jt(Ge);function Nb(){return r7}function xb(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tp(e)?"-0":e}}function Fk(n){return{integerValue:""+n}}function Vk(n,e){return KO(e)?Fk(e):xb(n,e)}class Oy{constructor(){this._=void 0}}function i7(n,e,t){return n instanceof Td?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Ay(s)&&(s=Dy(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Il?Bk(n,e):n instanceof wl?Uk(n,e):function(i,s){const o=Lk(i,s),a=jk(o)+jk(i.Pe);return Ab(o)&&Ab(i.Pe)?Fk(a):xb(i.serializer,a)}(n,e)}function s7(n,e,t){return n instanceof Il?Bk(n,e):n instanceof wl?Uk(n,e):t}function Lk(n,e){return n instanceof bd?Ab(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class Td extends Oy{}class Il extends Oy{constructor(e){super(),this.elements=e}}function Bk(n,e){const t=$k(e);for(const r of n.elements)t.some(i=>fo(i,r))||t.push(r);return{arrayValue:{values:t}}}class wl extends Oy{constructor(e){super(),this.elements=e}}function Uk(n,e){let t=$k(e);for(const r of n.elements)t=t.filter(i=>!fo(i,r));return{arrayValue:{values:t}}}class bd extends Oy{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function jk(n){return _n(n.integerValue||n.doubleValue)}function $k(n){return ip(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class hp{constructor(e,t){this.field=e,this.transform=t}}class a7{constructor(e,t){this.version=e,this.transformResults=t}}class yn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new yn}static exists(e){return new yn(void 0,e)}static updateTime(e){return new yn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ky(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Fy{}function Hk(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Dd(n.key,yn.none()):new Ad(n.key,n.data,yn.none());{const t=n.data,r=Rr.empty();let i=new jt(on.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new oa(n.key,r,new Ii(i.toArray()),yn.none())}}function u7(n,e,t){n instanceof Ad?function(i,s,o){const a=i.value.clone(),u=Gk(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof oa?function(i,s,o){if(!ky(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Gk(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(qk(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function fp(n,e,t,r){return n instanceof Ad?function(s,o,a,u){if(!ky(s.precondition,o))return a;const d=s.value.clone(),g=Wk(s.fieldTransforms,u,o);return d.setAll(g),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof oa?function(s,o,a,u){if(!ky(s.precondition,o))return a;const d=Wk(s.fieldTransforms,u,o),g=o.data;return g.setAll(qk(s)),g.setAll(d),o.convertToFoundDocument(o.version,g).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,ky(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function l7(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=Lk(r.transform,i||null);null!=s&&(null===t&&(t=Rr.empty()),t.set(r.field,s))}return t||null}function zk(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&pd(r,i,(s,o)=>function o7(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof Il&&i instanceof Il||r instanceof wl&&i instanceof wl?pd(r.elements,i.elements,fo):r instanceof bd&&i instanceof bd?fo(r.Pe,i.Pe):r instanceof Td&&i instanceof Td);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class Ad extends Fy{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class oa extends Fy{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function qk(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Gk(n,e,t){const r=new Map;Ce(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,s7(o,a,t[i]))}return r}function Wk(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,i7(s,o,e))}return r}class Dd extends Fy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ob extends Fy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class kb{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&u7(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=fp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=fp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=kk();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const u=Hk(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Me.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),nt())}isEqual(e){return this.batchId===e.batchId&&pd(this.mutations,e.mutations,(t,r)=>zk(t,r))&&pd(this.baseMutations,e.baseMutations,(t,r)=>zk(t,r))}}class Fb{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ce(e.mutations.length===r.length);let i=t7;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Fb(e,t,r,i)}}class Vb{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class c7{constructor(e,t){this.count=e,this.unchangedNames=t}}var Jn,It;function Qk(n){switch(n){default:return De();case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0}}function Yk(n){if(void 0===n)return Ln("GRPC error has no .code"),X.UNKNOWN;switch(n){case Jn.OK:return X.OK;case Jn.CANCELLED:return X.CANCELLED;case Jn.UNKNOWN:return X.UNKNOWN;case Jn.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Jn.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Jn.INTERNAL:return X.INTERNAL;case Jn.UNAVAILABLE:return X.UNAVAILABLE;case Jn.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Jn.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Jn.NOT_FOUND:return X.NOT_FOUND;case Jn.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Jn.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Jn.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Jn.ABORTED:return X.ABORTED;case Jn.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Jn.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Jn.DATA_LOSS:return X.DATA_LOSS;default:return De()}}(It=Jn||(Jn={}))[It.OK=0]="OK",It[It.CANCELLED=1]="CANCELLED",It[It.UNKNOWN=2]="UNKNOWN",It[It.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",It[It.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",It[It.NOT_FOUND=5]="NOT_FOUND",It[It.ALREADY_EXISTS=6]="ALREADY_EXISTS",It[It.PERMISSION_DENIED=7]="PERMISSION_DENIED",It[It.UNAUTHENTICATED=16]="UNAUTHENTICATED",It[It.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",It[It.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",It[It.ABORTED=10]="ABORTED",It[It.OUT_OF_RANGE=11]="OUT_OF_RANGE",It[It.UNIMPLEMENTED=12]="UNIMPLEMENTED",It[It.INTERNAL=13]="INTERNAL",It[It.UNAVAILABLE=14]="UNAVAILABLE",It[It.DATA_LOSS=15]="DATA_LOSS";function Jk(){return new TextEncoder}const d7=new gl([4294967295,4294967295],0);function Xk(n){const e=Jk().encode(n),t=new MO;return t.update(e),new Uint8Array(t.digest())}function Zk(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new gl([t,r],0),new gl([i,s],0)]}class Lb{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new pp(`Invalid padding: ${t}`);if(r<0)throw new pp(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new pp(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new pp(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=gl.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(gl.fromNumber(r)));return 1===i.compare(d7)&&(i=new gl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Xk(e),[r,i]=Zk(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Lb(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=Xk(e),[r,i]=Zk(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class pp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class gp{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,mp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new gp(Me.min(),i,new en(Ge),wi(),nt())}}class mp{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new mp(r,t,nt(),nt(),nt())}}class Ly{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class eF{constructor(e,t){this.targetId=e,this.me=t}}class tF{constructor(e,t,r=Cn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class nF{constructor(){this.fe=0,this.ge=iF(),this.pe=Cn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=nt(),t=nt(),r=nt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:De()}}),new mp(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=iF()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ce(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class h7{constructor(e){this.Le=e,this.Be=new Map,this.ke=wi(),this.qe=rF(),this.Qe=new en(Ge)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:De()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(My(s))if(0===r){const o=new Ee(s.path);this.Ue(t,o,an.newNoDocument(o,Me.min()))}else Ce(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;0!==u&&(this.je(t),this.Qe=this.Qe.insert(t,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=ra(r).toUint8Array()}catch(u){if(u instanceof sk)return $i("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Lb(o,i,s)}catch(u){return $i(u instanceof pp?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&My(a.target)){const u=new Ee(a.target.path);null!==this.ke.get(u)||this.it(o,u)||this.Ue(o,u,an.newNoDocument(u,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=nt();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||"TargetPurposeLimboResolution"===d.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new gp(e,t,this.Qe,this.ke,r);return this.ke=wi(),this.qe=rF(),this.Qe=new en(Ge),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new nF,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new jt(Ge),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||ue("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new nF),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function rF(){return new en(Ee.comparator)}function iF(){return new en(Ee.comparator)}const f7={asc:"ASCENDING",desc:"DESCENDING"},p7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},g7={and:"AND",or:"OR"};class m7{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Bb(n,e){return n.useProto3Json||ep(e)?e:{value:e}}function Cd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sF(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function _7(n,e){return Cd(n,e.toTimestamp())}function Bn(n){return Ce(!!n),Me.fromTimestamp(function(t){const r=na(t);return new mn(r.seconds,r.nanos)}(n))}function Ub(n,e){return jb(n,e).canonicalString()}function jb(n,e){const t=(i=n,new gt(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function oF(n){const e=gt.fromString(n);return Ce(_F(e)),e}function _p(n,e){return Ub(n.databaseId,e.path)}function go(n,e){const t=oF(e);if(t.get(1)!==n.databaseId.projectId)throw new ae(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ae(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(lF(t))}function aF(n,e){return Ub(n.databaseId,e)}function uF(n){const e=oF(n);return 4===e.length?gt.emptyPath():lF(e)}function $b(n){return new gt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function lF(n){return Ce(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function cF(n,e,t){return{name:_p(n,e),fields:t.value.mapValue.fields}}function dF(n,e,t){const r=go(n,e.name),i=Bn(e.updateTime),s=e.createTime?Bn(e.createTime):Me.min(),o=new Rr({mapValue:{fields:e.fields}}),a=an.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function yp(n,e){let t;if(e instanceof Ad)t={update:cF(n,e.key,e.value)};else if(e instanceof Dd)t={delete:_p(n,e.key)};else if(e instanceof oa)t={update:cF(n,e.key,e.data),updateMask:A7(e.fieldMask)};else{if(!(e instanceof Ob))return De();t={verify:_p(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Td)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Il)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof wl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof bd)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw De()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:_7(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:De()),t;var s}function Hb(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?yn.updateTime(Bn(s.updateTime)):void 0!==s.exists?yn.exists(s.exists):yn.none():yn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;"setToServerValue"in a?(Ce("REQUEST_TIME"===a.setToServerValue),u=new Td):"appendMissingElements"in a?u=new Il(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new wl(a.removeAllFromArray.values||[]):"increment"in a?u=new bd(o,a.increment):De();const d=on.fromServerFormat(a.fieldPath);return new hp(d,u)}(n,i)):[];var s;if(e.update){const i=go(n,e.update.name),s=new Rr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Ii((e.updateMask.fieldPaths||[]).map(g=>on.fromServerFormat(g)));return new oa(i,s,o,t,r)}return new Ad(i,s,t,r)}if(e.delete){const i=go(n,e.delete);return new Dd(i,t)}if(e.verify){const i=go(n,e.verify);return new Ob(i,t)}return De()}function hF(n,e){return{documents:[aF(n,e.path)]}}function By(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=aF(n,i);const s=function(d){if(0!==d.length)return mF(kt.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(d){if(0!==d.length)return d.map(g=>{return{field:au((v=g).field),direction:w7(v.dir)};var v})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=Bb(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:i};var d}function pF(n){let e=uF(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ce(1===r);const g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let s=[];t.where&&(s=function(m){const v=gF(m);return v instanceof kt&&Cb(v)?v.getFilters():[v]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(v=>{return new op(Sd((D=v).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let a=null;t.limit&&(a=function(m){let v;return v="object"==typeof m?m.value:m,ep(v)?null:v}(t.limit));let u=null;var m;t.startAt&&(u=new ou((m=t.startAt).values||[],!!m.before));let d=null;return t.endAt&&(d=function(m){return new ou(m.values||[],!m.before)}(t.endAt)),Dk(e,i,o,s,a,"F",u,d)}function gF(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Sd(t.unaryFilter.field);return mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Sd(t.unaryFilter.field);return mt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Sd(t.unaryFilter.field);return mt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Sd(t.unaryFilter.field);return mt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return De()}}(n):void 0!==n.fieldFilter?mt.create(Sd((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return De()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return kt.create(t.compositeFilter.filters.map(r=>gF(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return De()}}(t.compositeFilter.op))}(n):De();var t}function w7(n){return f7[n]}function T7(n){return p7[n]}function b7(n){return g7[n]}function au(n){return{fieldPath:n.canonicalString()}}function Sd(n){return on.fromServerFormat(n.fieldPath)}function mF(n){return n instanceof mt?function(t){if("=="===t.op){if(lk(t.value))return{unaryFilter:{field:au(t.field),op:"IS_NAN"}};if(uk(t.value))return{unaryFilter:{field:au(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(lk(t.value))return{unaryFilter:{field:au(t.field),op:"IS_NOT_NAN"}};if(uk(t.value))return{unaryFilter:{field:au(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:au(t.field),op:T7(t.op),value:t.value}}}(n):n instanceof kt?function(t){const r=t.getFilters().map(i=>mF(i));return 1===r.length?r[0]:{compositeFilter:{op:b7(t.op),filters:r}}}(n):De()}function A7(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function _F(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class aa{constructor(e,t,r,i,s=Me.min(),o=Me.min(),a=Cn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new aa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new aa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new aa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new aa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class yF{constructor(e){this.ct=e}}function vF(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Uy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:_p(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Cd(s,o.version.toTimestamp()),createTime:Cd(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Tl(e.version)};else{if(!e.isUnknownDocument())return De();r.unknownDocument={path:t.path.toArray(),version:Tl(e.version)}}var s,o;return r}function Uy(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Tl(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function bl(n){const e=new mn(n.seconds,n.nanoseconds);return Me.fromTimestamp(e)}function Al(n,e){const t=(e.baseMutations||[]).map(s=>Hb(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>Hb(n.ct,s)),i=mn.fromMillis(e.localWriteTimeMs);return new kb(e.batchId,i,t,r)}function vp(n){const e=bl(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?bl(n.lastLimboFreeSnapshotVersion):Me.min();let r;return r=void 0!==n.query.documents?(Ce(1===(s=n.query).documents.length),Br(Ed(uF(s.documents[0])))):function(s){return Br(pF(s))}(n.query),new aa(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Cn.fromBase64String(n.resumeToken));var s}function EF(n,e){const t=Tl(e.snapshotVersion),r=Tl(e.lastLimboFreeSnapshotVersion);let i;i=My(e.target)?hF(n.ct,e.target):By(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:El(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function zb(n){const e=pF({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?xy(e,e.limit,"L"):e}function qb(n,e){return new Vb(e.largestBatchId,Hb(n.ct,e.overlayMutation))}function IF(n,e){const t=e.path.lastSegment();return[n,Lr(e.path.popLast()),t]}function wF(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Tl(r.readTime),documentKey:Lr(r.documentKey.path),largestBatchId:r.largestBatchId}}class C7{getBundleMetadata(e,t){return TF(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:bl(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return TF(e).put({bundleId:(i=t).id,createTime:Tl(Bn(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return bF(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:zb(s.bundledQuery),readTime:bl(s.readTime)};var s})}saveNamedQuery(e,t){return bF(e).put({name:(i=t).name,readTime:Tl(Bn(i.readTime)),bundledQuery:i.bundledQuery});var i}}function TF(n){return pr(n,"bundles")}function bF(n){return pr(n,"namedQueries")}class jy{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new jy(e,t.uid||"")}getOverlay(e,t){return Ep(e).get(IF(this.userId,t)).next(r=>r?qb(this.serializer,r):null)}getOverlays(e,t){const r=po();return G.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new Vb(t,o);i.push(this.ht(e,a))}),G.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(Lr(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Ep(e).j("collectionPathOverlayIndex",a))}),G.waitFor(s)}getOverlaysForCollection(e,t,r){const i=po(),s=Lr(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Ep(e).U("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const d=qb(this.serializer,u);i.set(d.getKey(),d)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=po();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ep(e).J({index:"collectionGroupOverlayIndex",range:a},(u,d,g)=>{const m=qb(this.serializer,d);s.size()<i||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):g.done()}).next(()=>s)}ht(e,t){return Ep(e).put(function(i,s,o){const[a,u,d]=IF(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:yp(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function Ep(n){return pr(n,"documentOverlays")}class S7{Pt(e){return pr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t?.value;return r?Cn.fromUint8Array(r):Cn.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class Dl{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(_n(e.integerValue));else if("doubleValue"in e){const r=_n(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),tp(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),"string"==typeof r&&(r=na(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ra(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?ck(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Ry(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):De()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const o="value",a=(null===(i=null===(r=s[o].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.dt(t,15),t.At(_n(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Ee.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}function P7(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function AF(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=P7(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}Dl.vt=new Dl;class R7{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=AF(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=AF(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class M7{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class N7{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Ip{constructor(){this.jt=new R7,this.Ht=new M7(this.jt),this.Jt=new N7(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class Cl{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Cl(this.indexId,this.documentKey,this.arrayValue,r)}}function uu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=DF(n.arrayValue,e.arrayValue),0!==t?t:(t=DF(n.directionalValue,e.directionalValue),0!==t?t:Ee.comparator(n.documentKey,e.documentKey)))}function DF(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class CF{constructor(e){this.Xt=new jt((t,r)=>on.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Ce(e.collectionGroup===this.collectionId),this.nn)return!1;const t=yb(e);if(void 0!==t&&!this.sn(t))return!1;const r=ml(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.on(a,u)||!this._n(this.en[o++],u))return!1}++s}for(;s<r.length;++s)if(o>=this.en.length||!this._n(this.en[o++],r[s]))return!1;return!0}an(){if(this.nn)return null;let e=new jt(on.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new _l(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new _l(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new _l(r.field,"asc"===r.dir?0:1)));return new gd(gd.UNKNOWN_ID,this.collectionId,t,md.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function SF(n){var e,t;if(Ce(n instanceof mt||n instanceof kt),n instanceof mt){if(n instanceof Tk){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>mt.create(n.field,"==",s)))||[];return kt.create(i,"or")}return n}const r=n.filters.map(i=>SF(i));return kt.create(r,n.op)}function x7(n){if(0===n.getFilters().length)return[];const e=Kb(SF(n));return Ce(PF(e)),Gb(e)||Wb(e)?[e]:e.getFilters()}function Gb(n){return n instanceof mt}function Wb(n){return n instanceof kt&&Cb(n)}function PF(n){return Gb(n)||Wb(n)||function(t){if(t instanceof kt&&Db(t)){for(const r of t.getFilters())if(!Gb(r)&&!Wb(r))return!1;return!0}return!1}(n)}function Kb(n){if(Ce(n instanceof mt||n instanceof kt),n instanceof mt)return n;if(1===n.filters.length)return Kb(n.filters[0]);const e=n.filters.map(r=>Kb(r));let t=kt.create(e,n.op);return t=$y(t),PF(t)?t:(Ce(t instanceof kt),Ce(vd(t)),Ce(t.filters.length>1),t.filters.reduce((r,i)=>Qb(r,i)))}function Qb(n,e){let t;return Ce(n instanceof mt||n instanceof kt),Ce(e instanceof mt||e instanceof kt),t=n instanceof mt?e instanceof mt?kt.create([n,e],"and"):RF(n,e):e instanceof mt?RF(e,n):function(i,s){if(Ce(i.filters.length>0&&s.filters.length>0),vd(i)&&vd(s))return Ek(i,s.getFilters());const o=Db(i)?i:s,a=Db(i)?s:i,u=o.filters.map(d=>Qb(d,a));return kt.create(u,"or")}(n,e),$y(t)}function RF(n,e){if(vd(e))return Ek(e,n.getFilters());{const t=e.filters.map(r=>Qb(n,r));return kt.create(t,"or")}}function $y(n){if(Ce(n instanceof mt||n instanceof kt),n instanceof mt)return n;const e=n.getFilters();if(1===e.length)return $y(e[0]);if(yk(n))return n;const t=e.map(i=>$y(i)),r=[];return t.forEach(i=>{i instanceof mt?r.push(i):i instanceof kt&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:kt.create(r,n.op)}class O7{constructor(){this.un=new Yb}addToCollectionParentIndex(e,t){return this.un.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(Hi.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(Hi.min())}updateCollectionGroup(e,t,r){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class Yb{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new jt(gt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new jt(gt.comparator)).toArray()}}const Hy=new Uint8Array(0);class k7{constructor(e,t){this.databaseId=t,this.cn=new Yb,this.ln=new sa(r=>El(r),(r,i)=>ap(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:Lr(i)};return MF(e).put(s)}return G.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[jO(t),""],!1,!0);return MF(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(ho(o.parent))}return r})}addFieldIndex(e,t){const r=wp(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=Rd(e);return s.next(a=>{o.put(wF(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=wp(e),i=Rd(e),s=Pd(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=wp(e),r=Pd(e),i=Rd(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return G.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new CF(r).an();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=Pd(e);let i=!0;const s=new Map;return G.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=nt();const a=[];return G.forEach(s,(u,d)=>{var z;ue("IndexedDbIndexManager",`Using index ${z=u,`id=${z.indexId}|cg=${z.collectionGroup}|f=${z.fields.map(te=>`${te.fieldPath}:${te.kind}`).join(",")}`} to execute ${El(t)}`);const g=function(z,te){const he=yb(te);if(void 0===he)return null;for(const Te of Ny(z,he.fieldPath))switch(Te.op){case"array-contains-any":return Te.value.arrayValue.values||[];case"array-contains":return[Te.value]}return null}(d,u),m=function(z,te){const he=new Map;for(const Te of ml(te))for(const L of Ny(z,Te.fieldPath))switch(L.op){case"==":case"in":he.set(Te.fieldPath.canonicalString(),L.value);break;case"not-in":case"!=":return he.set(Te.fieldPath.canonicalString(),L.value),Array.from(he.values())}return null}(d,u),v=function(z,te){const he=[];let Te=!0;for(const L of ml(te)){const R=0===L.kind?bk(z,L.fieldPath,z.startAt):Ak(z,L.fieldPath,z.startAt);he.push(R.value),Te&&(Te=R.inclusive)}return new ou(he,Te)}(d,u),T=function(z,te){const he=[];let Te=!0;for(const L of ml(te)){const R=0===L.kind?Ak(z,L.fieldPath,z.endAt):bk(z,L.fieldPath,z.endAt);he.push(R.value),Te&&(Te=R.inclusive)}return new ou(he,Te)}(d,u),D=this.In(u,d,v),S=this.In(u,d,T),x=this.Tn(u,d,m),W=this.En(u.indexId,g,D,v.inclusive,S,T.inclusive,x);return G.forEach(W,B=>r.G(B,t.limit).next(z=>{z.forEach(te=>{const he=Ee.fromSegments(te.documentKey);o.has(he)||(o=o.add(he),a.push(he))})}))}).next(()=>a)}return G.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(t=0===e.filters.length?[e]:x7(kt.create(e.filters,"and")).map(r=>Pb(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){const u=(null!=t?t.length:1)*Math.max(r.length,s.length),d=u/(null!=t?t.length:1),g=[];for(let m=0;m<u;++m){const v=t?this.dn(t[m/d]):Hy,T=this.An(e,v,r[m%d],i),D=this.Rn(e,v,s[m%d],o),S=a.map(x=>this.An(e,v,x,!0));g.push(...this.createRange(T,D,S))}return g}An(e,t,r,i){const s=new Cl(e,Ee.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new Cl(e,Ee.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new CF(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.hn(t);return G.forEach(i,s=>this.Pn(e,s).next(o=>{o?0!==r&&o.fields.length<function(u){let d=new jt(on.comparator),g=!1;for(const m of u.filters)for(const v of m.getFlattenedFilters())v.field.isKeyField()||("array-contains"===v.op||"array-contains-any"===v.op?g=!0:d=d.add(v.field));for(const m of u.orderBy)m.field.isKeyField()||(d=d.add(m.field));return d.size+(g?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}Vn(e,t){const r=new Ip;for(const i of ml(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Yt(i.kind);Dl.vt.It(s,o)}return r.zt()}dn(e){const t=new Ip;return Dl.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new Ip;return Dl.vt.It(vl(this.databaseId,t),r.Yt(function(s){const o=ml(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(null===r)return[];let i=[];i.push(new Ip);let s=0;for(const o of ml(e)){const a=r[s++];for(const u of i)if(this.fn(t,o.fieldPath)&&ip(a))i=this.gn(i,o,a);else{const d=u.Yt(o.kind);Dl.vt.It(a,d)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new Ip;u.seed(a.zt()),Dl.vt.It(o,u.Yt(t.kind)),s.push(u)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof mt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=wp(e),i=Rd(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return G.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(g,m){const v=m?new md(m.sequenceNumber,new Hi(bl(m.readTime),new Ee(ho(m.documentKey)),m.largestBatchId)):md.empty(),T=g.fields.map(([D,S])=>new _l(on.fromServerFormat(D),S));return new gd(g.indexId,g.collectionGroup,T,v)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Ge(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=wp(e),s=Rd(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>G.forEach(a,u=>s.put(wF(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return G.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?G.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),G.forEach(a,u=>this.wn(e,i,u).next(d=>{const g=this.Sn(s,u);return d.isEqual(g)?G.resolve():this.bn(e,s,u,d,g)}))))})}Dn(e,t,r,i){return Pd(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Pd(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Pd(e);let s=new jt(uu);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new Cl(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new jt(uu);const i=this.Vn(t,e);if(null==i)return r;const s=yb(t);if(null!=s){const o=e.data.field(s.fieldPath);if(ip(o))for(const a of o.arrayValue.values||[])r=r.add(new Cl(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Cl(t.indexId,e.key,Hy,i));return r}bn(e,t,r,i,s){ue("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(u,d,g,m,v){const T=u.getIterator(),D=d.getIterator();let S=_d(T),x=_d(D);for(;S||x;){let W=!1,B=!1;if(S&&x){const z=g(S,x);z<0?B=!0:z>0&&(W=!0)}else null!=S?B=!0:W=!0;W?(m(x),x=_d(D)):B?(v(S),S=_d(T)):(S=_d(T),x=_d(D))}}(i,s,uu,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),G.waitFor(o)}yn(e){let t=1;return Rd(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>uu(o,a)).filter((o,a,u)=>!a||0!==uu(o,u[a-1]));const i=[];i.push(e);for(const o of r){const a=uu(o,e),u=uu(o,t);if(0===a)i[0]=e.Zt();else if(a>0&&u<0)i.push(o),i.push(o.Zt());else if(u>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Hy,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Hy,[]]))}return s}Cn(e,t){return uu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(NF)}getMinOffset(e,t){return G.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||De())).next(NF)}}function MF(n){return pr(n,"collectionParents")}function Pd(n){return pr(n,"indexEntries")}function wp(n){return pr(n,"indexConfiguration")}function Rd(n){return pr(n,"indexState")}function NF(n){Ce(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;vb(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Hi(e.readTime,e.documentKey,t)}const xF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ur{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ur(e,Ur.DEFAULT_COLLECTION_PERCENTILE,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function OF(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const u=r.J({range:o},(g,m,v)=>(a++,v.delete()));s.push(u.next(()=>{Ce(1===a)}));const d=[];for(const g of t.mutations){const m=JO(e,g.key.path,t.batchId);s.push(i.delete(m)),d.push(g.key)}return G.waitFor(s).next(()=>d)}function zy(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw De();e=n.noDocument}return JSON.stringify(e).length}Ur.DEFAULT_COLLECTION_PERCENTILE=10,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ur.DEFAULT=new Ur(41943040,Ur.DEFAULT_COLLECTION_PERCENTILE,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ur.DISABLED=new Ur(-1,0,0);class qy{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Ce(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new qy(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return lu(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Md(e),o=lu(e);return o.add({}).next(a=>{Ce("number"==typeof a);const u=new kb(a,t,r,i),d=function(T,D,S){const x=S.baseMutations.map(B=>yp(T.ct,B)),W=S.mutations.map(B=>yp(T.ct,B));return{userId:D,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:x,mutations:W}}(this.serializer,this.userId,u),g=[];let m=new jt((v,T)=>Ge(v.canonicalString(),T.canonicalString()));for(const v of i){const T=JO(this.userId,v.key.path,a);m=m.add(v.key.path.popLast()),g.push(o.put(d)),g.push(s.put(T,wK))}return m.forEach(v=>{g.push(this.indexManager.addToCollectionParentIndex(e,v))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),G.waitFor(g).next(()=>u)})}lookupMutationBatch(e,t){return lu(e).get(t).next(r=>r?(Ce(r.userId===this.userId),Al(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?G.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return lu(e).J({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(Ce(a.batchId>=r),s=Al(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return lu(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return lu(e).U("userMutationsIndex",t).next(r=>r.map(i=>Al(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Ty(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Md(e).J({range:i},(o,a,u)=>{const[d,g,m]=o,v=ho(g);if(d===this.userId&&t.path.isEqual(v))return lu(e).get(m).next(T=>{if(!T)throw De();Ce(T.userId===this.userId),s.push(Al(this.serializer,T))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jt(Ge);const i=[];return t.forEach(s=>{const o=Ty(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=Md(e).J({range:a},(d,g,m)=>{const[v,T,D]=d,S=ho(T);v===this.userId&&s.path.isEqual(S)?r=r.add(D):m.done()});i.push(u)}),G.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Ty(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new jt(Ge);return Md(e).J({range:o},(u,d,g)=>{const[m,v,T]=u,D=ho(v);m===this.userId&&r.isPrefixOf(D)?D.length===i&&(a=a.add(T)):g.done()}).next(()=>this.xn(e,a))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(lu(e).get(s).next(o=>{if(null===o)throw De();Ce(o.userId===this.userId),r.push(Al(this.serializer,o))}))}),G.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return OF(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),G.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return G.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Md(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=ho(s[1]);i.push(u)}else a.done()}).next(()=>{Ce(0===i.length)})})}containsKey(e,t){return kF(e,this.userId,t)}Nn(e){return FF(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function kF(n,e,t){const r=Ty(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Md(n).J({range:s,H:!0},(a,u,d)=>{const[g,m,v]=a;g===e&&m===i&&(o=!0),d.done()}).next(()=>o)}function lu(n){return pr(n,"mutations")}function Md(n){return pr(n,"documentMutations")}function FF(n){return pr(n,"mutationQueues")}class Sl{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Sl(0)}static kn(){return new Sl(-1)}}class F7{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new Sl(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Me.fromTimestamp(new mn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Nd(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Ce(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Nd(e).J((o,a)=>{const u=vp(a);u.sequenceNumber<=t&&null===r.get(u.targetId)&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>G.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Nd(e).J((r,i)=>{const s=vp(i);t(s)})}qn(e){return VF(e).get("targetGlobalKey").next(t=>(Ce(null!==t),t))}Qn(e,t){return VF(e).put("targetGlobalKey",t)}Kn(e,t){return Nd(e).put(EF(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=El(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Nd(e).J({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const d=vp(a);ap(t,d.target)&&(s=d,u.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=cu(e);return t.forEach(o=>{const a=Lr(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),G.waitFor(i)}removeMatchingKeys(e,t,r){const i=cu(e);return G.forEach(t,s=>{const o=Lr(s.path);return G.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=cu(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=cu(e);let s=nt();return i.J({range:r,H:!0},(o,a,u)=>{const d=ho(o[1]),g=new Ee(d);s=s.add(g)}).next(()=>s)}containsKey(e,t){const r=Lr(t.path),i=IDBKeyRange.bound([r],[jO(r)],!1,!0);let s=0;return cu(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],u,d)=>{0!==o&&(s++,d.done())}).next(()=>s>0)}ot(e,t){return Nd(e).get(t).next(r=>r?vp(r):null)}}function Nd(n){return pr(n,"targets")}function VF(n){return pr(n,"targetGlobal")}function cu(n){return pr(n,"targetDocuments")}function LF([n,e],[t,r]){const i=Ge(n,t);return 0===i?Ge(e,r):i}class V7{constructor(e){this.Un=e,this.buffer=new jt(LF),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();LF(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class BF{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var t=this;ue("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,re.A)(function*(){t.jn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){eu(r)?ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Za(r)}yield t.Hn(3e5)}))}}class L7{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return G.resolve(zi.oe);const r=new V7(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(xF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xF):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,u,d;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(s=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),fd()<=lo.$b.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-g}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${m} documents in `+(d-u)+`ms\nTotal Duration: ${d-g}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}class B7{constructor(e,t){this.db=e,this.garbageCollector=function UF(n,e){return new L7(n,e)}(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Gy(e,r)}removeReference(e,t,r){return Gy(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Gy(e,t)}nr(e,t){return function(i,s){let o=!1;return FF(i).Y(a=>kF(i,a,s).next(u=>(u&&(o=!0),G.resolve(!u)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=t){const u=this.nr(e,o).next(d=>{if(!d)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Me.min()),cu(e).delete([0,Lr(o.path)])))});i.push(u)}}).next(()=>G.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Gy(e,t)}tr(e,t){const r=cu(e);let i,s=zi.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:d})=>{0===o?(s!==zi.oe&&t(new Ee(ho(i)),s),s=d,i=u):s=zi.oe}).next(()=>{s!==zi.oe&&t(new Ee(ho(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Gy(n,e){return cu(n).put((i=n.currentSequenceNumber,{targetId:0,path:Lr(e.path),sequenceNumber:i}));var i}class jF{constructor(){this.changes=new sa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?G.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class U7{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Pl(e).put(r)}removeEntry(e,t,r){return Pl(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Uy(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=an.newInvalidDocument(t);return Pl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Tp(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:an.newInvalidDocument(t)};return Pl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Tp(t))},(i,s)=>{r={document:this.ir(t,s),size:zy(s)}}).next(()=>r)}getEntries(e,t){let r=wi();return this._r(e,t,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=wi(),i=new en(Ee.comparator);return this._r(e,t,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,zy(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return G.resolve();let i=new jt(qF);t.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(Tp(i.first()),Tp(i.last())),o=i.getIterator();let a=o.getNext();return Pl(e).J({index:"documentKeyIndex",range:s},(u,d,g)=>{const m=Ee.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&qF(a,m)<0;)r(a,null),a=o.getNext();a&&a.isEqual(m)&&(r(a,d),a=o.hasNext()?o.getNext():null),a?g.$(Tp(a)):g.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),Uy(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Pl(e).U(IDBKeyRange.bound(a,u,!0)).next(d=>{s?.incrementDocumentReadCount(d.length);let g=wi();for(const m of d){const v=this.ir(Ee.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);v.isFoundDocument()&&(lp(t,v)||i.has(v.key))&&(g=g.insert(v.key,v))}return g})}getAllFromCollectionGroup(e,t,r,i){let s=wi();const o=zF(t,r),a=zF(t,Hi.max());return Pl(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,d,g)=>{const m=this.ir(Ee.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(m.key,m),s.size===i&&g.done()}).next(()=>s)}newChangeBuffer(e){return new j7(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return HF(e).get("remoteDocumentGlobalKey").next(t=>(Ce(!!t),t))}rr(e,t){return HF(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=function D7(n,e){let t;if(e.document)t=dF(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ee.fromSegments(e.noDocument.path),i=bl(e.noDocument.readTime);t=an.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return De();{const r=Ee.fromSegments(e.unknownDocument.path),i=bl(e.unknownDocument.version);t=an.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new mn(i[0],i[1]);return Me.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Me.min()))return r}return an.newInvalidDocument(e)}}function $F(n){return new U7(n)}class j7 extends jF{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new sa(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new jt((s,o)=>Ge(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=vF(this.cr.serializer,o);i=i.add(s.path.popLast());const d=zy(u);r+=d-a.size,t.push(this.cr.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=vF(this.cr.serializer,o.convertToNoDocument(Me.min()));t.push(this.cr.addEntry(e,s,u))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),G.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function HF(n){return pr(n,"remoteDocumentGlobal")}function Pl(n){return pr(n,"remoteDocumentsV14")}function Tp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function zF(n,e){const t=e.documentKey.path.toArray();return[n,Uy(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function qF(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Ge(t[s],r[s]),i)return i;return i=Ge(t.length,r.length),i||(i=Ge(t[t.length-2],r[r.length-2]),i||Ge(t[t.length-1],r[r.length-1]))}class $7{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class GF{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&fp(r.mutation,i,Ii.empty(),mn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,nt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=nt()){const i=po();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=cp();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=po();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,nt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=wi();const o=dp(),a=dp();return t.forEach((u,d)=>{const g=r.get(d.key);i.has(d.key)&&(void 0===g||g.mutation instanceof oa)?s=s.insert(d.key,d):void 0!==g?(o.set(d.key,g.mutation.getFieldMask()),fp(g.mutation,d,g.mutation.getFieldMask(),mn.now())):o.set(d.key,Ii.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,g)=>o.set(d,g)),t.forEach((d,g)=>{var m;return a.set(d,new $7(g,null!==(m=o.get(d))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=dp();let i=new en((o,a)=>o-a),s=nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(u=>{const d=t.get(u);if(null===d)return;let g=r.get(u)||Ii.empty();g=a.applyToLocalView(d,g),r.set(u,g);const m=(i.get(a.batchId)||nt()).add(u);i=i.insert(a.batchId,m)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),d=u.key,g=u.value,m=kk();g.forEach(v=>{if(!s.has(v)){const T=Hk(t.get(v),r.get(v));null!==T&&m.set(v,T),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return G.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Ee.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Rb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):G.resolve(po());let a=-1,u=s;return o.next(d=>G.forEach(d,(g,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(g)?G.resolve():this.remoteDocumentCache.getEntry(e,g).next(v=>{u=u.insert(g,v)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,nt())).next(g=>({batchId:a,changes:Ok(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next(r=>{let i=cp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=cp();return this.indexManager.getCollectionParents(e,s).next(a=>G.forEach(a,u=>{const d=(m=t,v=u.child(s),new ia(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,v;return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(g=>{g.forEach((m,v)=>{o=o.insert(m,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,d)=>{const g=d.getKey();null===o.get(g)&&(o=o.insert(g,an.newInvalidDocument(g)))});let a=cp();return o.forEach((u,d)=>{const g=s.get(u);void 0!==g&&fp(g.mutation,d,Ii.empty(),mn.now()),lp(t,d)&&(a=a.insert(u,d))}),a})}}class H7{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return G.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:(i=t).id,version:i.version,createTime:Bn(i.createTime)}),G.resolve();var i}getNamedQuery(e,t){return G.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:(i=t).name,query:zb(i.bundledQuery),readTime:Bn(i.readTime)}),G.resolve();var i}}class z7{constructor(){this.overlays=new en(Ee.comparator),this.Ir=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const r=po();return G.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),G.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),G.resolve()}getOverlaysForCollection(e,t,r){const i=po(),s=t.length+1,o=new Ee(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return G.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new en((d,g)=>d-g);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let g=s.get(d.largestBatchId);null===g&&(g=po(),s=s.insert(d.largestBatchId,g)),g.set(d.getKey(),d)}}const a=po(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,g)=>a.set(d,g)),!(a.size()>=i)););return G.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Vb(t,r));let s=this.Ir.get(t);void 0===s&&(s=nt(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}class q7{constructor(){this.sessionToken=Cn.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}class Jb{constructor(){this.Tr=new jt(Ar.Er),this.dr=new jt(Ar.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new Ar(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Ar(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new Ee(new gt([])),r=new Ar(t,e),i=new Ar(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Ee(new gt([])),r=new Ar(t,e),i=new Ar(t,e+1);let s=nt();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Ar(e,0),r=this.Tr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ar{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Ee.comparator(e.key,t.key)||Ge(e.wr,t.wr)}static Ar(e,t){return Ge(e.wr,t.wr)||Ee.comparator(e.key,t.key)}}class G7{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new jt(Ar.Er)}checkEmpty(e){return G.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++;const o=new kb(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Ar(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,t){return G.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.vr(t+1),s=i<0?0:i;return G.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ar(t,0),i=new Ar(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),G.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jt(Ge);return t.forEach(i=>{const s=new Ar(i,0),o=new Ar(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),G.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Ee.isDocumentKey(s)||(s=s.child(""));const o=new Ar(new Ee(s),0);let a=new jt(Ge);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(u.wr)),!0)},o),G.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ce(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.br;return G.forEach(t.mutations,i=>{const s=new Ar(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new Ar(t,0),i=this.br.firstAfterOrEqual(r);return G.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return G.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class W7{constructor(e){this.Mr=e,this.docs=new en(Ee.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return G.resolve(r?r.document.mutableCopy():an.newInvalidDocument(t))}getEntries(e,t){let r=wi();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():an.newInvalidDocument(i))}),G.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=wi();const o=t.path,a=new Ee(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:g}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||vb(HO(g),r)<=0||(i.has(g.key)||lp(t,g))&&(s=s.insert(g.key,g.mutableCopy()))}return G.resolve(s)}getAllFromCollectionGroup(e,t,r,i){De()}Or(e,t){return G.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new K7(this)}getSize(e){return G.resolve(this.size)}}class K7 extends jF{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),G.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class Q7{constructor(e){this.persistence=e,this.Nr=new sa(t=>El(t),ap),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Jb,this.targetCount=0,this.kr=Sl.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),G.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Sl(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Kn(t),G.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),G.waitFor(s).next(()=>i)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return G.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),G.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),G.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return G.resolve(r)}containsKey(e,t){return G.resolve(this.Br.containsKey(t))}}class Xb{constructor(e,t){this.qr={},this.overlays={},this.Qr=new zi(0),this.Kr=!1,this.Kr=!0,this.$r=new q7,this.referenceDelegate=e(this),this.Ur=new Q7(this),this.indexManager=new O7,this.remoteDocumentCache=new W7(r=>this.referenceDelegate.Wr(r)),this.serializer=new yF(t),this.Gr=new H7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new z7,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new G7(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){ue("MemoryPersistence","Starting transaction:",e);const i=new Y7(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return G.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class Y7 extends qO{constructor(e){super(),this.currentSequenceNumber=e}}class Wy{constructor(e){this.persistence=e,this.Jr=new Jb,this.Yr=null}static Zr(e){return new Wy(e)}get Xr(){if(this.Yr)return this.Yr;throw De()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),G.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),G.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Xr,r=>{const i=Ee.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,Me.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return G.or([()=>G.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class J7{constructor(e){this.serializer=e}O(e,t,r,i){const s=new wy("createOrUpgrade",t);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",YO,{unique:!0}),u.createObjectStore("documentMutations"),WF(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=G.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),WF(e)),o=o.next(()=>function(u){const d=u.store("targetGlobal"),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Me.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",g)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(u,d){return d.store("mutations").U().next(g=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",YO,{unique:!0});const m=d.store("mutations"),v=g.map(T=>m.put(T));return G.waitFor(v)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(u){const d=u.createObjectStore("documentOverlays",{keyPath:OK});d.createIndex("collectionPathOverlayIndex",kK,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",FK,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const d=u.createObjectStore("remoteDocumentsV14",{keyPath:TK});d.createIndex("documentKeyIndex",bK),d.createIndex("collectionGroupIndex",AK)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:RK}).createIndex("sequenceNumberIndex",MK,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:NK}).createIndex("documentKeyIndex",xK,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{!function(u){u.createObjectStore("globals",{keyPath:"name"})}(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=zy(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>G.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>G.forEach(a,u=>{Ce(u.userId===s.userId);const d=Al(this.serializer,u);return OF(e,s.userId,d).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const u=new gt(o),d=[0,Lr(u)];s.push(t.get(d).next(g=>g?G.resolve():t.put({targetId:0,path:Lr(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>G.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:PK});const r=t.store("collectionParents"),i=new Yb,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:Lr(u)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const u=new gt(o);return s(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,u],d)=>{const g=ho(a);return s(g.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=vp(i),o=EF(this.serializer,s);return t.put(o)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),u=(m=o,m.document?new Ee(gt.fromString(m.document.name).popFirst(5)):m.noDocument?Ee.fromSegments(m.noDocument.path):m.unknownDocument?Ee.fromSegments(m.unknownDocument.path):De()).path.toArray(),d={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var m;i.push(a.put(d))}).next(()=>G.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=$F(this.serializer),s=new Xb(Wy.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(u=>{var d;let g=null!==(d=a.get(u.userId))&&void 0!==d?d:nt();Al(this.serializer,u).keys().forEach(m=>g=g.add(m)),a.set(u.userId,g)}),G.forEach(a,(u,d)=>{const g=new Tr(d),m=jy.lt(this.serializer,g),v=s.getIndexManager(g),T=qy.lt(g,this.serializer,v,s.referenceDelegate);return new GF(i,T,m,v).recalculateAndSaveOverlaysForDocumentKeys(new Tb(t,zi.oe),u).next()})})}}function WF(n){n.createObjectStore("targetDocuments",{keyPath:CK}).createIndex("documentTargetsIndex",SK,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",DK,{unique:!0}),n.createObjectStore("targetGlobal")}const Zb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class eA{constructor(e,t,r,i,s,o,a,u,d,g,m=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=d,this.li=g,this.hi=m,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=v=>Promise.resolve(),!eA.D())throw new ae(X.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new B7(this,i),this.Ai=t+"main",this.serializer=new yF(u),this.Ri=new co(this.Ai,this.hi,new J7(this.serializer)),this.$r=new S7,this.Ur=new F7(this.referenceDelegate,this.serializer),this.remoteDocumentCache=$F(this.serializer),this.Gr=new C7,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===g&&Ln("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ae(X.FAILED_PRECONDITION,Zb);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new zi(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var t=this;return this.di=function(){var r=(0,re.A)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var t=(0,re.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,re.A)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Qy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(eu(e))return ue("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ue("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return bp(e).get("owner").next(t=>G.resolve(this.vi(t)))}Ci(e){return Qy(e).delete(this.clientId)}Fi(){var e=this;return(0,re.A)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=pr(r,"clientMetadata");return i.U().next(s=>{const o=e.xi(s,18e5),a=s.filter(u=>-1===o.indexOf(u));return G.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Vi)for(const r of t)e.Vi.removeItem(e.Oi(r.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?G.resolve(!0):bp(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new ae(X.FAILED_PRECONDITION,Zb);return!1}}return!(!this.networkEnabled||!this.inForeground)||Qy(e).U().next(r=>void 0===this.xi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ue("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,re.A)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Tb(t,zi.oe);return e.bi(r).next(()=>e.Ci(r))}),e.Ri.close(),e.qi()})()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Qy(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return qy.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new k7(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return jy.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){ue("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=17===(u=this.hi)?BK:16===u?LK:15===u?wb:14===u?ek:13===u?ZO:12===u?VK:11===u?XO:void De();var u;let o;return this.Ri.runTransaction(e,i,s,a=>(o=new Tb(a,this.Qr?this.Qr.next():zi.oe),"readwrite-primary"===t?this.wi(o).next(u=>!!u||this.Si(o)).next(u=>{if(!u)throw Ln(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ae(X.FAILED_PRECONDITION,zO);return r(o)}).next(u=>this.Di(o).next(()=>u)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return bp(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ae(X.FAILED_PRECONDITION,Zb)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return bp(e).put("owner",t)}static D(){return co.D()}bi(e){const t=bp(e);return t.get("owner").next(r=>this.vi(r)?(ue("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):G.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Ln(`Detected an update time that is in the future: ${e} > ${r}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;(0,St.nr)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=null!==(null===(t=this.Vi)||void 0===t?void 0:t.getItem(this.Oi(e)));return ue("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ln("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ln("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function bp(n){return pr(n,"owner")}function Qy(n){return pr(n,"clientMetadata")}function tA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class nA{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=nt(),i=nt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new nA(e,t.fromCache,r,i)}}class X7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class KF{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,St.nr)()?8:GO((0,St.ZQ)())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new X7;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(fd()<=lo.$b.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",wd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),G.resolve()):(fd()<=lo.$b.DEBUG&&ue("QueryEngine","Query:",wd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(fd()<=lo.$b.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",wd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Br(t))):G.resolve())}Yi(e,t){if(Ck(t))return G.resolve(null);let r=Br(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=xy(t,null,"F"),r=Br(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=nt(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(t,a);return this.ns(t,d,o,u.readTime)?this.Yi(e,xy(t,null,"F")):this.rs(e,d,t,u)}))})))}Zi(e,t,r,i){return Ck(t)||i.isEqual(Me.min())?G.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(t,s);return this.ns(t,o,r,i)?G.resolve(null):(fd()<=lo.$b.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),wd(t)),this.rs(e,o,t,$O(i,-1)).next(a=>a))})}ts(e,t){let r=new jt(Nk(e));return t.forEach((i,s)=>{lp(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return fd()<=lo.$b.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",wd(t)),this.Ji.getDocumentsMatchingQuery(e,t,Hi.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class Z7{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new en(Ge),this._s=new sa(s=>El(s),ap),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GF(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function QF(n,e,t,r){return new Z7(n,e,t,r)}function YF(n,e){return rA.apply(this,arguments)}function rA(){return rA=(0,re.A)(function*(n,e){const t=pe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=nt();for(const d of i){o.push(d.batchId);for(const g of d.mutations)u=u.add(g.key)}for(const d of s){a.push(d.batchId);for(const g of d.mutations)u=u.add(g.key)}return t.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:a}))})})}),rA.apply(this,arguments)}function JF(n){const e=pe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function XF(n,e,t){let r=nt(),i=nt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=wi();return t.forEach((a,u)=>{const d=s.get(a);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Me.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||0===u.version.compareTo(d.version)&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):ue("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function nQ(n,e){const t=pe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function xd(n,e){const t=pe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,G.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new aa(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Od(n,e,t){return iA.apply(this,arguments)}function iA(){return iA=(0,re.A)(function*(n,e,t){const r=pe(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!eu(o))throw o;ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}),iA.apply(this,arguments)}function Yy(n,e,t){const r=pe(n);let i=Me.min(),s=nt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,g){const m=pe(u),v=m._s.get(g);return void 0!==v?G.resolve(m.os.get(v)):m.Ur.getTargetData(d,g)}(r,o,Br(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:Me.min(),t?s:nt())).next(a=>(tV(r,Mk(e),a),{documents:a,Ts:s})))}function ZF(n,e){const t=pe(n),r=pe(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function eV(n,e){const t=pe(n),r=t.us.get(e)||Me.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,$O(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(tV(t,e,i),i))}function tV(n,e,t){let r=n.us.get(e)||Me.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function sA(){return sA=(0,re.A)(function*(n,e,t,r){const i=pe(n);let s=nt(),o=wi();for(const d of t){const g=e.Es(d.metadata.name);d.document&&(s=s.add(g));const m=e.ds(d);m.setReadTime(e.As(d.metadata.readTime)),o=o.insert(g,m)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield xd(i,(g=r,Br(Ed(gt.fromString(`__bundle__/docs/${g}`)))));var g;return i.persistence.runTransaction("Apply bundle documents","readwrite",d=>XF(d,a,o).next(g=>(a.apply(d),g)).next(g=>i.Ur.removeMatchingKeysForTargetId(d,u.targetId).next(()=>i.Ur.addMatchingKeys(d,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(d,g.Ps,g.Is)).next(()=>g.Ps)))}),sA.apply(this,arguments)}function iQ(n,e){return oA.apply(this,arguments)}function oA(){return oA=(0,re.A)(function*(n,e,t=nt()){const r=yield xd(n,Br(zb(e.bundledQuery))),i=pe(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Bn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(Cn.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,t,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})}),oA.apply(this,arguments)}function nV(n,e){return`firestore_clients_${n}_${e}`}function rV(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function aA(n,e){return`firestore_targets_${n}_${e}`}class Jy{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new ae(i.error.code,i.error.message))),o?new Jy(e,t,i.state,s):(Ln("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ap{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new ae(r.error.code,r.error.message))),s?new Ap(e,r.state,i):(Ln("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Xy{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=Nb();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=KO(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Xy(e,s):(Ln("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class uA{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new uA(t.clientId,t.onlineState):(Ln("SharedClientState",`Failed to parse online state: ${e}`),null)}}class lA{constructor(){this.activeTargetIds=Nb()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cA{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new en(Ge),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=nV(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new lA),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,re.A)(function*(){const t=yield e.syncEngine.Qi();for(const i of t){if(i===e.ps)continue;const s=e.getItem(nV(e.persistenceKey,i));if(s){const o=Xy.Rs(i,s);o&&(e.Ss=e.Ss.insert(o.clientId,o))}}e.Ns();const r=e.storage.getItem(e.xs);if(r){const i=e.Ls(r);i&&e.Bs(i)}for(const i of e.bs)e.ws(i);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(aA(this.persistenceKey,e));if(i){const s=Ap.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(aA(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ue("SharedClientState","READ",e,t),t}setItem(e,t){ue("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ue("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ue("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void Ln("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,re.A)(function*(){if(t.started){if(null!==r.key)if(t.Cs.test(r.key)){if(null==r.newValue){const i=t.Gs(r.key);return t.zs(i,null)}{const i=t.js(r.key,r.newValue);if(i)return t.zs(i.clientId,i)}}else if(t.Fs.test(r.key)){if(null!==r.newValue){const i=t.Hs(r.key,r.newValue);if(i)return t.Js(i)}}else if(t.Ms.test(r.key)){if(null!==r.newValue){const i=t.Ys(r.key,r.newValue);if(i)return t.Zs(i)}}else if(r.key===t.xs){if(null!==r.newValue){const i=t.Ls(r.newValue);if(i)return t.Bs(i)}}else if(r.key===t.vs){const i=function(o){let a=zi.oe;if(null!=o)try{const u=JSON.parse(o);Ce("number"==typeof u),a=u}catch(u){Ln("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==zi.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Os){const i=t.Xs(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.eo(s)))}}else t.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new Jy(this.currentUser,e,t,r),s=rV(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=rV(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,t,r){const i=aA(this.persistenceKey,e),s=new Ap(e,t,r);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return Xy.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]);return Jy.Rs(new Tr(void 0!==r[2]?r[2]:null),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return Ap.Rs(i,t)}Ls(e){return uA.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var t=this;return(0,re.A)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.no(e.batchId,e.state,e.error);ue("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=Nb();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class iV{constructor(){this.so=new lA,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new lA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class sQ{_o(e){}shutdown(){}}class sV{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Zy=null;function dA(){return null===Zy?Zy=268435456+Math.round(2147483648*Math.random()):Zy++,"0x"+Zy.toString(16)}const oQ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class aQ{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const jr="WebChannelConnection";class uQ extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){const a=dA(),u=this.xo(t,r.toUriEncodedString());ue("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,o),this.No(t,u,d,i).then(g=>(ue("RestConnection",`Received RPC '${t}' ${a}: `,g),g),g=>{throw $i("RestConnection",`RPC '${t}' ${a} failed with error: `,g,"url: ",u,"request:",i),g})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+hd,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){return`${this.Do}/v1/${r}:${oQ[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=dA();return new Promise((o,a)=>{const u=new NO;u.setWithCredentials(!0),u.listenOnce(xO.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Iy.NO_ERROR:const g=u.getResponseJson();ue(jr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(g)),o(g);break;case Iy.TIMEOUT:ue(jr,`RPC '${e}' ${s} timed out`),a(new ae(X.DEADLINE_EXCEEDED,"Request time out"));break;case Iy.HTTP_ERROR:const m=u.getStatus();if(ue(jr,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const T=v?.error;if(T&&T.status&&T.message){const D=function(x){const W=x.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(W)>=0?W:X.UNKNOWN}(T.status);a(new ae(D,T.message))}else a(new ae(X.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new ae(X.UNAVAILABLE,"Connection failed."));break;default:De()}}finally{ue(jr,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);ue(jr,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",d,r,15)})}Bo(e,t,r){const i=dA(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=FO(),a=kO(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;void 0!==d&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const g=s.join("");ue(jr,`Creating RPC '${e}' stream ${i}: ${g}`,u);const m=o.createWebChannel(g,u);let v=!1,T=!1;const D=new aQ({Io:x=>{T?ue(jr,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(v||(ue(jr,`Opening RPC '${e}' stream ${i} transport.`),m.open(),v=!0),ue(jr,`RPC '${e}' stream ${i} sending:`,x),m.send(x))},To:()=>m.close()}),S=(x,W,B)=>{x.listen(W,z=>{try{B(z)}catch(te){setTimeout(()=>{throw te},0)}})};return S(m,Jf.EventType.OPEN,()=>{T||(ue(jr,`RPC '${e}' stream ${i} transport opened.`),D.yo())}),S(m,Jf.EventType.CLOSE,()=>{T||(T=!0,ue(jr,`RPC '${e}' stream ${i} transport closed`),D.So())}),S(m,Jf.EventType.ERROR,x=>{T||(T=!0,$i(jr,`RPC '${e}' stream ${i} transport errored:`,x),D.So(new ae(X.UNAVAILABLE,"The operation could not be completed")))}),S(m,Jf.EventType.MESSAGE,x=>{var W;if(!T){const B=x.data[0];Ce(!!B);const te=B.error||(null===(W=B[0])||void 0===W?void 0:W.error);if(te){ue(jr,`RPC '${e}' stream ${i} received error:`,te);const he=te.status;let Te=function(F){const U=Jn[F];if(void 0!==U)return Yk(U)}(he),L=te.message;void 0===Te&&(Te=X.INTERNAL,L="Unknown error status: "+he+" with message "+te.message),T=!0,D.So(new ae(Te,L)),m.close()}else ue(jr,`RPC '${e}' stream ${i} received:`,B),D.bo(B)}}),S(a,OO.STAT_EVENT,x=>{x.stat===mb.PROXY?ue(jr,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===mb.NOPROXY&&ue(jr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}}function oV(){return typeof window<"u"?window:null}function ev(){return typeof document<"u"?document:null}function Dp(n){return new m7(n,!0)}class hA{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class aV{constructor(e,t,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new hA(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,re.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,re.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){var r=this;return(0,re.A)(function*(){r.u_(),r.c_(),r.t_.cancel(),r.Yo++,4!==e?r.t_.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(Ln(t.toString()),Ln("Using maximum backoff delay to prevent overloading the backend."),r.t_.Wo()):t&&t.code===X.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.l_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.mo(t)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new ae(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.e_?this.E_(i):this.onNext(i))})}i_(){var e=this;this.state=5,this.t_.Go((0,re.A)(function*(){e.state=0,e.start()}))}I_(e){return ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lQ extends aV{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function v7(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(d=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===d?1:"REMOVE"===d?2:"CURRENT"===d?3:"RESET"===d?4:De(),i=e.targetChange.targetIds||[],s=function(d,g){return d.useProto3Json?(Ce(void 0===g||"string"==typeof g),Cn.fromBase64String(g||"")):(Ce(void 0===g||g instanceof Buffer||g instanceof Uint8Array),Cn.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const g=void 0===d.code?X.UNKNOWN:Yk(d.code);return new ae(g,d.message||"")}(o);t=new tF(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=go(n,r.document.name),s=Bn(r.document.updateTime),o=r.document.createTime?Bn(r.document.createTime):Me.min(),a=new Rr({mapValue:{fields:r.document.fields}}),u=an.newFoundDocument(i,s,o,a);t=new Ly(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=go(n,r.document),s=r.readTime?Bn(r.readTime):Me.min(),o=an.newNoDocument(i,s);t=new Ly([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=go(n,r.document);t=new Ly([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return De();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new c7(i,s);t=new eF(r.targetId,o)}}var d;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Me.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Me.min():o.readTime?Bn(o.readTime):Me.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=$b(this.serializer),t.addTarget=function(s,o){let a;const u=o.target;if(a=My(u)?{documents:hF(s,u)}:{query:By(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=sF(s,o.resumeToken);const d=Bb(s,o.expectedCount);null!==d&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(Me.min())>0){a.readTime=Cd(s,o.snapshotVersion.toTimestamp());const d=Bb(s,o.expectedCount);null!==d&&(a.expectedCount=d)}return a}(this.serializer,e);const r=function I7(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=$b(this.serializer),t.removeTarget=e,this.a_(t)}}class cQ extends aV{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function E7(n,e){return n&&n.length>0?(Ce(void 0!==e),n.map(t=>function(i,s){let o=Bn(i.updateTime?i.updateTime:s);return o.isEqual(Me.min())&&(o=Bn(s)),new a7(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Bn(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=$b(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>yp(this.serializer,r))};this.a_(t)}}class dQ extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ae(X.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,jb(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ae(X.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,jb(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ae(X.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class hQ{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ln(t),this.D_=!1):ue("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class fQ{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget((0,re.A)(function*(){var u;du(o)&&(ue("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,re.A)(function*(g){const m=pe(g);m.L_.add(4),yield kd(m),m.q_.set("Unknown"),m.L_.delete(4),yield Cp(m)}),function d(g){return u.apply(this,arguments)})(o))}))}),this.q_=new hQ(r,i)}}function Cp(n){return fA.apply(this,arguments)}function fA(){return fA=(0,re.A)(function*(n){if(du(n))for(const e of n.B_)yield e(!0)}),fA.apply(this,arguments)}function kd(n){return pA.apply(this,arguments)}function pA(){return pA=(0,re.A)(function*(n){for(const e of n.B_)yield e(!1)}),pA.apply(this,arguments)}function tv(n,e){const t=pe(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),_A(t)?mA(t):Ld(t).r_()&&gA(t,e))}function Fd(n,e){const t=pe(n),r=Ld(t);t.N_.delete(e),r.r_()&&uV(t,e),0===t.N_.size&&(r.r_()?r.o_():du(t)&&t.q_.set("Unknown"))}function gA(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ld(n).A_(e)}function uV(n,e){n.Q_.xe(e),Ld(n).R_(e)}function mA(n){n.Q_=new h7({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Ld(n).start(),n.q_.v_()}function _A(n){return du(n)&&!Ld(n).n_()&&n.N_.size>0}function du(n){return 0===pe(n).L_.size}function lV(n){n.Q_=void 0}function pQ(n){return yA.apply(this,arguments)}function yA(){return yA=(0,re.A)(function*(n){n.q_.set("Online")}),yA.apply(this,arguments)}function gQ(n){return vA.apply(this,arguments)}function vA(){return vA=(0,re.A)(function*(n){n.N_.forEach((e,t)=>{gA(n,e)})}),vA.apply(this,arguments)}function mQ(n,e){return EA.apply(this,arguments)}function EA(){return EA=(0,re.A)(function*(n,e){lV(n),_A(n)?(n.q_.M_(e),mA(n)):n.q_.set("Unknown")}),EA.apply(this,arguments)}function _Q(n,e,t){return IA.apply(this,arguments)}function IA(){return IA=(0,re.A)(function*(n,e,t){if(n.q_.set("Online"),e instanceof tF&&2===e.state&&e.cause)try{yield(r=(0,re.A)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.N_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.N_.delete(u),s.Q_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield nv(n,r)}else if(e instanceof Ly?n.Q_.Ke(e):e instanceof eF?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Me.min()))try{const r=yield JF(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const g=s.N_.get(d);g&&s.N_.set(d,g.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,d)=>{const g=s.N_.get(u);if(!g)return;s.N_.set(u,g.withResumeToken(Cn.EMPTY_BYTE_STRING,g.snapshotVersion)),uV(s,u);const m=new aa(g.target,u,d,g.sequenceNumber);gA(s,m)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){ue("RemoteStore","Failed to raise snapshot:",r),yield nv(n,r)}var r}),IA.apply(this,arguments)}function nv(n,e,t){return wA.apply(this,arguments)}function wA(){return wA=(0,re.A)(function*(n,e,t){if(!eu(e))throw e;n.L_.add(1),yield kd(n),n.q_.set("Offline"),t||(t=()=>JF(n.localStore)),n.asyncQueue.enqueueRetryable((0,re.A)(function*(){ue("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Cp(n)}))}),wA.apply(this,arguments)}function cV(n,e){return e().catch(t=>nv(n,t,e))}function Vd(n){return TA.apply(this,arguments)}function TA(){return TA=(0,re.A)(function*(n){const e=pe(n),t=hu(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;yQ(e);)try{const i=yield nQ(e.localStore,r);if(null===i){0===e.O_.length&&t.o_();break}r=i.batchId,vQ(e,i)}catch(i){yield nv(e,i)}dV(e)&&hV(e)}),TA.apply(this,arguments)}function yQ(n){return du(n)&&n.O_.length<10}function vQ(n,e){n.O_.push(e);const t=hu(n);t.r_()&&t.V_&&t.m_(e.mutations)}function dV(n){return du(n)&&!hu(n).n_()&&n.O_.length>0}function hV(n){hu(n).start()}function EQ(n){return bA.apply(this,arguments)}function bA(){return bA=(0,re.A)(function*(n){hu(n).p_()}),bA.apply(this,arguments)}function IQ(n){return AA.apply(this,arguments)}function AA(){return AA=(0,re.A)(function*(n){const e=hu(n);for(const t of n.O_)e.m_(t.mutations)}),AA.apply(this,arguments)}function wQ(n,e,t){return DA.apply(this,arguments)}function DA(){return DA=(0,re.A)(function*(n,e,t){const r=n.O_.shift(),i=Fb.from(r,e,t);yield cV(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Vd(n)}),DA.apply(this,arguments)}function TQ(n,e){return CA.apply(this,arguments)}function CA(){return CA=(0,re.A)(function*(n,e){var t;e&&hu(n).V_&&(yield(t=(0,re.A)(function*(i,s){if(Qk(a=s.code)&&a!==X.ABORTED){const o=i.O_.shift();hu(i).s_(),yield cV(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield Vd(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),dV(n)&&hV(n)}),CA.apply(this,arguments)}function fV(n,e){return SA.apply(this,arguments)}function SA(){return SA=(0,re.A)(function*(n,e){const t=pe(n);t.asyncQueue.verifyOperationInProgress(),ue("RemoteStore","RemoteStore received new credentials");const r=du(t);t.L_.add(3),yield kd(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Cp(t)}),SA.apply(this,arguments)}function PA(n,e){return RA.apply(this,arguments)}function RA(){return RA=(0,re.A)(function*(n,e){const t=pe(n);e?(t.L_.delete(2),yield Cp(t)):e||(t.L_.add(2),yield kd(t),t.q_.set("Unknown"))}),RA.apply(this,arguments)}function Ld(n){return n.K_||(n.K_=function(t,r,i){const s=pe(t);return s.w_(),new lQ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:pQ.bind(null,n),Ro:gQ.bind(null,n),mo:mQ.bind(null,n),d_:_Q.bind(null,n)}),n.B_.push(function(){var e=(0,re.A)(function*(t){t?(n.K_.s_(),_A(n)?mA(n):n.q_.set("Unknown")):(yield n.K_.stop(),lV(n))});return function(t){return e.apply(this,arguments)}}())),n.K_}function hu(n){return n.U_||(n.U_=function(t,r,i){const s=pe(t);return s.w_(),new cQ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:EQ.bind(null,n),mo:TQ.bind(null,n),f_:IQ.bind(null,n),g_:wQ.bind(null,n)}),n.B_.push(function(){var e=(0,re.A)(function*(t){t?(n.U_.s_(),yield Vd(n)):(yield n.U_.stop(),n.O_.length>0&&(ue("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))});return function(t){return e.apply(this,arguments)}}())),n.U_}class MA{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new MA(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ae(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bd(n,e){if(Ln("AsyncQueue",`${e}: ${n}`),eu(n))return new ae(X.UNAVAILABLE,`${e}: ${n}`);throw n}class Ud{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ee.comparator(t.key,r.key):(t,r)=>Ee.comparator(t.key,r.key),this.keyedMap=cp(),this.sortedSet=new en(this.comparator)}static emptySet(e){return new Ud(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ud)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ud;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class pV{constructor(){this.W_=new en(Ee.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?0!==e.type&&3===r.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==r.type?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.W_=this.W_.remove(t):1===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):De():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class jd{constructor(e,t,r,i,s,o,a,u,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new jd(e,t,Ud.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&up(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class bQ{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class AQ{constructor(){this.queries=gV(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(t,r){const i=pe(t),s=i.queries;i.queries=gV(),s.forEach((o,a)=>{for(const u of a.j_)u.onError(r)})}(this,new ae(X.ABORTED,"Firestore shutting down"))}}function gV(){return new sa(n=>Rk(n),up)}function NA(n,e){return xA.apply(this,arguments)}function xA(){return xA=(0,re.A)(function*(n,e){const t=pe(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new bQ,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=Bd(o,`Initialization of query '${wd(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&FA(t)}),xA.apply(this,arguments)}function OA(n,e){return kA.apply(this,arguments)}function kA(){return kA=(0,re.A)(function*(n,e){const t=pe(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),0===s.j_.length?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}),kA.apply(this,arguments)}function DQ(n,e){const t=pe(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&FA(t)}function CQ(n,e,t){const r=pe(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function FA(n){n.Y_.forEach(e=>{e.next()})}var VA,mV;(mV=VA||(VA={})).ea="default",mV.Cache="cache";class LA{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new jd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=jd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==VA.Cache}}class SQ{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}class _V{constructor(e){this.serializer=e}Es(e){return go(this.serializer,e)}ds(e){return e.metadata.exists?dF(this.serializer,e.document,!1):an.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Bn(e)}}class PQ{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=yV(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const r=gt.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,r=new _V(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||nt()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,re.A)(function*(){const t=yield function rQ(n,e,t,r){return sA.apply(this,arguments)}(e.localStore,new _V(e.serializer),e.documents,e.ca.id),r=e.ha(e.documents);for(const i of e.queries)yield iQ(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:t}})()}}function yV(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class vV{constructor(e){this.key=e}}class EV{constructor(e){this.key=e}}class IV{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=nt(),this.mutatedKeys=nt(),this.Aa=Nk(e),this.Ra=new Ud(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new pV,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,d="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,m)=>{const v=i.get(g),T=lp(this.query,m)?m:null,D=!!v&&this.mutatedKeys.has(v.key),S=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let x=!1;v&&T?v.data.isEqual(T.data)?D!==S&&(r.track({type:3,doc:T}),x=!0):this.ga(v,T)||(r.track({type:2,doc:T}),x=!0,(u&&this.Aa(T,u)>0||d&&this.Aa(T,d)<0)&&(a=!0)):!v&&T?(r.track({type:0,doc:T}),x=!0):v&&!T&&(r.track({type:1,doc:v}),x=!0,(u||d)&&(a=!0)),x&&(T?(o=o.add(T),s=S?s.add(g):s.delete(g)):(o=o.delete(g),s=s.delete(g)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const g="F"===this.query.limitType?o.last():o.first();o=o.delete(g.key),s=s.delete(g.key),r.track({type:1,doc:g})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((g,m)=>function(T,D){const S=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De()}};return S(T)-S(D)}(g.type,m.type)||this.Aa(g.doc,m.doc)),this.pa(r),i=null!=i&&i;const a=t&&!i?this.ya():[],u=0===this.da.size&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,0!==o.length||d?{snapshot:new jd(this.query,e.Ra,s,o,e.mutatedKeys,0===u,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new pV,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=nt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new EV(r))}),this.da.forEach(r=>{e.has(r)||t.push(new vV(r))}),t}ba(e){this.Ta=e.Ts,this.da=nt();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return jd.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class RQ{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class MQ{constructor(e){this.key=e,this.va=!1}}class NQ{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new sa(a=>Rk(a),up),this.Ma=new Map,this.xa=new Set,this.Oa=new en(Ee.comparator),this.Na=new Map,this.La=new Jb,this.Ba={},this.ka=new Map,this.qa=Sl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function xQ(n,e){return BA.apply(this,arguments)}function BA(){return BA=(0,re.A)(function*(n,e,t=!0){const r=rv(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield wV(r,e,t,!0),i}),BA.apply(this,arguments)}function OQ(n,e){return UA.apply(this,arguments)}function UA(){return UA=(0,re.A)(function*(n,e){const t=rv(n);yield wV(t,e,!0,!1)}),UA.apply(this,arguments)}function wV(n,e,t,r){return jA.apply(this,arguments)}function jA(){return jA=(0,re.A)(function*(n,e,t,r){const i=yield xd(n.localStore,Br(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=yield $A(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&tv(n.remoteStore,i),a}),jA.apply(this,arguments)}function $A(n,e,t,r,i){return HA.apply(this,arguments)}function HA(){return HA=(0,re.A)(function*(n,e,t,r,i){n.Ka=(m,v,T)=>{return(D=(0,re.A)(function*(x,W,B,z){let te=W.view.ma(B);te.ns&&(te=yield Yy(x.localStore,W.query,!1).then(({documents:R})=>W.view.ma(R,te)));const he=z&&z.targetChanges.get(W.targetId),Te=z&&null!=z.targetMismatches.get(W.targetId),L=W.view.applyChanges(te,x.isPrimaryClient,he,Te);return eD(x,W.targetId,L.wa),L.snapshot}),function S(x,W,B,z){return D.apply(this,arguments)})(n,m,v,T);var D};const s=yield Yy(n.localStore,e,!0),o=new IV(e,s.Ts),a=o.ma(s.documents),u=mp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),d=o.applyChanges(a,n.isPrimaryClient,u);eD(n,t,d.wa);const g=new RQ(e,t,o);return n.Fa.set(e,g),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),d.snapshot}),HA.apply(this,arguments)}function kQ(n,e,t){return zA.apply(this,arguments)}function zA(){return zA=(0,re.A)(function*(n,e,t){const r=pe(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!up(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Od(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Fd(r.remoteStore,i.targetId),$d(r,i.targetId)}).catch(Za))):($d(r,i.targetId),yield Od(r.localStore,i.targetId,!0))}),zA.apply(this,arguments)}function FQ(n,e){return qA.apply(this,arguments)}function qA(){return qA=(0,re.A)(function*(n,e){const t=pe(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Fd(t.remoteStore,r.targetId))}),qA.apply(this,arguments)}function GA(){return GA=(0,re.A)(function*(n,e,t){const r=dD(n);try{const i=yield function(o,a){const u=pe(o),d=mn.now(),g=a.reduce((T,D)=>T.add(D.key),nt());let m,v;return u.persistence.runTransaction("Locally write mutations","readwrite",T=>{let D=wi(),S=nt();return u.cs.getEntries(T,g).next(x=>{D=x,D.forEach((W,B)=>{B.isValidDocument()||(S=S.add(W))})}).next(()=>u.localDocuments.getOverlayedDocuments(T,D)).next(x=>{m=x;const W=[];for(const B of a){const z=l7(B,m.get(B.key).overlayedDocument);null!=z&&W.push(new oa(B.key,z,pk(z.value.mapValue),yn.exists(!0)))}return u.mutationQueue.addMutationBatch(T,d,W,a)}).next(x=>{v=x;const W=x.applyToLocalDocumentSet(m,S);return u.documentOverlayCache.saveOverlays(T,x.batchId,W)})}).then(()=>({batchId:v.batchId,changes:Ok(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new en(Ge)),d=d.insert(a,u),o.Ba[o.currentUser.toKey()]=d}(r,i.batchId,t),yield ua(r,i.changes),yield Vd(r.remoteStore)}catch(i){const s=Bd(i,"Failed to persist write");t.reject(s)}}),GA.apply(this,arguments)}function TV(n,e){return WA.apply(this,arguments)}function WA(){return WA=(0,re.A)(function*(n,e){const t=pe(n);try{const r=yield function tQ(n,e){const t=pe(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const a=[];e.targetChanges.forEach((g,m)=>{const v=i.get(m);if(!v)return;a.push(t.Ur.removeMatchingKeys(s,g.removedDocuments,m).next(()=>t.Ur.addMatchingKeys(s,g.addedDocuments,m)));let T=v.withSequenceNumber(s.currentSequenceNumber);var S,x,W;null!==e.targetMismatches.get(m)?T=T.withResumeToken(Cn.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):g.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(g.resumeToken,r)),i=i.insert(m,T),x=T,W=g,(0===(S=v).resumeToken.approximateByteSize()||x.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8||W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0)&&a.push(t.Ur.updateTargetData(s,T))});let u=wi(),d=nt();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,g))}),a.push(XF(s,o,e.documentUpdates).next(g=>{u=g.Ps,d=g.Is})),!r.isEqual(Me.min())){const g=t.Ur.getLastRemoteSnapshotVersion(s).next(m=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(g)}return G.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(t.os=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Na.get(s);o&&(Ce(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ce(o.va):i.removedDocuments.size>0&&(Ce(o.va),o.va=!1))}),yield ua(t,r,e)}catch(r){yield Za(r)}}),WA.apply(this,arguments)}function bV(n,e,t){const r=pe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=pe(o);u.onlineState=a;let d=!1;u.queries.forEach((g,m)=>{for(const v of m.j_)v.Z_(a)&&(d=!0)}),d&&FA(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function LQ(n,e,t){return KA.apply(this,arguments)}function KA(){return KA=(0,re.A)(function*(n,e,t){const r=pe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new en(Ee.comparator);o=o.insert(s,an.newNoDocument(s,Me.min()));const a=nt().add(s),u=new gp(Me.min(),new Map,new en(Ge),o,a);yield TV(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),tD(r)}else yield Od(r.localStore,e,!1).then(()=>$d(r,e,t)).catch(Za)}),KA.apply(this,arguments)}function BQ(n,e){return QA.apply(this,arguments)}function QA(){return QA=(0,re.A)(function*(n,e){const t=pe(n),r=e.batch.batchId;try{const i=yield function eQ(n,e){const t=pe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,d,g){const m=d.batch,v=m.keys();let T=G.resolve();return v.forEach(D=>{T=T.next(()=>g.getEntry(u,D)).next(S=>{const x=d.docVersions.get(D);Ce(null!==x),S.version.compareTo(x)<0&&(m.applyToRemoteDocument(S,d),S.isValidDocument()&&(S.setReadTime(d.commitVersion),g.addEntry(S)))})}),T.next(()=>a.mutationQueue.removeMutationBatch(u,m))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=nt();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(u=u.add(a.batch.mutations[d].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);ZA(t,r,null),XA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ua(t,i)}catch(i){yield Za(i)}}),QA.apply(this,arguments)}function UQ(n,e,t){return YA.apply(this,arguments)}function YA(){return YA=(0,re.A)(function*(n,e,t){const r=pe(n);try{const i=yield function(o,a){const u=pe(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let g;return u.mutationQueue.lookupMutationBatch(d,a).next(m=>(Ce(null!==m),g=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,g,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,g)).next(()=>u.localDocuments.getDocuments(d,g))})}(r.localStore,e);ZA(r,e,t),XA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ua(r,i)}catch(i){yield Za(i)}}),YA.apply(this,arguments)}function JA(){return JA=(0,re.A)(function*(n,e){const t=pe(n);du(t.remoteStore)||ue("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=pe(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){const i=Bd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),JA.apply(this,arguments)}function XA(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function ZA(n,e,t){const r=pe(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function $d(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||AV(n,r)})}function AV(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);null!==t&&(Fd(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),tD(n))}function eD(n,e,t){for(const r of t)r instanceof vV?(n.La.addReference(r.key,e),$Q(n,r)):r instanceof EV?(ue("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||AV(n,r.key)):De()}function $Q(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(ue("SyncEngine","New document in limbo: "+t),n.xa.add(r),tD(n))}function tD(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Ee(gt.fromString(e)),r=n.qa.next();n.Na.set(r,new MQ(t)),n.Oa=n.Oa.insert(t,r),tv(n.remoteStore,new aa(Br(Ed(t.path)),r,"TargetPurposeLimboResolution",zi.oe))}}function ua(n,e,t){return nD.apply(this,arguments)}function nD(){return nD=(0,re.A)(function*(n,e,t){const r=pe(n),i=[],s=[],o=[];var a;r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,t).then(d=>{var g;if((d||t)&&r.isPrimaryClient){const m=d?!d.fromCache:null===(g=t?.targetChanges.get(u.targetId))||void 0===g?void 0:g.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){i.push(d);const m=nA.Wi(u.targetId,d);s.push(m)}}))}),yield Promise.all(o),r.Ca.d_(i),yield(a=(0,re.A)(function*(d,g){const m=pe(d);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>G.forEach(g,T=>G.forEach(T.$i,D=>m.persistence.referenceDelegate.addReference(v,T.targetId,D)).next(()=>G.forEach(T.Ui,D=>m.persistence.referenceDelegate.removeReference(v,T.targetId,D)))))}catch(v){if(!eu(v))throw v;ue("LocalStore","Failed to update sequence numbers: "+v)}for(const v of g){const T=v.targetId;if(!v.fromCache){const D=m.os.get(T),x=D.withLastLimboFreeSnapshotVersion(D.snapshotVersion);m.os=m.os.insert(T,x)}}}),function u(d,g){return a.apply(this,arguments)})(r.localStore,s))}),nD.apply(this,arguments)}function HQ(n,e){return rD.apply(this,arguments)}function rD(){return rD=(0,re.A)(function*(n,e){const t=pe(n);if(!t.currentUser.isEqual(e)){ue("SyncEngine","User change. New user:",e.toKey());const r=yield YF(t.localStore,e);t.currentUser=e,(s=t).ka.forEach(a=>{a.forEach(u=>{u.reject(new ae(X.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ka.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ua(t,r.hs)}var s}),rD.apply(this,arguments)}function zQ(n,e){const t=pe(n),r=t.Na.get(e);if(r&&r.va)return nt().add(r.key);{let i=nt();const s=t.Ma.get(e);if(!s)return i;for(const o of s){const a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function qQ(n,e){return iD.apply(this,arguments)}function iD(){return iD=(0,re.A)(function*(n,e){const t=pe(n),r=yield Yy(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&eD(t,e.targetId,i.wa),i}),iD.apply(this,arguments)}function GQ(n,e){return sD.apply(this,arguments)}function sD(){return sD=(0,re.A)(function*(n,e){const t=pe(n);return eV(t.localStore,e).then(r=>ua(t,r))}),sD.apply(this,arguments)}function WQ(n,e,t,r){return oD.apply(this,arguments)}function oD(){return oD=(0,re.A)(function*(n,e,t,r){const i=pe(n),s=yield function(a,u){const d=pe(a),g=pe(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",m=>g.Mn(m,u).next(v=>v?d.localDocuments.getDocuments(m,v):G.resolve(null)))}(i.localStore,e);var u;null!==s?("pending"===t?yield Vd(i.remoteStore):"acknowledged"===t||"rejected"===t?(ZA(i,e,r||null),XA(i,e),u=e,pe(pe(i.localStore).mutationQueue).On(u)):De(),yield ua(i,s)):ue("SyncEngine","Cannot apply mutation batch with id: "+e)}),oD.apply(this,arguments)}function aD(){return aD=(0,re.A)(function*(n,e){const t=pe(n);if(rv(t),dD(t),!0===e&&!0!==t.Qa){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield DV(t,r.toArray());t.Qa=!0,yield PA(t.remoteStore,!0);for(const s of i)tv(t.remoteStore,s)}else if(!1===e&&!1!==t.Qa){const r=[];let i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>($d(t,o),Od(t.localStore,o,!0))),Fd(t.remoteStore,o)}),yield i,yield DV(t,r),function(o){const a=pe(o);a.Na.forEach((u,d)=>{Fd(a.remoteStore,d)}),a.La.pr(),a.Na=new Map,a.Oa=new en(Ee.comparator)}(t),t.Qa=!1,yield PA(t.remoteStore,!1)}}),aD.apply(this,arguments)}function DV(n,e,t){return uD.apply(this,arguments)}function uD(){return uD=(0,re.A)(function*(n,e,t){const r=pe(n),i=[],s=[];for(const o of e){let a;const u=r.Ma.get(o);if(u&&0!==u.length){a=yield xd(r.localStore,Br(u[0]));for(const d of u){const g=r.Fa.get(d),m=yield qQ(r,g);m.snapshot&&s.push(m.snapshot)}}else{const d=yield ZF(r.localStore,o);a=yield xd(r.localStore,d),yield $A(r,CV(d),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i}),uD.apply(this,arguments)}function CV(n){return Dk(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function QQ(n){return t=pe(n).localStore,pe(pe(t).persistence).Qi();var t}function YQ(n,e,t,r){return lD.apply(this,arguments)}function lD(){return lD=(0,re.A)(function*(n,e,t,r){const i=pe(n);if(i.Qa)return void ue("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield eV(i.localStore,Mk(s[0])),a=gp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Cn.EMPTY_BYTE_STRING);yield ua(i,o,a);break}case"rejected":yield Od(i.localStore,e,!0),$d(i,e,r);break;default:De()}}),lD.apply(this,arguments)}function JQ(n,e,t){return cD.apply(this,arguments)}function cD(){return cD=(0,re.A)(function*(n,e,t){const r=rv(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){ue("SyncEngine","Adding an already active target "+i);continue}const s=yield ZF(r.localStore,i),o=yield xd(r.localStore,s);yield $A(r,CV(s),o.targetId,!1,o.resumeToken),tv(r.remoteStore,o)}for(const i of t)r.Ma.has(i)&&(yield Od(r.localStore,i,!1).then(()=>{Fd(r.remoteStore,i),$d(r,i)}).catch(Za))}}),cD.apply(this,arguments)}function rv(n){const e=pe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=TV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zQ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LQ.bind(null,e),e.Ca.d_=DQ.bind(null,e.eventManager),e.Ca.$a=CQ.bind(null,e.eventManager),e}function dD(n){const e=pe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BQ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UQ.bind(null,e),e}let Hd=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){var r=this;return(0,re.A)(function*(){r.serializer=Dp(t.databaseInfo.databaseId),r.sharedClientState=r.Wa(t),r.persistence=r.Ga(t),yield r.persistence.start(),r.localStore=r.za(t),r.gcScheduler=r.ja(t,r.localStore),r.indexBackfillerScheduler=r.Ha(t,r.localStore)})()}ja(t,r){return null}Ha(t,r){return null}za(t){return QF(this.persistence,new KF,t.initialUser,this.serializer)}Ga(t){return new Xb(Wy.Zr,this.serializer)}Wa(t){return new iV}terminate(){var t=this;return(0,re.A)(function*(){var r,i;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(i=t.indexBackfillerScheduler)||void 0===i||i.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}return n.provider={build:()=>new n},n})();class hD extends Hd{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,re.A)(function*(){yield t().call(r,e),yield r.Ja.initialize(r,e),yield dD(r.Ja.syncEngine),yield Vd(r.Ja.remoteStore),yield r.persistence.yi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}za(e){return QF(this.persistence,new KF,e.initialUser,this.serializer)}ja(e,t){return new BF(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ha(e,t){const r=new EK(t,this.persistence);return new vK(e.asyncQueue,r)}Ga(e){const t=tA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ur.withCacheSize(this.cacheSizeBytes):Ur.DEFAULT;return new eA(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,oV(),ev(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new iV}}class SV extends hD{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,re.A)(function*(){yield t().call(r,e);const i=r.Ja.syncEngine;r.sharedClientState instanceof cA&&(r.sharedClientState.syncEngine={no:WQ.bind(null,i),ro:YQ.bind(null,i),io:JQ.bind(null,i),Qi:QQ.bind(null,i),eo:GQ.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.yi(function(){var s=(0,re.A)(function*(o){yield function KQ(n,e){return aD.apply(this,arguments)}(r.Ja.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}Wa(e){const t=oV();if(!cA.D(t))throw new ae(X.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=tA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new cA(t,e.asyncQueue,r,e.clientId,e.initialUser)}}let zd=(()=>{class n{initialize(t,r){var i=this;return(0,re.A)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=s=>bV(i.syncEngine,s,1),i.remoteStore.remoteSyncer.handleCredentialChange=HQ.bind(null,i.syncEngine),yield PA(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new AQ}createDatastore(t){const r=Dp(t.databaseInfo.databaseId),i=new uQ(t.databaseInfo);return new dQ(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return i=this.localStore,s=this.datastore,o=t.asyncQueue,a=r=>bV(this.syncEngine,r,0),u=sV.D()?new sV:new sQ,new fQ(i,s,o,a,u);var i,s,o,a,u}createSyncEngine(t,r){return function(s,o,a,u,d,g,m){const v=new NQ(s,o,a,u,d,g);return m&&(v.Qa=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return(0,re.A)(function*(){var r,i,s;yield(s=(0,re.A)(function*(a){const u=pe(a);ue("RemoteStore","RemoteStore shutting down."),u.L_.add(5),yield kd(u),u.k_.shutdown(),u.q_.set("Unknown")}),function o(a){return s.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(i=t.eventManager)||void 0===i||i.terminate()})()}}return n.provider={build:()=>new n},n})();function PV(n,e=10240){let t=0;return{read:()=>(0,re.A)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,re.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class iv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ln("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class eY{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new br,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){var e=this;return(0,re.A)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,re.A)(function*(){return yield e.getMetadata(),e.tu()})()}tu(){var e=this;return(0,re.A)(function*(){const t=yield e.nu();if(null===t)return null;const r=e.eu.decode(t),i=Number(r);isNaN(i)&&e.ru(`length string (${r}) is not valid number`);const s=yield e.iu(i);return new SQ(JSON.parse(s),t.length+i)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}nu(){var e=this;return(0,re.A)(function*(){for(;e.su()<0&&!(yield e.ou()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.ru("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}iu(e){var t=this;return(0,re.A)(function*(){for(;t.buffer.length<e;)(yield t.ou())&&t.ru("Reached the end of bundle when more is expected.");const r=t.eu.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){var e=this;return(0,re.A)(function*(){const t=yield e.Xa.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class tY{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,re.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new ae(X.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,re.A)(function*(o,a){const u=pe(o),d={documents:a.map(T=>_p(u.serializer,T))},g=yield u.Lo("BatchGetDocuments",u.serializer.databaseId,gt.emptyPath(),d,a.length),m=new Map;g.forEach(T=>{const D=function y7(n,e){return"found"in e?function(r,i){Ce(!!i.found);const s=go(r,i.found.name),o=Bn(i.found.updateTime),a=i.found.createTime?Bn(i.found.createTime):Me.min(),u=new Rr({mapValue:{fields:i.found.fields}});return an.newFoundDocument(s,o,a,u)}(n,e):"missing"in e?function(r,i){Ce(!!i.missing),Ce(!!i.readTime);const s=go(r,i.missing),o=Bn(i.readTime);return an.newNoDocument(s,o)}(n,e):De()}(u.serializer,T);m.set(D.key.toString(),D)});const v=[];return a.forEach(T=>{const D=m.get(T.toString());Ce(!!D),v.push(D)}),v}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Dd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,re.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Ee.fromPath(i);e.mutations.push(new Ob(s,e.precondition(s)))}),yield(r=(0,re.A)(function*(s,o){const a=pe(s),u={writes:o.map(d=>yp(a.serializer,d))};yield a.Mo("Commit",a.serializer.databaseId,gt.emptyPath(),u)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw De();t=Me.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ae(X.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Me.min())?yn.exists(!1):yn.updateTime(t):yn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Me.min()))throw new ae(X.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return yn.updateTime(t)}return yn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class nY{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new hA(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){var e=this;this.t_.Go((0,re.A)(function*(){const t=new tY(e.datastore),r=e.cu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.lu(s)}))}).catch(i=>{e.lu(i)})}))}cu(e){try{const t=this.updateFunction(e);return!ep(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Qk(t)}return!1}}class rY{constructor(e,t,r,i,s){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Tr.UNAUTHENTICATED,this.clientId=UO.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,function(){var a=(0,re.A)(function*(u){ue("FirestoreClient","Received user=",u.uid),yield o.authCredentialListener(u),o.user=u});return function(u){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(ue("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,re.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Bd(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function fD(n,e){return pD.apply(this,arguments)}function pD(){return pD=(0,re.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ue("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,re.A)(function*(s){r.isEqual(s)||(yield YF(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),pD.apply(this,arguments)}function RV(n,e){return gD.apply(this,arguments)}function gD(){return gD=(0,re.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield mD(n);ue("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>fV(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>fV(e.remoteStore,i)),n._onlineComponents=e}),gD.apply(this,arguments)}function mD(n){return _D.apply(this,arguments)}function _D(){return _D=(0,re.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue("FirestoreClient","Using user provided OfflineComponentProvider");try{yield fD(n,n._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===X.FAILED_PRECONDITION||i.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;$i("Error using user provided cache. Falling back to memory cache: "+e),yield fD(n,new Hd)}}else ue("FirestoreClient","Using default OfflineComponentProvider"),yield fD(n,new Hd);var i;return n._offlineComponents}),_D.apply(this,arguments)}function sv(n){return yD.apply(this,arguments)}function yD(){return yD=(0,re.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue("FirestoreClient","Using user provided OnlineComponentProvider"),yield RV(n,n._uninitializedComponentsProvider._online)):(ue("FirestoreClient","Using default OnlineComponentProvider"),yield RV(n,new zd))),n._onlineComponents}),yD.apply(this,arguments)}function MV(n){return mD(n).then(e=>e.persistence)}function qd(n){return mD(n).then(e=>e.localStore)}function NV(n){return sv(n).then(e=>e.remoteStore)}function vD(n){return sv(n).then(e=>e.syncEngine)}function Gd(n){return ED.apply(this,arguments)}function ED(){return ED=(0,re.A)(function*(n){const e=yield sv(n),t=e.eventManager;return t.onListen=xQ.bind(null,e.syncEngine),t.onUnlisten=kQ.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=OQ.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=FQ.bind(null,e.syncEngine),t}),ED.apply(this,arguments)}function OV(n,e,t={}){const r=new br;return n.asyncQueue.enqueueAndForget((0,re.A)(function*(){return function(s,o,a,u,d){const g=new iv({next:v=>{g.Za(),o.enqueueAndForget(()=>OA(s,m));const T=v.docs.has(a);!T&&v.fromCache?d.reject(new ae(X.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&v.fromCache&&u&&"server"===u.source?d.reject(new ae(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),m=new LA(Ed(a.path),g,{includeMetadataChanges:!0,_a:!0});return NA(s,m)}(yield Gd(n),n.asyncQueue,e,t,r)})),r.promise}function kV(n,e,t={}){const r=new br;return n.asyncQueue.enqueueAndForget((0,re.A)(function*(){return function(s,o,a,u,d){const g=new iv({next:v=>{g.Za(),o.enqueueAndForget(()=>OA(s,m)),v.fromCache&&"server"===u.source?d.reject(new ae(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),m=new LA(a,g,{includeMetadataChanges:!0,_a:!0});return NA(s,m)}(yield Gd(n),n.asyncQueue,e,t,r)})),r.promise}function FV(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const VV=new Map;function ID(n,e,t){if(!t)throw new ae(X.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function LV(n,e,t,r){if(!0===e&&!0===r)throw new ae(X.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function BV(n){if(!Ee.isDocumentKey(n))throw new ae(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function UV(n){if(Ee.isDocumentKey(n))throw new ae(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ov(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":De()}function ut(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ae(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ov(n);throw new ae(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function jV(n,e){if(e<=0)throw new ae(X.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class $V{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ae(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ae(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=FV(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new ae(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ae(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ae(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sp{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $V({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ae(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $V(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new aK;switch(r.type){case"firstParty":return new dK(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ae(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,re.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=VV.get(t);r&&(ue("ComponentProvider","Removing Datastore"),VV.delete(t),r.terminate())}(this),Promise.resolve()}}function HV(n,e,t,r={}){var i;const s=(n=ut(n,Sp))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&$i("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=Tr.MOCK_USER;else{a=(0,St.Fy)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new ae(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Tr(d)}n._authCredentials=new uK(new LO(a,u))}}class Mr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Mr(this.firestore,e,this._query)}}class un{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new un(this.firestore,e,this._key)}}class mo extends Mr{constructor(e,t,r){super(e,t,Ed(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new un(this.firestore,null,new Ee(e))}withConverter(e){return new mo(this.firestore,e,this._path)}}function zV(n,e,...t){if(n=(0,St.Ku)(n),ID("collection","path",e),n instanceof Sp){const r=gt.fromString(e,...t);return UV(r),new mo(n,null,r)}{if(!(n instanceof un||n instanceof mo))throw new ae(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(gt.fromString(e,...t));return UV(r),new mo(n.firestore,null,r)}}function av(n,e,...t){if(n=(0,St.Ku)(n),1===arguments.length&&(e=UO.newId()),ID("doc","path",e),n instanceof Sp){const r=gt.fromString(e,...t);return BV(r),new un(n,null,new Ee(r))}{if(!(n instanceof un||n instanceof mo))throw new ae(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(gt.fromString(e,...t));return BV(r),new un(n.firestore,n instanceof mo?n.converter:null,new Ee(r))}}function qV(n,e){return n=(0,St.Ku)(n),e=(0,St.Ku)(e),(n instanceof un||n instanceof mo)&&(e instanceof un||e instanceof mo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function wD(n,e){return n=(0,St.Ku)(n),e=(0,St.Ku)(e),n instanceof Mr&&e instanceof Mr&&n.firestore===e.firestore&&up(n._query,e._query)&&n.converter===e.converter}class GV{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new hA(this,"async_queue_retry"),this.Vu=()=>{const r=ev();r&&ue("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=ev();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=ev();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new br;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return(0,re.A)(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(t){if(!eu(t))throw t;ue("AsyncQueue","Operation failed with retryable error: "+t)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{throw this.Eu=r,this.du=!1,Ln("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=MA.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&De()}verifyOperationInProgress(){}wu(){var e=this;return(0,re.A)(function*(){let t;do{t=e.mu,yield t}while(t!==e.mu)})()}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function TD(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class mY{constructor(){this._progressObserver={},this._taskCompletionResolver=new br,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Wt extends Sp{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new GV,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,re.A)(function*(){if(e._firestoreClient){const t=e._firestoreClient.terminate();e._queue=new GV(t),e._firestoreClient=void 0,yield t}})()}}function yY(n,e){const t="object"==typeof n?n:(0,ii.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,ii._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,St.yU)("firestore");s&&HV(i,...s)}return i}function vn(n){if(n._terminated)throw new ae(X.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||WV(n),n._firestoreClient}function WV(n){var e,t,r;const i=n._freezeSettings(),s=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new $K(n._databaseId,u,n._persistenceKey,(g=i).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,FV(g.experimentalLongPollingOptions),g.useFetchStreams));var u,g;n._componentsProvider||!(null===(t=i.localCache)||void 0===t)&&t._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new rY(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function bD(){return bD=(0,re.A)(function*(n){$i("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();KV(n,zd.provider,{build:t=>new SV(t,e.cacheSizeBytes)})}),bD.apply(this,arguments)}function KV(n,e,t){if((n=ut(n,Wt))._firestoreClient||n._terminated)throw new ae(X.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ae(X.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},WV(n)}class _o{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _o(Cn.fromBase64String(e))}catch(t){throw new ae(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _o(Cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class la{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ae(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Rl{constructor(e){this._methodName=e}}class uv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ae(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ae(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ge(this._lat,e._lat)||Ge(this._long,e._long)}}class lv{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}const SY=/^__.*__$/;class PY{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new oa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ad(e,this.data,t,this.fieldTransforms)}}class QV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new oa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function YV(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De()}}class cv{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new cv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return fv(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(YV(this.Cu)&&SY.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class RY{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Dp(e)}Qu(e,t,r,i=!1){return new cv({Cu:e,methodName:t,qu:r,path:on.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ml(n){const e=n._freezeSettings(),t=Dp(n._databaseId);return new RY(n._databaseId,!!e.ignoreUndefinedProperties,t)}function dv(n,e,t,r,i,s={}){const o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);MD("Data must be an object, but it was:",o,r);const a=ZV(r,o);let u,d;if(s.merge)u=new Ii(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const g=[];for(const m of s.mergeFields){const v=Mp(e,m,t);if(!o.contains(v))throw new ae(X.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);tL(g,v)||g.push(v)}u=new Ii(g),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new PY(new Rr(a),u,d)}class Rp extends Rl{_toFieldTransform(e){if(2!==e.Cu)throw e.Bu(1===e.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rp}}function JV(n,e,t){return new cv({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class AD extends Rl{_toFieldTransform(e){return new hp(e.path,new Td)}isEqual(e){return e instanceof AD}}class DD extends Rl{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=JV(this,e,!0),r=this.Ku.map(s=>Nl(s,t)),i=new Il(r);return new hp(e.path,i)}isEqual(e){return e instanceof DD&&(0,St.bD)(this.Ku,e.Ku)}}class CD extends Rl{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=JV(this,e,!0),r=this.Ku.map(s=>Nl(s,t)),i=new wl(r);return new hp(e.path,i)}isEqual(e){return e instanceof CD&&(0,St.bD)(this.Ku,e.Ku)}}class SD extends Rl{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new bd(e.serializer,Vk(e.serializer,this.$u));return new hp(e.path,t)}isEqual(e){return e instanceof SD&&this.$u===e.$u}}function PD(n,e,t,r){const i=n.Qu(1,e,t);MD("Data must be an object, but it was:",i,r);const s=[],o=Rr.empty();tu(r,(u,d)=>{const g=hv(e,u,t);d=(0,St.Ku)(d);const m=i.Nu(g);if(d instanceof Rp)s.push(g);else{const v=Nl(d,m);null!=v&&(s.push(g),o.set(g,v))}});const a=new Ii(s);return new QV(o,a,i.fieldTransforms)}function RD(n,e,t,r,i,s){const o=n.Qu(1,e,t),a=[Mp(e,r,t)],u=[i];if(s.length%2!=0)throw new ae(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)a.push(Mp(e,s[v])),u.push(s[v+1]);const d=[],g=Rr.empty();for(let v=a.length-1;v>=0;--v)if(!tL(d,a[v])){const T=a[v];let D=u[v];D=(0,St.Ku)(D);const S=o.Nu(T);if(D instanceof Rp)d.push(T);else{const x=Nl(D,S);null!=x&&(d.push(T),g.set(T,x))}}const m=new Ii(d);return new QV(g,m,o.fieldTransforms)}function XV(n,e,t,r=!1){return Nl(t,n.Qu(r?4:3,e))}function Nl(n,e){if(eL(n=(0,St.Ku)(n)))return MD("Unsupported field value:",e,n),ZV(n,e);if(n instanceof Rl)return function(r,i){if(!YV(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=Nl(a,i.Lu(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,St.Ku)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return Vk(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=mn.fromDate(r);return{timestampValue:Cd(i.serializer,s)}}if(r instanceof mn){const s=new mn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cd(i.serializer,s)}}if(r instanceof uv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _o)return{bytesValue:sF(i.serializer,r._byteString)};if(r instanceof un){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ub(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof lv)return a=i,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(u=>{if("number"!=typeof u)throw a.Bu("VectorValues must only contain numeric values.");return xb(a.serializer,u)})}}}}};var a;throw i.Bu(`Unsupported field value: ${ov(r)}`)}(n,e)}function ZV(n,e){const t={};return rk(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):tu(n,(r,i)=>{const s=Nl(i,e.Mu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function eL(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof mn||n instanceof uv||n instanceof _o||n instanceof un||n instanceof Rl||n instanceof lv)}function MD(n,e,t){if(!eL(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=ov(t);throw e.Bu("an object"===r?n+" a custom object":n+" "+r)}var i}function Mp(n,e,t){if((e=(0,St.Ku)(e))instanceof la)return e._internalPath;if("string"==typeof e)return hv(n,e);throw fv("Field path arguments must be of type string or ",n,!1,void 0,t)}const MY=new RegExp("[~\\*/\\[\\]]");function hv(n,e,t){if(e.search(MY)>=0)throw fv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new la(...e.split("."))._internalPath}catch{throw fv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function fv(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new ae(X.INVALID_ARGUMENT,a+n+u)}function tL(n,e){return n.some(t=>t.isEqual(e))}class Np{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new un(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new NY(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(pv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class NY extends Np{data(){return super.data()}}function pv(n,e){return"string"==typeof e?hv(n,e):e instanceof la?e._internalPath:e._delegate._internalPath}function nL(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ae(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ND{}class xp extends ND{}function fu(n,e,...t){let r=[];e instanceof ND&&r.push(e),r=r.concat(t),function(s){const o=s.filter(u=>u instanceof Wd).length,a=s.filter(u=>u instanceof Op).length;if(o>1||o>0&&a>0)throw new ae(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Op extends xp{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Op(e,t,r)}_apply(e){const t=this._parse(e);return oL(e._query,t),new Mr(e.firestore,e.converter,Mb(e._query,t))}_parse(e){const t=Ml(e.firestore);return function(s,o,a,u,d,g,m){let v;if(d.isKeyField()){if("array-contains"===g||"array-contains-any"===g)throw new ae(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if("in"===g||"not-in"===g){sL(m,g);const T=[];for(const D of m)T.push(iL(u,s,D));v={arrayValue:{values:T}}}else v=iL(u,s,m)}else"in"!==g&&"not-in"!==g&&"array-contains-any"!==g||sL(m,g),v=XV(a,"where",m,"in"===g||"not-in"===g);return mt.create(d,g,v)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Wd extends ND{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Wd(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:kt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)oL(o,u),o=Mb(o,u)}(e._query,t),new Mr(e.firestore,e.converter,Mb(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class xD extends xp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new xD(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new ae(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new ae(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new op(s,o)}(e._query,this._field,this._direction);return new Mr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ia(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class gv extends xp{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new gv(e,t,r)}_apply(e){return new Mr(e.firestore,e.converter,xy(e._query,this._limit,this._limitType))}}class mv extends xp{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new mv(e,t,r)}_apply(e){const t=rL(e,this.type,this._docOrFields,this._inclusive);return new Mr(e.firestore,e.converter,(s=t,new ia((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class _v extends xp{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new _v(e,t,r)}_apply(e){const t=rL(e,this.type,this._docOrFields,this._inclusive);return new Mr(e.firestore,e.converter,(s=t,new ia((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function rL(n,e,t,r){if(t[0]=(0,St.Ku)(t[0]),t[0]instanceof Np)return function(s,o,a,u,d){if(!u)throw new ae(X.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const g=[];for(const m of Id(s))if(m.field.isKeyField())g.push(vl(o,u.key));else{const v=u.data.field(m.field);if(Ay(v))throw new ae(X.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===v){const T=m.field.canonicalString();throw new ae(X.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${T}' (used as the orderBy) does not exist.`)}g.push(v)}return new ou(g,d)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Ml(n.firestore);return function(o,a,u,d,g,m){const v=o.explicitOrderBy;if(g.length>v.length)throw new ae(X.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const T=[];for(let D=0;D<g.length;D++){const S=g[D];if(v[D].field.isKeyField()){if("string"!=typeof S)throw new ae(X.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof S}`);if(!Rb(o)&&-1!==S.indexOf("/"))throw new ae(X.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${S}' contains a slash.`);const x=o.path.child(gt.fromString(S));if(!Ee.isDocumentKey(x))throw new ae(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);const W=new Ee(x);T.push(vl(a,W))}else{const x=XV(u,d,S);T.push(x)}}return new ou(T,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function iL(n,e,t){if("string"==typeof(t=(0,St.Ku)(t))){if(""===t)throw new ae(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Rb(e)&&-1!==t.indexOf("/"))throw new ae(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(gt.fromString(t));if(!Ee.isDocumentKey(r))throw new ae(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vl(n,new Ee(r))}if(t instanceof un)return vl(n,t._key);throw new ae(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ov(t)}.`)}function sL(n,e){if(!Array.isArray(n)||0===n.length)throw new ae(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function oL(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ae(X.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class OD{convertValue(e,t="none"){switch(iu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _n(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ra(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw De()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return tu(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=null===(i=null===(r=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(o=>_n(o.doubleValue));return new lv(s)}convertGeoPoint(e){return new uv(_n(e.latitude),_n(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Dy(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(np(e));default:return null}}convertTimestamp(e){const t=na(e);return new mn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=gt.fromString(e);Ce(_F(r));const i=new nu(r.get(1),r.get(3)),s=new Ee(r.popFirst(5));return i.isEqual(t)||Ln(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function yv(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class jY extends OD{constructor(e){super(),this.firestore=e}convertBytes(e){return new _o(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new un(this.firestore,null,t)}}class xl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ca extends Np{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new kp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(pv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class kp extends ca{data(e={}){return super.data(e)}}class pu{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new xl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new kp(this._firestore,this._userDataWriter,r.key,r,new xl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ae(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new kp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new xl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new kp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new xl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,g=-1;return 0!==a.type&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),g=o.indexOf(a.doc.key)),{type:HY(a.type),doc:u,oldIndex:d,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function HY(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De()}}function uL(n,e){return n instanceof ca&&e instanceof ca?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof pu&&e instanceof pu&&n._firestore===e._firestore&&wD(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class gu extends OD{constructor(e){super(),this.firestore=e}convertBytes(e){return new _o(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new un(this.firestore,null,t)}}function lL(n,e,t){n=ut(n,un);const r=ut(n.firestore,Wt),i=yv(n.converter,e,t);return Kd(r,[dv(Ml(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,yn.none())])}function cL(n,e,t,...r){n=ut(n,un);const i=ut(n.firestore,Wt),s=Ml(i);let o;return o="string"==typeof(e=(0,St.Ku)(e))||e instanceof la?RD(s,"updateDoc",n._key,e,t,r):PD(s,"updateDoc",n._key,e),Kd(i,[o.toMutation(n._key,yn.exists(!0))])}function dL(n,...e){var t,r,i;n=(0,St.Ku)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||TD(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(TD(e[o])){const m=e[o];e[o]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[o+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[o+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let u,d,g;if(n instanceof un)d=ut(n.firestore,Wt),g=Ed(n._key.path),u={next:m=>{e[o]&&e[o](kD(d,n,m))},error:e[o+1],complete:e[o+2]};else{const m=ut(n,Mr);d=ut(m.firestore,Wt),g=m._query;const v=new gu(d);u={next:T=>{e[o]&&e[o](new pu(d,v,m,T))},error:e[o+1],complete:e[o+2]},nL(n._query)}return function(v,T,D,S){const x=new iv(S),W=new LA(T,x,D);return v.asyncQueue.enqueueAndForget((0,re.A)(function*(){return NA(yield Gd(v),W)})),()=>{x.Za(),v.asyncQueue.enqueueAndForget((0,re.A)(function*(){return OA(yield Gd(v),W)}))}}(vn(d),g,a,u)}function Kd(n,e){return function(r,i){const s=new br;return r.asyncQueue.enqueueAndForget((0,re.A)(function*(){return function VQ(n,e,t){return GA.apply(this,arguments)}(yield vD(r),i,s)})),s.promise}(vn(n),e)}function kD(n,e,t){const r=t.docs.get(e._key),i=new gu(n);return new ca(n,i,e._key,r,new xl(t.hasPendingWrites,t.fromCache),e.converter)}const aJ={maxAttempts:5};class hL{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ml(e)}set(e,t,r){this._verifyNotCommitted();const i=mu(e,this._firestore),s=yv(i.converter,t,r),o=dv(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,yn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=mu(e,this._firestore);let o;return o="string"==typeof(t=(0,St.Ku)(t))||t instanceof la?RD(this._dataReader,"WriteBatch.update",s._key,t,r,i):PD(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,yn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=mu(e,this._firestore);return this._mutations=this._mutations.concat(new Dd(t._key,yn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ae(X.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function mu(n,e){if((n=(0,St.Ku)(n)).firestore!==e)throw new ae(X.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class uJ extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Ml(t)}get(t){const r=mu(t,this._firestore),i=new jY(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return De();const o=s[0];if(o.isFoundDocument())return new Np(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Np(this._firestore,i,r._key,null,r.converter);throw De()})}set(t,r,i){const s=mu(t,this._firestore),o=yv(s.converter,r,i),a=dv(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=mu(t,this._firestore);let a;return a="string"==typeof(r=(0,St.Ku)(r))||r instanceof la?RD(this._dataReader,"Transaction.update",o._key,r,i,s):PD(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=mu(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=mu(e,this._firestore),r=new gu(this._firestore);return super.get(e).then(i=>new ca(this._firestore,r,t._key,i._document,new xl(!1,!1),t.converter))}}function VD(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ae("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function mL(){if(typeof Uint8Array>"u")throw new ae("unimplemented","Uint8Arrays are not available in this environment.")}function _L(){if(!function UK(){return typeof atob<"u"}())throw new ae("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){hd=ii.SDK_VERSION,(0,ii._registerComponent)(new SO.uA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Wt(new lK(r.getProvider("auth-internal")),new hK(r.getProvider("app-check-internal")),function(d,g){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ae(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nu(d.options.projectId,g)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,ii.registerVersion)(VO,"4.7.3",e),(0,ii.registerVersion)(VO,"4.7.3","esm2017")}();class Fp{constructor(e){this._delegate=e}static fromBase64String(e){return _L(),new Fp(_o.fromBase64String(e))}static fromUint8Array(e){return mL(),new Fp(_o.fromUint8Array(e))}toBase64(){return _L(),this._delegate.toBase64()}toUint8Array(){return mL(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function LD(n){return function yJ(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class vJ{enableIndexedDbPersistence(e,t){return function vY(n,e){$i("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return KV(n,zd.provider,{build:r=>new hD(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function EY(n){return bD.apply(this,arguments)}(e._delegate)}clearIndexedDbPersistence(e){return function IY(n){if(n._initialized&&!n._terminated)throw new ae(X.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new br;return n._queue.enqueueAndForgetEvenWhileRestricted((0,re.A)(function*(){try{yield(t=(0,re.A)(function*(i){if(!co.D())return Promise.resolve();const s=i+"main";yield co.delete(s)}),function r(i){return t.apply(this,arguments)})(tA(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class yL{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof nu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&$i("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){HV(this._delegate,e,t,r)}enableNetwork(){return function TY(n){return function iY(n){return n.asyncQueue.enqueue((0,re.A)(function*(){const e=yield MV(n),t=yield NV(n);return e.setNetworkEnabled(!0),function(i){const s=pe(i);return s.L_.delete(0),Cp(s)}(t)}))}(vn(n=ut(n,Wt)))}(this._delegate)}disableNetwork(){return function bY(n){return function sY(n){return n.asyncQueue.enqueue((0,re.A)(function*(){const e=yield MV(n),t=yield NV(n);return e.setNetworkEnabled(!1),(r=(0,re.A)(function*(s){const o=pe(s);o.L_.add(0),yield kd(o),o.q_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(vn(n=ut(n,Wt)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,LV("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function wY(n){return function(t){const r=new br;return t.asyncQueue.enqueueAndForget((0,re.A)(function*(){return function jQ(n,e){return JA.apply(this,arguments)}(yield vD(t),r)})),r.promise}(vn(n=ut(n,Wt)))}(this._delegate)}onSnapshotsInSync(e){return function XY(n,e){return function lY(n,e){const t=new iv(e);return n.asyncQueue.enqueueAndForget((0,re.A)(function*(){return i=yield Gd(n),s=t,pe(i).Y_.add(s),void s.next();var i,s})),()=>{t.Za(),n.asyncQueue.enqueueAndForget((0,re.A)(function*(){return i=yield Gd(n),s=t,void pe(i).Y_.delete(s);var i,s}))}}(vn(n=ut(n,Wt)),TD(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ae("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Qd(this,zV(this._delegate,e))}catch(t){throw si(t,"collection()","Firestore.collection()")}}doc(e){try{return new ps(this,av(this._delegate,e))}catch(t){throw si(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new oi(this,function gY(n,e){if(n=ut(n,Sp),ID("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ae(X.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Mr(n,null,(r=e,new ia(gt.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw si(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function lJ(n,e,t){n=ut(n,Wt);const r=Object.assign(Object.assign({},aJ),t);return function(s){if(s.maxAttempts<1)throw new ae(X.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new br;return s.asyncQueue.enqueueAndForget((0,re.A)(function*(){const d=yield function xV(n){return sv(n).then(e=>e.datastore)}(s);new nY(s.asyncQueue,d,a,o,u).au()})),u.promise}(vn(n),i=>e(new uJ(n,i)),r)}(this._delegate,t=>e(new vL(this,t)))}batch(){return vn(this._delegate),new EL(new hL(this._delegate,e=>Kd(this._delegate,e)))}loadBundle(e){return function AY(n,e){const t=vn(n=ut(n,Wt)),r=new mY;return function cY(n,e,t,r){const i=function(o,a){let u;return u="string"==typeof o?Jk().encode(o):o,g=function(g,m){if(g instanceof Uint8Array)return PV(g,m);if(g instanceof ArrayBuffer)return PV(new Uint8Array(g),m);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new eY(g,a);var g}(t,Dp(e));n.asyncQueue.enqueueAndForget((0,re.A)(function*(){!function XQ(n,e,t){const r=pe(n);var i;(i=(0,re.A)(function*(o,a,u){try{const d=yield a.getMetadata();if(yield function(D,S){const x=pe(D),W=Bn(S.createTime);return x.persistence.runTransaction("hasNewerBundle","readonly",B=>x.Gr.getBundleMetadata(B,S.id)).then(B=>!!B&&B.createTime.compareTo(W)>=0)}(o.localStore,d))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(D=d).totalDocuments,bytesLoaded:D.totalBytes,totalDocuments:D.totalDocuments,totalBytes:D.totalBytes}),Promise.resolve(new Set);u._updateProgress(yV(d));const g=new PQ(d,o.localStore,a.serializer);let m=yield a.Ua();for(;m;){const T=yield g.la(m);T&&u._updateProgress(T),m=yield a.Ua()}const v=yield g.complete();return yield ua(o,v.Ia,void 0),yield function(D,S){const x=pe(D);return x.persistence.runTransaction("Save bundle","readwrite",W=>x.Gr.saveBundleMetadata(W,S))}(o.localStore,d),u._completeWith(v.progress),Promise.resolve(v.Pa)}catch(d){return $i("SyncEngine",`Loading bundle failed with ${d}`),u._failWith(d),Promise.resolve(new Set)}var D}),function s(o,a,u){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield vD(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function DY(n,e){return function dY(n,e){return n.asyncQueue.enqueue((0,re.A)(function*(){return function(r,i){const s=pe(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield qd(n),e)}))}(vn(n=ut(n,Wt)),e).then(t=>t?new Mr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new oi(this,t):null)}}class Ev extends OD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fp(new _o(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ps.forKey(t,this.firestore,null)}}class vL{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ev(e)}get(e){const t=kl(e);return this._delegate.get(t).then(r=>new Vp(this._firestore,new ca(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=kl(e);return r?(VD("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=kl(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=kl(e);return this._delegate.delete(t),this}}class EL{constructor(e){this._delegate=e}set(e,t,r){const i=kl(e);return r?(VD("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=kl(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=kl(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ol{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new kp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Lp(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ol.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Ol(e,new Ev(e),t),i.set(t,s)),s}}Ol.INSTANCES=new WeakMap;class ps{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ev(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ae("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ps(t,new un(t._delegate,r,new Ee(e)))}static forKey(e,t,r){return new ps(t,new un(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Qd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Qd(this.firestore,zV(this._delegate,e))}catch(t){throw si(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,St.Ku)(e))instanceof un&&qV(this._delegate,e)}set(e,t){t=VD("DocumentReference.set",t);try{return t?lL(this._delegate,e,t):lL(this._delegate,e)}catch(r){throw si(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?cL(this._delegate,e):cL(this._delegate,e,t,...r)}catch(i){throw si(i,"updateDoc()","DocumentReference.update()")}}delete(){return function YY(n){return Kd(ut(n.firestore,Wt),[new Dd(n._key,yn.none())])}(this._delegate)}onSnapshot(...e){const t=IL(e),r=wL(e,i=>new Vp(this.firestore,new ca(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return dL(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function qY(n){n=ut(n,un);const e=ut(n.firestore,Wt),t=vn(e),r=new gu(e);return function oY(n,e){const t=new br;return n.asyncQueue.enqueueAndForget((0,re.A)(function*(){return(r=(0,re.A)(function*(s,o,a){try{const u=yield function(g,m){const v=pe(g);return v.persistence.runTransaction("read document","readonly",T=>v.localDocuments.getDocument(T,m))}(s,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new ae(X.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const d=Bd(u,`Failed to get document '${o} from cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield qd(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ca(e,r,n._key,i,new xl(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function GY(n){n=ut(n,un);const e=ut(n.firestore,Wt);return OV(vn(e),n._key,{source:"server"}).then(t=>kD(e,n,t))}(this._delegate):function zY(n){n=ut(n,un);const e=ut(n.firestore,Wt);return OV(vn(e),n._key).then(t=>kD(e,n,t))}(this._delegate),t.then(r=>new Vp(this.firestore,new ca(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ps(this.firestore,this._delegate.withConverter(e?Ol.getInstance(this.firestore,e):null))}}function si(n,e,t){return n.message=n.message.replace(e,t),n}function IL(n){for(const e of n)if("object"==typeof e&&!LD(e))return e;return{}}function wL(n,e){var t,r;let i;return i=LD(n[0])?n[0]:LD(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Vp{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ps(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return uL(this._delegate,e._delegate)}}class Lp extends Vp{data(e){const t=this._delegate.data(e);return this._delegate._converter||function oK(n,e){n||De()}(void 0!==t),t}}class oi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ev(e)}where(e,t,r){try{return new oi(this.firestore,fu(this._delegate,function xY(n,e,t){const r=e,i=pv("where",n);return Op._create(i,r,t)}(e,t,r)))}catch(i){throw si(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new oi(this.firestore,fu(this._delegate,function OY(n,e="asc"){const t=e,r=pv("orderBy",n);return xD._create(r,t)}(e,t)))}catch(r){throw si(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new oi(this.firestore,fu(this._delegate,function kY(n){return jV("limit",n),gv._create("limit",n,"F")}(e)))}catch(t){throw si(t,"limit()","Query.limit()")}}limitToLast(e){try{return new oi(this.firestore,fu(this._delegate,function FY(n){return jV("limitToLast",n),gv._create("limitToLast",n,"L")}(e)))}catch(t){throw si(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new oi(this.firestore,fu(this._delegate,function VY(...n){return mv._create("startAt",n,!0)}(...e)))}catch(t){throw si(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new oi(this.firestore,fu(this._delegate,function LY(...n){return mv._create("startAfter",n,!1)}(...e)))}catch(t){throw si(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new oi(this.firestore,fu(this._delegate,function BY(...n){return _v._create("endBefore",n,!1)}(...e)))}catch(t){throw si(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new oi(this.firestore,fu(this._delegate,function UY(...n){return _v._create("endAt",n,!0)}(...e)))}catch(t){throw si(t,"endAt()","Query.endAt()")}}isEqual(e){return wD(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function KY(n){n=ut(n,Mr);const e=ut(n.firestore,Wt),t=vn(e),r=new gu(e);return function aY(n,e){const t=new br;return n.asyncQueue.enqueueAndForget((0,re.A)(function*(){return(r=(0,re.A)(function*(s,o,a){try{const u=yield Yy(s,o,!0),d=new IV(o,u.Ts),g=d.ma(u.documents),m=d.applyChanges(g,!1);a.resolve(m.snapshot)}catch(u){const d=Bd(u,`Failed to execute query '${o} against cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield qd(n),e,t);var r})),t.promise}(t,n._query).then(i=>new pu(e,r,n,i))}(this._delegate):"server"===e?.source?function QY(n){n=ut(n,Mr);const e=ut(n.firestore,Wt),t=vn(e),r=new gu(e);return kV(t,n._query,{source:"server"}).then(i=>new pu(e,r,n,i))}(this._delegate):function WY(n){n=ut(n,Mr);const e=ut(n.firestore,Wt),t=vn(e),r=new gu(e);return nL(n._query),kV(t,n._query).then(i=>new pu(e,r,n,i))}(this._delegate),t.then(r=>new BD(this.firestore,new pu(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=IL(e),r=wL(e,i=>new BD(this.firestore,new pu(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return dL(this._delegate,t,r)}withConverter(e){return new oi(this.firestore,this._delegate.withConverter(e?Ol.getInstance(this.firestore,e):null))}}class IJ{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Lp(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class BD{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new oi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Lp(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new IJ(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Lp(this._firestore,r))})}isEqual(e){return uL(this._delegate,e._delegate)}}class Qd extends oi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ps(this.firestore,e):null}doc(e){try{return new ps(this.firestore,void 0===e?av(this._delegate):av(this._delegate,e))}catch(t){throw si(t,"doc()","CollectionReference.doc()")}}add(e){return function JY(n,e){const t=ut(n.firestore,Wt),r=av(n),i=yv(n.converter,e);return Kd(t,[dv(Ml(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,yn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ps(this.firestore,t))}isEqual(e){return qV(this._delegate,e._delegate)}withConverter(e){return new Qd(this.firestore,this._delegate.withConverter(e?Ol.getInstance(this.firestore,e):null))}}function kl(n){return ut(n,un)}class UD{constructor(...e){this._delegate=new la(...e)}static documentId(){return new UD(on.keyField().canonicalString())}isEqual(e){return(e=(0,St.Ku)(e))instanceof la&&this._delegate._internalPath.isEqual(e._internalPath)}}class Fl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function dJ(){return new AD("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Fl(e)}static delete(){const e=function cJ(){return new Rp("deleteField")}();return e._methodName="FieldValue.delete",new Fl(e)}static arrayUnion(...e){const t=function hJ(...n){return new DD("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Fl(t)}static arrayRemove(...e){const t=function fJ(...n){return new CD("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Fl(t)}static increment(e){const t=function pJ(n){return new SD("increment",n)}(e);return t._methodName="FieldValue.increment",new Fl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const wJ={Firestore:yL,GeoPoint:uv,Timestamp:mn,Blob:Fp,Transaction:vL,WriteBatch:EL,DocumentReference:ps,DocumentSnapshot:Vp,Query:oi,QueryDocumentSnapshot:Lp,QuerySnapshot:BD,CollectionReference:Qd,FieldPath:UD,FieldValue:Fl,setLogLevel:function EJ(n){!function sK(n){Xa.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function TL(n,e){return function AJ(n,e=ab){return new rt(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function jD(n,e){return TL(n,e).pipe(At(t=>({payload:t,type:"query"})))}!function bJ(n){(function TJ(n,e){n.INTERNAL.registerComponent(new SO.uA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},wJ)))})(n,(e,t)=>new yL(e,t,new vJ)),n.registerVersion("@firebase/firestore-compat","0.3.38")}(Ja.A);class bL{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=RL(r,t);return new CL(i,s,this.afs)}snapshotChanges(){return function DJ(n,e){return TL(n,e).pipe(fb(void 0),pb(),At(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ji)}valueChanges(e={}){return this.snapshotChanges().pipe(At(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return er(this.ref.get(e)).pipe(ji)}}function Iv(n,e){return jD(n,e).pipe(fb(void 0),pb(),At(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const d=s.find(m=>m.doc.ref.isEqual(a.ref)),g=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));d&&JSON.stringify(d.doc.metadata)===JSON.stringify(a.metadata)||!d&&g&&JSON.stringify(g.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function AL(n,e,t){return Iv(n,t).pipe(gb((r,i)=>function CJ(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function SJ(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return $D(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return $D(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return $D(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),Bs(),At(r=>r.map(i=>({type:i.type,payload:i}))))}function $D(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function DL(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class CL{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Iv(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(At(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(fb(void 0),pb(),$f(([r,i])=>i.length>0||!r),At(([,r])=>r),ji)}auditTrail(e){return this.stateChanges(e).pipe(gb((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=DL(e);return AL(this.query,t,this.afs.schedulers.outsideAngular).pipe(ji)}valueChanges(e={}){return jD(this.query,this.afs.schedulers.outsideAngular).pipe(At(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),ji)}get(e){return er(this.query.get(e)).pipe(ji)}add(e){return this.ref.add(e)}doc(e){return new bL(this.ref.doc(e),this.afs)}}class PJ{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Iv(this.query,this.afs.schedulers.outsideAngular).pipe(At(t=>t.filter(r=>e.indexOf(r.type)>-1)),$f(t=>t.length>0),ji):Iv(this.query,this.afs.schedulers.outsideAngular).pipe(ji)}auditTrail(e){return this.stateChanges(e).pipe(gb((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=DL(e);return AL(this.query,t,this.afs.schedulers.outsideAngular).pipe(ji)}valueChanges(e={}){return jD(this.query,this.afs.schedulers.outsideAngular).pipe(At(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),ji)}get(e){return er(this.query.get(e)).pipe(ji)}}const SL=new Ie("angularfire2.enableFirestorePersistence"),PL=new Ie("angularfire2.firestore.persistenceSettings"),RJ=new Ie("angularfire2.firestore.settings"),MJ=new Ie("angularfire2.firestore.use-emulator");function RL(n,e=(t=>t)){return{query:e(n),ref:n}}let ML=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,u,d,g,m,v,T,D,S,x,W,B){this.schedulers=u;const z=hb(t,a,r),te=g;m&&AO(z,a,v,D,S,x,T,W),[this.firestore,this.persistenceEnabled$]=pO(`${z.name}.firestore`,"AngularFirestore",z.name,()=>{const he=a.runOutsideAngular(()=>z.firestore());if(s&&he.settings(s),te&&he.useEmulator(...te),i&&!N_(o)){const Te=()=>{try{return er(he.enablePersistence(d||void 0).then(()=>!0,()=>!1))}catch(L){return typeof console<"u"&&console.warn(L),Tt(!1)}};return[he,a.runOutsideAngular(Te)]}return[he,Tt(!1)]},[s,te,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=RL(i,r),a=this.schedulers.ngZone.run(()=>s);return new CL(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new PJ(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new bL(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(fe(yy),fe(vy,8),fe(SL,8),fe(RJ,8),fe(Ss),fe(Nt),fe(_y),fe(PL,8),fe(MJ,8),fe(DO,8),fe(vO,8),fe(EO,8),fe(IO,8),fe(wO,8),fe(TO,8),fe(bO,8),fe(db,8))};static \u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),NJ=(()=>{class n{constructor(){Ja.A.registerVersion("angularfire",ld.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:SL,useValue:!0},{provide:PL,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Wn({type:n});static \u0275inj=Gn({providers:[ML]})}return n})();function xJ(n,e){if(1&n){const t=nl();Qe(0,"a",12),Tn("keyup.enter",function(){return Er(t),Ct(3),Ir(as(1).previous())})("click",function(){return Er(t),Ct(3),Ir(as(1).previous())}),Ut(1),Qe(2,"span",13),Ut(3),pt()()}if(2&n){const t=Ct(3);Ze(1),ls(" ",t.previousLabel," "),Ze(2),us(t.screenReaderPageLabel)}}function OJ(n,e){if(1&n&&(Qe(0,"span",14),Ut(1),Qe(2,"span",13),Ut(3),pt()()),2&n){const t=Ct(3);Ze(1),ls(" ",t.previousLabel," "),Ze(2),us(t.screenReaderPageLabel)}}function kJ(n,e){if(1&n&&(Qe(0,"li",9),Xr(1,xJ,4,2,"a",10),Xr(2,OJ,4,2,"span",11),pt()),2&n){Ct(2);const t=as(1);ja("disabled",t.isFirstPage()),Ze(1),Ot("ngIf",1<t.getCurrent()),Ze(1),Ot("ngIf",t.isFirstPage())}}function FJ(n,e){if(1&n){const t=nl();Qe(0,"a",12),Tn("keyup.enter",function(){Er(t);const i=Ct().$implicit;return Ct(2),Ir(as(1).setCurrent(i.value))})("click",function(){Er(t);const i=Ct().$implicit;return Ct(2),Ir(as(1).setCurrent(i.value))}),Qe(1,"span",13),Ut(2),pt(),Qe(3,"span"),Ut(4),c_(5,"number"),pt()()}if(2&n){const t=Ct().$implicit,r=Ct(2);Ze(2),ls("",r.screenReaderPageLabel," "),Ze(2),us("..."===t.label?t.label:d_(5,2,t.label,""))}}function VJ(n,e){if(1&n&&(e_(0),Qe(1,"span",16)(2,"span",13),Ut(3),pt(),Qe(4,"span"),Ut(5),c_(6,"number"),pt()(),t_()),2&n){const t=Ct().$implicit,r=Ct(2);Ze(3),ls("",r.screenReaderCurrentLabel," "),Ze(2),us("..."===t.label?t.label:d_(6,2,t.label,""))}}function LJ(n,e){if(1&n&&(Qe(0,"li"),Xr(1,FJ,6,5,"a",10),Xr(2,VJ,7,5,"ng-container",15),pt()),2&n){const t=e.$implicit;Ct(2);const r=as(1);ja("current",r.getCurrent()===t.value)("ellipsis","..."===t.label),Ze(1),Ot("ngIf",r.getCurrent()!==t.value),Ze(1),Ot("ngIf",r.getCurrent()===t.value)}}function BJ(n,e){if(1&n){const t=nl();Qe(0,"a",12),Tn("keyup.enter",function(){return Er(t),Ct(3),Ir(as(1).next())})("click",function(){return Er(t),Ct(3),Ir(as(1).next())}),Ut(1),Qe(2,"span",13),Ut(3),pt()()}if(2&n){const t=Ct(3);Ze(1),ls(" ",t.nextLabel," "),Ze(2),us(t.screenReaderPageLabel)}}function UJ(n,e){if(1&n&&(Qe(0,"span",14),Ut(1),Qe(2,"span",13),Ut(3),pt()()),2&n){const t=Ct(3);Ze(1),ls(" ",t.nextLabel," "),Ze(2),us(t.screenReaderPageLabel)}}function jJ(n,e){if(1&n&&(Qe(0,"li",17),Xr(1,BJ,4,2,"a",10),Xr(2,UJ,4,2,"span",11),pt()),2&n){Ct(2);const t=as(1);ja("disabled",t.isLastPage()),Ze(1),Ot("ngIf",!t.isLastPage()),Ze(1),Ot("ngIf",t.isLastPage())}}function $J(n,e){if(1&n&&(Qe(0,"ul",4),Xr(1,kJ,3,4,"li",5),Qe(2,"li",6),Ut(3),pt(),Xr(4,LJ,3,6,"li",7),Xr(5,jJ,3,4,"li",8),pt()),2&n){const t=Ct(),r=as(1);ja("responsive",t.responsive),Ze(1),Ot("ngIf",t.directionLinks),Ze(2),ZI(" ",r.getCurrent()," / ",r.getLastPage()," "),Ze(1),Ot("ngForOf",r.pages)("ngForTrackBy",t.trackByIndex),Ze(1),Ot("ngIf",t.directionLinks)}}class HD{constructor(){this.change=new Fn,this.instances={},this.DEFAULT_ID="DEFAULT_PAGINATION_ID"}defaultId(){return this.DEFAULT_ID}register(e){return null==e.id&&(e.id=this.DEFAULT_ID),this.instances[e.id]?this.updateInstance(e):(this.instances[e.id]=e,!0)}updateInstance(e){let t=!1;for(let r in this.instances[e.id])e[r]!==this.instances[e.id][r]&&(this.instances[e.id][r]=e[r],t=!0);return t}getCurrentPage(e){return this.instances[e]?this.instances[e].currentPage:1}setCurrentPage(e,t){if(this.instances[e]){let r=this.instances[e];t<=Math.ceil(r.totalItems/r.itemsPerPage)&&1<=t&&(this.instances[e].currentPage=t,this.change.emit(e))}}setTotalItems(e,t){this.instances[e]&&0<=t&&(this.instances[e].totalItems=t,this.change.emit(e))}setItemsPerPage(e,t){this.instances[e]&&(this.instances[e].itemsPerPage=t,this.change.emit(e))}getInstance(e=this.DEFAULT_ID){return this.instances[e]?this.clone(this.instances[e]):{}}clone(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}}const HJ=Number.MAX_SAFE_INTEGER;let zJ=(()=>{class n{constructor(t){this.service=t,this.state={}}transform(t,r){if(!(t instanceof Array)){let m=r.id||this.service.defaultId();return this.state[m]?this.state[m].slice:t}let a,u,i=r.totalItems&&r.totalItems!==t.length,s=this.createInstance(t,r),o=s.id,d=s.itemsPerPage,g=this.service.register(s);if(!i&&t instanceof Array){if(d=+d||HJ,a=(s.currentPage-1)*d,u=a+d,this.stateIsIdentical(o,t,a,u))return this.state[o].slice;{let v=t.slice(a,u);return this.saveState(o,t,v,a,u),this.service.change.emit(o),v}}return g&&this.service.change.emit(o),this.saveState(o,t,t,a,u),t}createInstance(t,r){return this.checkConfig(r),{id:null!=r.id?r.id:this.service.defaultId(),itemsPerPage:+r.itemsPerPage||0,currentPage:+r.currentPage||1,totalItems:+r.totalItems||t.length}}checkConfig(t){const i=["itemsPerPage","currentPage"].filter(s=>!(s in t));if(0<i.length)throw new Error(`PaginatePipe: Argument is missing the following required properties: ${i.join(", ")}`)}saveState(t,r,i,s,o){this.state[t]={collection:r,size:r.length,slice:i,start:s,end:o}}stateIsIdentical(t,r,i,s){let o=this.state[t];return!(!o||o.size!==r.length||o.start!==i||o.end!==s)&&o.slice.every((u,d)=>u===r[i+d])}}return n.\u0275fac=function(t){return new(t||n)(de(HD,16))},n.\u0275pipe=xn({name:"paginate",type:n,pure:!1}),n})(),qJ=(()=>{class n{constructor(t,r){this.service=t,this.changeDetectorRef=r,this.maxSize=7,this.pageChange=new Fn,this.pageBoundsCorrection=new Fn,this.pages=[],this.changeSub=this.service.change.subscribe(i=>{this.id===i&&(this.updatePageLinks(),this.changeDetectorRef.markForCheck(),this.changeDetectorRef.detectChanges())})}ngOnInit(){void 0===this.id&&(this.id=this.service.defaultId()),this.updatePageLinks()}ngOnChanges(t){this.updatePageLinks()}ngOnDestroy(){this.changeSub.unsubscribe()}previous(){this.checkValidId(),this.setCurrent(this.getCurrent()-1)}next(){this.checkValidId(),this.setCurrent(this.getCurrent()+1)}isFirstPage(){return 1===this.getCurrent()}isLastPage(){return this.getLastPage()===this.getCurrent()}setCurrent(t){this.pageChange.emit(t)}getCurrent(){return this.service.getCurrentPage(this.id)}getLastPage(){let t=this.service.getInstance(this.id);return t.totalItems<1?1:Math.ceil(t.totalItems/t.itemsPerPage)}getTotalItems(){return this.service.getInstance(this.id).totalItems}checkValidId(){null==this.service.getInstance(this.id).id&&console.warn(`PaginationControlsDirective: the specified id "${this.id}" does not match any registered PaginationInstance`)}updatePageLinks(){let t=this.service.getInstance(this.id);const r=this.outOfBoundCorrection(t);r!==t.currentPage?setTimeout(()=>{this.pageBoundsCorrection.emit(r),this.pages=this.createPageArray(t.currentPage,t.itemsPerPage,t.totalItems,this.maxSize)}):this.pages=this.createPageArray(t.currentPage,t.itemsPerPage,t.totalItems,this.maxSize)}outOfBoundCorrection(t){const r=Math.ceil(t.totalItems/t.itemsPerPage);return r<t.currentPage&&0<r?r:t.currentPage<1?1:t.currentPage}createPageArray(t,r,i,s){s=+s;let o=[];const a=Math.max(Math.ceil(i/r),1),u=Math.ceil(s/2),d=t<=u,g=a-u<t,m=!d&&!g;let v=s<a,T=1;for(;T<=a&&T<=s;){let D,S=this.calculatePageNumber(T,t,s,a);D=v&&(2===T&&(m||g)||T===s-1&&(m||d))?"...":S,o.push({label:D,value:S}),T++}return o}calculatePageNumber(t,r,i,s){let o=Math.ceil(i/2);return t===i?s:1===t?t:i<s?s-o<r?s-i+t:o<r?r-o+t:t:t}}return n.\u0275fac=function(t){return new(t||n)(de(HD),de(Pw))},n.\u0275dir=qe({type:n,selectors:[["pagination-template"],["","pagination-template",""]],inputs:{id:"id",maxSize:"maxSize"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},exportAs:["paginationApi"],features:[ts]}),n})();function zD(n){return!!n&&"false"!==n}let GJ=(()=>{class n{constructor(){this.maxSize=7,this.previousLabel="Previous",this.nextLabel="Next",this.screenReaderPaginationLabel="Pagination",this.screenReaderPageLabel="page",this.screenReaderCurrentLabel="You're on page",this.pageChange=new Fn,this.pageBoundsCorrection=new Fn,this._directionLinks=!0,this._autoHide=!1,this._responsive=!1}get directionLinks(){return this._directionLinks}set directionLinks(t){this._directionLinks=zD(t)}get autoHide(){return this._autoHide}set autoHide(t){this._autoHide=zD(t)}get responsive(){return this._responsive}set responsive(t){this._responsive=zD(t)}trackByIndex(t){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ba({type:n,selectors:[["pagination-controls"]],inputs:{id:"id",maxSize:"maxSize",directionLinks:"directionLinks",autoHide:"autoHide",responsive:"responsive",previousLabel:"previousLabel",nextLabel:"nextLabel",screenReaderPaginationLabel:"screenReaderPaginationLabel",screenReaderPageLabel:"screenReaderPageLabel",screenReaderCurrentLabel:"screenReaderCurrentLabel"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},decls:4,vars:4,consts:[[3,"id","maxSize","pageChange","pageBoundsCorrection"],["p","paginationApi"],["role","navigation"],["class","ngx-pagination",3,"responsive",4,"ngIf"],[1,"ngx-pagination"],["class","pagination-previous",3,"disabled",4,"ngIf"],[1,"small-screen"],[3,"current","ellipsis",4,"ngFor","ngForOf","ngForTrackBy"],["class","pagination-next",3,"disabled",4,"ngIf"],[1,"pagination-previous"],["tabindex","0",3,"keyup.enter","click",4,"ngIf"],["aria-disabled","true",4,"ngIf"],["tabindex","0",3,"keyup.enter","click"],[1,"show-for-sr"],["aria-disabled","true"],[4,"ngIf"],["aria-live","polite"],[1,"pagination-next"]],template:function(t,r){if(1&t&&(Qe(0,"pagination-template",0,1),Tn("pageChange",function(s){return r.pageChange.emit(s)})("pageBoundsCorrection",function(s){return r.pageBoundsCorrection.emit(s)}),Qe(2,"nav",2),Xr(3,$J,6,8,"ul",3),pt()()),2&t){const i=as(1);Ot("id",r.id)("maxSize",r.maxSize),Ze(2),eo("aria-label",r.screenReaderPaginationLabel),Ze(1),Ot("ngIf",!(r.autoHide&&i.pages.length<=1))}},dependencies:[qJ,Kw,Ww,DN],styles:['.ngx-pagination{margin-left:0;margin-bottom:1rem}.ngx-pagination:before,.ngx-pagination:after{content:" ";display:table}.ngx-pagination:after{clear:both}.ngx-pagination li{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;margin-right:.0625rem;border-radius:0}.ngx-pagination li{display:inline-block}.ngx-pagination a,.ngx-pagination button{color:#0a0a0a;display:block;padding:.1875rem .625rem;border-radius:0}.ngx-pagination a:hover,.ngx-pagination button:hover{background:#e6e6e6}.ngx-pagination .current{padding:.1875rem .625rem;background:#2199e8;color:#fefefe;cursor:default}.ngx-pagination .disabled{padding:.1875rem .625rem;color:#cacaca;cursor:default}.ngx-pagination .disabled:hover{background:transparent}.ngx-pagination a,.ngx-pagination button{cursor:pointer}.ngx-pagination .pagination-previous a:before,.ngx-pagination .pagination-previous.disabled:before{content:"\\ab";display:inline-block;margin-right:.5rem}.ngx-pagination .pagination-next a:after,.ngx-pagination .pagination-next.disabled:after{content:"\\bb";display:inline-block;margin-left:.5rem}.ngx-pagination .show-for-sr{position:absolute!important;width:1px;height:1px;overflow:hidden;clip:rect(0,0,0,0)}.ngx-pagination .small-screen{display:none}@media screen and (max-width: 601px){.ngx-pagination.responsive .small-screen{display:inline-block}.ngx-pagination.responsive li:not(.small-screen):not(.pagination-previous):not(.pagination-next){display:none}}\n'],encapsulation:2,changeDetection:0}),n})(),WJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Wn({type:n}),n.\u0275inj=Gn({providers:[HD],imports:[[Zw]]}),n})(),KJ=(()=>{class n{ngOnInit(){this.previousValue=this.value}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ba({type:n,selectors:[["app-countdown-timer-card"]],inputs:{value:"value",label:"label"},decls:15,vars:6,consts:[[1,"card"],[1,"card-half","top"],[1,"content"],[1,"card-half","bottom"],[1,"card-half","top","flip"],[1,"card-half","bottom","flip"],[1,"label"]],template:function(r,i){1&r&&(Qe(0,"div",0),Tn("@flip.done",function(){return i.previousValue=i.value}),Qe(1,"div",1)(2,"div",2),Ut(3),pt()(),Qe(4,"div",3)(5,"div",2),Ut(6),pt()(),Qe(7,"div",4)(8,"div",2),Ut(9),pt()(),Qe(10,"div",5)(11,"div",2),Ut(12),pt()()(),Qe(13,"div",6),Ut(14),pt()),2&r&&(Ot("@flip",i.previousValue!=i.value),Ze(3),us(i.value),Ze(3),us(i.previousValue),Ze(3),us(i.previousValue),Ze(3),us(i.value),Ze(2),ls(" ",i.label,"\n"))},styles:['[_nghost-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;gap:1.5rem}.card[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:100%;aspect-ratio:1/1;background-color:#343650;font-size:6rem;border-radius:.5rem;perspective:500px;transform-style:preserve-3d;color:#fb6087;box-shadow:0 .7rem #191a24}@media screen and (max-width: 45rem){.card[_ngcontent-%COMP%]{font-size:2rem;perspective:100px}}.card[_ngcontent-%COMP%]:before{content:"";position:absolute;width:5%;aspect-ratio:1/1;background-color:#191a24;border-radius:0 100% 0 0;bottom:50%;left:0;z-index:2}.card[_ngcontent-%COMP%]:after{content:"";position:absolute;width:5%;aspect-ratio:1/1;background-color:#191a24;border-radius:100% 0 0;bottom:50%;right:0;z-index:2}.card[_ngcontent-%COMP%]   .card-half[_ngcontent-%COMP%]{position:absolute;left:0;width:100%;height:50%;overflow:hidden;backface-visibility:hidden}.card[_ngcontent-%COMP%]   .card-half.bottom[_ngcontent-%COMP%]{bottom:0;background-color:#343650;border-bottom-left-radius:inherit;border-bottom-right-radius:inherit;transform-origin:top;z-index:2;box-shadow:0 -1px 2px #191a24}.card[_ngcontent-%COMP%]   .card-half.bottom.flip[_ngcontent-%COMP%]{rotate:x 180deg;z-index:2}.card[_ngcontent-%COMP%]   .card-half.bottom[_ngcontent-%COMP%]:before{content:"";position:absolute;width:5%;aspect-ratio:1/1;background-color:#191a24;border-radius:0 0 100%;top:0;left:0;z-index:2}.card[_ngcontent-%COMP%]   .card-half.bottom[_ngcontent-%COMP%]:after{content:"";position:absolute;width:5%;aspect-ratio:1/1;background-color:#191a24;border-radius:0 0 0 100%;top:0;right:0;z-index:2}.card[_ngcontent-%COMP%]   .card-half.bottom[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{position:absolute;inset:-100% 0 0;display:flex;align-items:center;justify-content:center;color:#fb517b}.card[_ngcontent-%COMP%]   .card-half.top[_ngcontent-%COMP%]{top:0;background-color:#343650;border-top-left-radius:inherit;border-top-right-radius:inherit;transform-origin:bottom;z-index:1}.card[_ngcontent-%COMP%]   .card-half.top[_ngcontent-%COMP%]:before{content:"";position:absolute;width:5%;aspect-ratio:1/1;background-color:#191a24;border-radius:0 100% 0 0;bottom:0;left:0;z-index:2}.card[_ngcontent-%COMP%]   .card-half.top[_ngcontent-%COMP%]:after{content:"";position:absolute;width:5%;aspect-ratio:1/1;background-color:#191a24;border-radius:100% 0 0;bottom:0;right:0;z-index:2}.card[_ngcontent-%COMP%]   .card-half.top[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{position:absolute;inset:0 0 -100%;display:flex;align-items:center;justify-content:center}.label[_ngcontent-%COMP%]{color:#8486a9;text-transform:uppercase;letter-spacing:.3rem}@media screen and (max-width: 45rem){.label[_ngcontent-%COMP%]{font-size:.3rem}}'],data:{animation:[pW("flip",[mW("* => 1",[_W(".flip",[gW("300ms linear",dT({transform:"rotateX(-180deg)"}))])])])]}})}}return n})(),QJ=(()=>{class n{constructor(){this.launchDate=new Date(2025,0,31,0,0,0),this.subscription=new ee}ngOnInit(){this.updateValues(),this.subscription=iO(1e3).subscribe(t=>this.updateValues())}updateValues(){let t=new Date,r=(this.launchDate.getTime()-t.getTime())/1e3;r=Math.max(0,r),this.days=Math.floor(r/86400),r-=86400*this.days,this.hours=Math.floor(r/3600)%24,r-=3600*this.hours,this.minutes=Math.floor(r/60)%60,r-=60*this.minutes,this.seconds=Math.floor(r%60)}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ba({type:n,selectors:[["app-countdown-timer"]],inputs:{launchDate:"launchDate"},decls:4,vars:4,consts:[["label","days",3,"value"],["label","hours",3,"value"],["label","minutes",3,"value"],["label","and seconds",3,"value"]],template:function(r,i){1&r&&to(0,"app-countdown-timer-card",0)(1,"app-countdown-timer-card",1)(2,"app-countdown-timer-card",2)(3,"app-countdown-timer-card",3),2&r&&(Ot("value",i.days),Ze(1),Ot("value",i.hours),Ze(1),Ot("value",i.minutes),Ze(1),Ot("value",i.seconds))},dependencies:[KJ],styles:["[_nghost-%COMP%]{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:1rem;min-width:50%}"]})}}return n})(),YJ=(()=>{class n{constructor(t,r){this.http=t,this.sanitazer=r}ngOnChanges(t){this.src?this.http.get(this.src,{responseType:"text"}).subscribe(r=>{this.svg=this.sanitazer.bypassSecurityTrustHtml(r)}):this.svg=""}static{this.\u0275fac=function(r){return new(r||n)(de(Bx),de(KN))}}static{this.\u0275cmp=ba({type:n,selectors:[["app-svg-icon"]],inputs:{src:"src"},features:[ts],decls:1,vars:1,consts:[[3,"innerHTML"]],template:function(r,i){1&r&&to(0,"span",0),2&r&&Ot("innerHTML",i.svg,BC)}})}}return n})();const JJ=["textarea"];function XJ(n,e){if(1&n){const t=nl();Qe(0,"button",15),Tn("click",function(){return Er(t),Ir(Ct(2).toggleModal())}),Ut(1," View Comment "),pt()}}function ZJ(n,e){if(1&n){const t=nl();Qe(0,"form",8),Tn("submit",function(){return Er(t),Ir(Ct().submitmessage())}),Qe(1,"div",9),to(2,"input",10),Qe(3,"textarea",11,12),Tn("ngModelChange",function(i){return Er(t),Ir(Ct().messageForm.value.message=i)})("input",function(){return Er(t),Ir(Ct().onInput())}),pt(),Qe(5,"button",13),Ut(6," Send "),pt(),Xr(7,XJ,2,0,"button",14),pt()()}if(2&n){const t=Ct();Ot("formGroup",t.messageForm),Ze(3),i_("height",t.height+"px"),Ot("ngModel",t.messageForm.value.message),Ze(2),Ot("disabled",!t.allowedsubmit),Ze(2),Ot("ngIf",t.showmodalbutton)}}function eX(n,e){if(1&n&&(Qe(0,"div",20)(1,"p",21),Ut(2),pt(),Qe(3,"p",22),Ut(4),pt()()),2&n){const t=e.$implicit;Ze(2),ls(" ",null!=t&&t.from?t.from:"Anonymous"," "),Ze(2),ls(" ",t.message," ")}}const tX=function(n,e,t){return{itemsPerPage:n,currentPage:e,totalItems:t}};function nX(n,e){if(1&n){const t=nl();Qe(0,"div",16)(1,"button",17),Tn("click",function(){return Er(t),Ir(Ct().toggleModal())}),Ut(2," Close Comment "),pt(),Xr(3,eX,5,2,"div",18),c_(4,"paginate"),Qe(5,"pagination-controls",19),Tn("pageChange",function(i){return Er(t),Ir(Ct().p=i)}),pt(),Qe(6,"form",8),Tn("submit",function(){return Er(t),Ir(Ct().submitmessage())}),Qe(7,"div",9),to(8,"input",10),Qe(9,"textarea",11,12),Tn("ngModelChange",function(i){return Er(t),Ir(Ct().messageForm.value.message=i)})("input",function(){return Er(t),Ir(Ct().onInput())}),pt(),Qe(11,"button",13),Ut(12," Send "),pt()()()()}if(2&n){const t=Ct();Ze(3),Ot("ngForOf",d_(4,6,t.allcomments,HR(9,tX,t.pagesize,t.p,t.allcomments.length))),Ze(3),Ot("formGroup",t.messageForm),Ze(3),i_("height",t.height+"px"),Ot("ngModel",t.messageForm.value.message),Ze(2),Ot("disabled",!t.allowedsubmit)}}let rX=(()=>{class n{constructor(t){this.fs=t,this.title="launch-countdown-timer-app",this.name="Angular",this.paused=!1,this.targetdate=new Date(2025,0,31,0,0,0),this.allowedsubmit=!1,this.messageForm=new ay({from:new hy(""),message:new hy("",Z6.required)}),this.showModal=!1,this.showmodalbutton=!1,this.allcomments=[],this.p=1,this.pagesize=5,this.height=40}toggleModal(){this.showModal=!this.showModal,this.toggle()}loadComments(){this.fs.collection("Marco Angelo Montenegro").snapshotChanges().pipe().subscribe(t=>{t.forEach(r=>{let i=r.payload.doc.data();i.id=r.payload.doc.id,this.allcomments.find(o=>o.id===i.id)||this.allcomments.push(i)})})}ngOnInit(){this.shoot(),this.pausable=iO(3e3).pipe(function o8(){return function(e){var t=s8.prototype,r=new nr(!1),i=r.pipe(wn(function(o){return o?sO:e.pipe(function X5(){return function(e){return e.lift(new Z5)}}())}),function t8(){return function(e){return e.lift(new n8)}}());return Object.create(i,{pause:{value:t.pause},resume:{value:t.resume},pauser:{value:r}})}}()),this.pausable.subscribe(()=>this.shoot()),this.messageForm.controls.message.valueChanges.pipe().subscribe(t=>{this.allowedsubmit=!!t}),this.loadComments(),setTimeout(()=>{let t=new Date;this.showmodalbutton=(this.targetdate.getTime()-t.getTime())/1e3<=0},1e3)}toggle(){this.paused?this.pausable.resume():this.pausable.pause(),this.paused=!this.paused}shoot(){try{this.confetti({angle:this.random(60,120),spread:this.random(10,50),particleCount:this.random(40,50),origin:{y:.6}})}catch(t){console.warn("Confetti.js may not be loaded yet",t)}}random(t,r){return Math.random()*(r-t)+t}confetti(t){typeof window<"u"&&window.confetti&&window.confetti(t)}submitmessage(){this.messageForm.valid&&this.fs.collection("Marco Angelo Montenegro").add(this.messageForm.value).then(()=>{}).finally(()=>{this.messageForm.reset(),this.messageForm.updateValueAndValidity()})}adjustHeight(){if(this.textarea){const t=this.textarea.nativeElement;t.style.height="auto",t.style.height=`${t.scrollHeight}px`}}onInput(){this.adjustHeight()}ngAfterViewInit(){this.adjustHeight()}static{this.\u0275fac=function(r){return new(r||n)(de(ML))}}static{this.\u0275cmp=ba({type:n,selectors:[["app-root"]],viewQuery:function(r,i){if(1&r&&aM(JJ,5),2&r){let s;oM(s=function uM(){return function I4(n,e){return n[Oi].queries[e].queryList}(oe(),zg())}())&&(i.textarea=s.first)}},decls:15,vars:2,consts:[[2,"margin-left","10px","margin-right","10px","margin-bottom","10px","padding","10px","background-color","white","opacity","0.5","color","black","border-radius","10px"],["src","../assets/images/2.png","alt","",2,"position","relative","padding","0","margin-bottom","2px"],[3,"formGroup","submit",4,"ngIf"],["class","view-comment-modal",4,"ngIf"],["target","_blank","href","https://www.facebook.com/marco.a.montenegro.5"],["src","../assets/images/icon-facebook.svg"],["target","_blank","href","https://www.instagram.com/marcoangelomontenegro?igsh=NjA2MnM3NGE2N2kw"],["src","../assets/images/icon-instagram.svg"],[3,"formGroup","submit"],[1,"container"],["formControlName","from","placeholder","Type your name here.(Optional)","type","text",2,"font-weight","normal !important","font-family","Arial, Helvetica, sans-serif !important","padding","5px","width","100%","margin-bottom","10px","background-color","#2f2439","padding","10px","border-radius","8px","border","1px solid #ccc","color","white"],["formControlName","message","placeholder","Write a comment...",2,"font-weight","normal !important","font-family","Arial, Helvetica, sans-serif !important",3,"ngModel","ngModelChange","input"],["textarea",""],["type","submit",2,"padding-left","10px","padding-right","10px",3,"disabled"],["type","button",3,"click",4,"ngIf"],["type","button",3,"click"],[1,"view-comment-modal"],[2,"margin-bottom","10px",3,"click"],["class","modal-content",4,"ngFor","ngForOf"],[2,"font-family","Arial, Helvetica, sans-serif !important","margin-bottom","5px","font-weight","normal","color","white",3,"pageChange"],[1,"modal-content"],[2,"font-size","10px","font-family","Arial, Helvetica, sans-serif !important","margin-bottom","5px","font-weight","bold"],[2,"font-size","12px","font-weight","normal !important","font-family","Arial, Helvetica, sans-serif !important"]],template:function(r,i){1&r&&(Qe(0,"header",0),Ut(1," FOR RESIGNATION "),to(2,"br"),Ut(3," MARCO ANGELO V. MONTENEGRO\n"),pt(),to(4,"img",1)(5,"app-countdown-timer"),Xr(6,ZJ,8,6,"form",2),Xr(7,nX,13,13,"div",3),Qe(8,"footer")(9,"h5"),Ut(10,"You can still find me at"),pt(),Qe(11,"a",4),to(12,"app-svg-icon",5),pt(),Qe(13,"a",6),to(14,"app-svg-icon",7),pt()()),2&r&&(Ze(6),Ot("ngIf",!i.showModal),Ze(1),Ot("ngIf",i.showModal))},dependencies:[Ww,Kw,F1,ty,w1,T1,fy,nb,GJ,QJ,YJ,zJ],styles:["[_nghost-%COMP%]{display:flex;height:100%;flex-direction:column;align-items:center;padding:.5rem;background:url(pattern-hills.1f36e895a09d14a9.svg) bottom no-repeat,url(bg-stars.9e613d73b4a0f12f.svg) no-repeat,hsl(180,4%,5%);background-size:contain}@media screen and (max-width: 45rem){[_nghost-%COMP%]{background-size:300%;background-position:bottom 0 right 5px}}header[_ngcontent-%COMP%]{font-size:1.5rem;letter-spacing:.5rem;color:#fb6087;text-align:center}@media screen and (min-width: 15rem){header[_ngcontent-%COMP%]{font-size:1rem}}footer[_ngcontent-%COMP%]{color:#fff;display:flex;align-items:center;gap:2rem}app-svg-icon[_ngcontent-%COMP%]{fill:#8486a9}app-svg-icon[_ngcontent-%COMP%]:hover{cursor:pointer;fill:#fb6087}.container[_ngcontent-%COMP%]{position:relative;border-radius:4px;color:#fff;margin-top:20px;width:100%;padding:10px}textarea[_ngcontent-%COMP%]:focus{outline:none}.icon[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:10px}.comment-box[_ngcontent-%COMP%]{max-width:500px;margin:20px}textarea[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#352a3f;font-size:16px;border:none;resize:none;min-height:40px;box-sizing:border-box;overflow:hidden;white-space:pre-wrap;word-wrap:break-word;color:#fff!important}textarea[_ngcontent-%COMP%]:focus{border-color:#3b5998}button[_ngcontent-%COMP%]{padding:10px 20px;font-size:16px;background-color:#3b5998;color:#fff;border:none;border-radius:5px;cursor:pointer;margin-top:20px;margin-right:5px}button[_ngcontent-%COMP%]:hover{background-color:#2d4373}button[_ngcontent-%COMP%]:disabled{background-color:#172038;cursor:not-allowed}.view-comment-modal[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;width:100%;padding-left:20%;padding-right:20%;height:80vh;background-color:#2f2439;box-sizing:border-box;overflow-y:auto;z-index:1000;display:flex;flex-direction:column;justify-content:flex-start}@media screen and (max-width: 45rem){.view-comment-modal[_ngcontent-%COMP%]{padding:5px}}.modal-content[_ngcontent-%COMP%]{padding:10px;background-color:#322b3a;border-radius:8px;margin-bottom:5px;color:#afafaf}.view-comment-modal[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:20px;background-color:#e94e77}.view-comment-modal[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#d04264}.view-comment-modal[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:10px}"]})}}return n})();const NL_firebaseConfig={apiKey:"AIzaSyDjMHZ0maSW3NFcd6-miuoNbOZI3rw3LFw",authDomain:"qrcode-event-system-7bf01.firebaseapp.com",projectId:"qrcode-event-system-7bf01",storageBucket:"qrcode-event-system-7bf01.firebasestorage.app",messagingSenderId:"532643568010",appId:"1:532643568010:web:be99c24059dd9821f85073",measurementId:"G-Q41YKGJSYX"};class Bp{constructor(e){return e}}class xL{constructor(){return(0,ii.getApps)()}}const qD=new Ie("angularfire2._apps"),sX={provide:Bp,useFactory:function iX(n){return n&&1===n.length?n[0]:new Bp((0,ii.getApp)())},deps:[[new is,qD]]},oX={provide:xL,deps:[[new is,qD]]};function aX(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Bp(r)}}let uX=(()=>{class n{constructor(t){(0,ii.registerVersion)("angularfire",ld.full,"core"),(0,ii.registerVersion)("angularfire",ld.full,"app"),(0,ii.registerVersion)("angular",wI.full,t.toString())}static \u0275fac=function(r){return new(r||n)(fe(Ss))};static \u0275mod=Wn({type:n});static \u0275inj=Gn({providers:[sX,oX]})}return n})();function lX(n,...e){return{ngModule:uX,providers:[{provide:qD,useFactory:aX(n),multi:!0,deps:[Nt,yi,_y,...e]}]}}const cX=hO(ii.initializeApp,!0);$e(700);class kL{constructor(){return cb("auth")}}class KD{constructor(e){return e}}const FL="firestore",QD=new Ie("angularfire2.firestore-instances");function mX(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new KD(r)}}const _X={provide:class pX{constructor(){return cb(FL)}},deps:[[new is,QD]]},yX={provide:KD,useFactory:function gX(n,e){const t=function cO(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}(FL,n,e);return t&&new KD(t)},deps:[[new is,QD],Bp]};let vX=(()=>{class n{constructor(){(0,ii.registerVersion)("angularfire",ld.full,"fst")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Wn({type:n});static \u0275inj=Gn({providers:[yX,_X]})}return n})();function EX(n,...e){return{ngModule:vX,providers:[{provide:QD,useFactory:mX(n),multi:!0,deps:[Nt,yi,_y,xL,[new is,kL],[new is,db],...e]}]}}const IX=hO(yY,!0);let wX=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Wn({type:n,bootstrap:[rX]})}static{this.\u0275inj=Gn({imports:[qN,h6,j6,O8.initializeApp(NL_firebaseConfig),NJ,z5,H5,Zw,WJ,lX(()=>cX(NL_firebaseConfig)),EX(()=>IX())]})}}return n})();sW().bootstrapModule(wX).catch(n=>console.error(n))},574:(_s,gr,$e)=>{$e.d(gr,{A:()=>jn});var P=$e(401),ye=$e(779),N=$e(979),Pe=$e(398);class En{constructor(et,We){this._delegate=et,this.firebase=We,(0,N._addComponent)(et,new ye.uA("app-compat",()=>this,"PUBLIC")),this.container=et.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(et){this._delegate.automaticDataCollectionEnabled=et}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(et=>{this._delegate.checkDestroyed(),et()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(et,We=N._DEFAULT_ENTRY_NAME){var $n;this._delegate.checkDestroyed();const Xn=this._delegate.container.getProvider(et);return!Xn.isInitialized()&&"EXPLICIT"===(null===($n=Xn.getComponent())||void 0===$n?void 0:$n.instantiationMode)&&Xn.initialize(),Xn.getImmediate({identifier:We})}_removeServiceInstance(et,We=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(et).clearInstance(We)}_addComponent(et){(0,N._addComponent)(this._delegate,et)}_addOrOverwriteComponent(et){(0,N._addOrOverwriteComponent)(this._delegate,et)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Qt=new P.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ee=function wt(){const bt=function Ft(bt){const et={},We={__esModule:!0,initializeApp:function Hn(Ye,Mn={}){const tn=N.initializeApp(Ye,Mn);if((0,P.gR)(et,tn.name))return et[tn.name];const Nn=new bt(tn,We);return et[tn.name]=Nn,Nn},app:Xn,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function bi(Ye){const Mn=Ye.name,tn=Mn.replace("-compat","");if(N._registerComponent(Ye)&&"PUBLIC"===Ye.type){const Nn=(mr=Xn())=>{if("function"!=typeof mr[tn])throw Qt.create("invalid-app-argument",{appName:Mn});return mr[tn]()};void 0!==Ye.serviceProps&&(0,P.zw)(Nn,Ye.serviceProps),We[tn]=Nn,bt.prototype[tn]=function(...mr){return this._getService.bind(this,Mn).apply(this,Ye.multipleInstances?mr:[])}}return"PUBLIC"===Ye.type?We[tn]:null},removeApp:function $n(Ye){delete et[Ye]},useAsService:function yo(Ye,Mn){return"serverAuth"===Mn?null:Mn},modularAPIs:N}};function Xn(Ye){if(!(0,P.gR)(et,Ye=Ye||N._DEFAULT_ENTRY_NAME))throw Qt.create("no-app",{appName:Ye});return et[Ye]}return We.default=We,Object.defineProperty(We,"apps",{get:function rt(){return Object.keys(et).map(Ye=>et[Ye])}}),Xn.App=bt,We}(En);return bt.INTERNAL=Object.assign(Object.assign({},bt.INTERNAL),{createFirebaseNamespace:wt,extendNamespace:function et(We){(0,P.zw)(bt,We)},createSubscribe:P.tD,ErrorFactory:P.FA,deepExtend:P.zw}),bt}(),ce=new Pe.Vy("@firebase/app-compat");try{const bt=(0,P.mS)();if(void 0!==bt.firebase){ce.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const et=bt.firebase.SDK_VERSION;et&&et.indexOf("LITE")>=0&&ce.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const jn=ee;!function xe(bt){(0,N.registerVersion)("@firebase/app-compat","0.2.43",bt)}()},979:(_s,gr,$e)=>{$e.r(gr),$e.d(gr,{FirebaseError:()=>Pe.g,SDK_VERSION:()=>wn,_DEFAULT_ENTRY_NAME:()=>le,_addComponent:()=>Si,_addOrOverwriteComponent:()=>Ao,_apps:()=>Yt,_clearComponents:()=>Ls,_components:()=>Tt,_getProvider:()=>Pi,_isFirebaseApp:()=>In,_isFirebaseServerApp:()=>Do,_registerComponent:()=>di,_removeServiceInstance:()=>hi,_serverApps:()=>nr,deleteApp:()=>Us,getApp:()=>Bs,getApps:()=>Ea,initializeApp:()=>yr,initializeServerApp:()=>Ri,onLog:()=>I,registerVersion:()=>A,setLogLevel:()=>b});var P=$e(467),ye=$e(779),N=$e(398),Pe=$e(401);const En=(J,$)=>$.some(ie=>J instanceof ie);let hn,Qt;const ee=new WeakMap,ce=new WeakMap,Re=new WeakMap,ot=new WeakMap,xe=new WeakMap;let et={get(J,$,ie){if(J instanceof IDBTransaction){if("done"===$)return ce.get(J);if("objectStoreNames"===$)return J.objectStoreNames||Re.get(J);if("store"===$)return ie.objectStoreNames[1]?void 0:ie.objectStore(ie.objectStoreNames[0])}return Hn(J[$])},set:(J,$,ie)=>(J[$]=ie,!0),has:(J,$)=>J instanceof IDBTransaction&&("done"===$||"store"===$)||$ in J};function Xn(J){return"function"==typeof J?function $n(J){return J!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function wt(){return Qt||(Qt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(J)?function(...$){return J.apply(rt(this),$),Hn(ee.get(this))}:function(...$){return Hn(J.apply(rt(this),$))}:function($,...ie){const ve=J.call(rt(this),$,...ie);return Re.set(ve,$.sort?$.sort():[$]),Hn(ve)}}(J):(J instanceof IDBTransaction&&function bt(J){if(ce.has(J))return;const $=new Promise((ie,ve)=>{const Le=()=>{J.removeEventListener("complete",ze),J.removeEventListener("error",it),J.removeEventListener("abort",it)},ze=()=>{ie(),Le()},it=()=>{ve(J.error||new DOMException("AbortError","AbortError")),Le()};J.addEventListener("complete",ze),J.addEventListener("error",it),J.addEventListener("abort",it)});ce.set(J,$)}(J),En(J,function Ft(){return hn||(hn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(J,et):J)}function Hn(J){if(J instanceof IDBRequest)return function jn(J){const $=new Promise((ie,ve)=>{const Le=()=>{J.removeEventListener("success",ze),J.removeEventListener("error",it)},ze=()=>{ie(Hn(J.result)),Le()},it=()=>{ve(J.error),Le()};J.addEventListener("success",ze),J.addEventListener("error",it)});return $.then(ie=>{ie instanceof IDBCursor&&ee.set(ie,J)}).catch(()=>{}),xe.set($,J),$}(J);if(ot.has(J))return ot.get(J);const $=Xn(J);return $!==J&&(ot.set(J,$),xe.set($,J)),$}const rt=J=>xe.get(J),Ye=["get","getKey","getAll","getAllKeys","count"],Mn=["put","add","delete","clear"],tn=new Map;function Nn(J,$){if(!(J instanceof IDBDatabase)||$ in J||"string"!=typeof $)return;if(tn.get($))return tn.get($);const ie=$.replace(/FromIndex$/,""),ve=$!==ie,Le=Mn.includes(ie);if(!(ie in(ve?IDBIndex:IDBObjectStore).prototype)||!Le&&!Ye.includes(ie))return;const ze=function(){var it=(0,P.A)(function*($t,...Jt){const Gr=this.transaction($t,Le?"readwrite":"readonly");let qn=Gr.store;return ve&&(qn=qn.index(Jt.shift())),(yield Promise.all([qn[ie](...Jt),Le&&Gr.done]))[0]});return function(Jt){return it.apply(this,arguments)}}();return tn.set($,ze),ze}!function We(J){et=J(et)}(J=>({...J,get:($,ie,ve)=>Nn($,ie)||J.get($,ie,ve),has:($,ie)=>!!Nn($,ie)||J.has($,ie)}));class mr{constructor($){this.container=$}getPlatformInfoString(){return this.container.getProviders().map(ie=>{if(function li(J){const $=J.getComponent();return"VERSION"===$?.type}(ie)){const ve=ie.getImmediate();return`${ve.library}/${ve.version}`}return null}).filter(ie=>ie).join(" ")}}const At="@firebase/app",ys="0.10.13",Zn=new N.Vy("@firebase/app"),le="[DEFAULT]",tr={[At]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Yt=new Map,nr=new Map,Tt=new Map;function Si(J,$){try{J.container.addComponent($)}catch(ie){Zn.debug(`Component ${$.name} failed to register with FirebaseApp ${J.name}`,ie)}}function Ao(J,$){J.container.addOrOverwriteComponent($)}function di(J){const $=J.name;if(Tt.has($))return Zn.debug(`There were multiple attempts to register component ${$}.`),!1;Tt.set($,J);for(const ie of Yt.values())Si(ie,J);for(const ie of nr.values())Si(ie,J);return!0}function Pi(J,$){const ie=J.container.getProvider("heartbeat").getImmediate({optional:!0});return ie&&ie.triggerHeartbeat(),J.container.getProvider($)}function hi(J,$,ie=le){Pi(J,$).clearInstance(ie)}function In(J){return void 0!==J.options}function Do(J){return void 0!==J.settings}function Ls(){Tt.clear()}const Be=new Pe.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class qr{constructor($,ie,ve){this._isDeleted=!1,this._options=Object.assign({},$),this._config=Object.assign({},ie),this._name=ie.name,this._automaticDataCollectionEnabled=ie.automaticDataCollectionEnabled,this._container=ve,this.container.addComponent(new ye.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled($){this.checkDestroyed(),this._automaticDataCollectionEnabled=$}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted($){this._isDeleted=$}checkDestroyed(){if(this.isDeleted)throw Be.create("app-deleted",{appName:this._name})}}class Qi extends qr{constructor($,ie,ve,Le){const ze=void 0!==ie.automaticDataCollectionEnabled&&ie.automaticDataCollectionEnabled,it={name:ve,automaticDataCollectionEnabled:ze};super(void 0!==$.apiKey?$:$.options,it,Le),this._serverConfig=Object.assign({automaticDataCollectionEnabled:ze},ie),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,ie.releaseOnDeref=void 0,A(At,ys,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount($){this.isDeleted||(this._refCount++,void 0!==$&&null!==this._finalizationRegistry&&this._finalizationRegistry.register($,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Us(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Be.create("server-app-deleted")}}const wn="10.14.1";function yr(J,$={}){let ie=J;"object"!=typeof $&&($={name:$});const ve=Object.assign({name:le,automaticDataCollectionEnabled:!1},$),Le=ve.name;if("string"!=typeof Le||!Le)throw Be.create("bad-app-name",{appName:String(Le)});if(ie||(ie=(0,Pe.T9)()),!ie)throw Be.create("no-options");const ze=Yt.get(Le);if(ze){if((0,Pe.bD)(ie,ze.options)&&(0,Pe.bD)(ve,ze.config))return ze;throw Be.create("duplicate-app",{appName:Le})}const it=new ye.h1(Le);for(const Jt of Tt.values())it.addComponent(Jt);const $t=new qr(ie,ve,it);return Yt.set(Le,$t),$t}function Ri(J,$){if((0,Pe.Bd)()&&!(0,Pe.p7)())throw Be.create("invalid-server-app-environment");let ie;void 0===$.automaticDataCollectionEnabled&&($.automaticDataCollectionEnabled=!1),ie=In(J)?J.options:J;const ve=Object.assign(Object.assign({},$),ie);if(void 0!==ve.releaseOnDeref&&delete ve.releaseOnDeref,void 0!==$.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Be.create("finalization-registry-not-supported",{});const ze=""+(Gr=JSON.stringify(ve),[...Gr].reduce((qn,Ve)=>Math.imul(31,qn)+Ve.charCodeAt(0)|0,0)),it=nr.get(ze);var Gr;if(it)return it.incRefCount($.releaseOnDeref),it;const $t=new ye.h1(ze);for(const Gr of Tt.values())$t.addComponent(Gr);const Jt=new Qi(ie,$,ze,$t);return nr.set(ze,Jt),Jt}function Bs(J=le){const $=Yt.get(J);if(!$&&J===le&&(0,Pe.T9)())return yr();if(!$)throw Be.create("no-app",{appName:J});return $}function Ea(){return Array.from(Yt.values())}function Us(J){return tt.apply(this,arguments)}function tt(){return(tt=(0,P.A)(function*(J){let $=!1;const ie=J.name;Yt.has(ie)?($=!0,Yt.delete(ie)):nr.has(ie)&&J.decRefCount()<=0&&(nr.delete(ie),$=!0),$&&(yield Promise.all(J.container.getProviders().map(ve=>ve.delete())),J.isDeleted=!0)})).apply(this,arguments)}function A(J,$,ie){var ve;let Le=null!==(ve=tr[J])&&void 0!==ve?ve:J;ie&&(Le+=`-${ie}`);const ze=Le.match(/\s|\//),it=$.match(/\s|\//);if(ze||it){const $t=[`Unable to register library "${Le}" with version "${$}":`];return ze&&$t.push(`library name "${Le}" contains illegal characters (whitespace or "/")`),ze&&it&&$t.push("and"),it&&$t.push(`version name "${$}" contains illegal characters (whitespace or "/")`),void Zn.warn($t.join(" "))}di(new ye.uA(`${Le}-version`,()=>({library:Le,version:$}),"VERSION"))}function I(J,$){if(null!==J&&"function"!=typeof J)throw Be.create("invalid-log-argument");(0,N.Ey)(J,$)}function b(J){(0,N.He)(J)}const k="firebase-heartbeat-database",O=1,Q="firebase-heartbeat-store";let ge=null;function Oe(){return ge||(ge=function bi(J,$,{blocked:ie,upgrade:ve,blocking:Le,terminated:ze}={}){const it=indexedDB.open(J,$),$t=Hn(it);return ve&&it.addEventListener("upgradeneeded",Jt=>{ve(Hn(it.result),Jt.oldVersion,Jt.newVersion,Hn(it.transaction),Jt)}),ie&&it.addEventListener("blocked",Jt=>ie(Jt.oldVersion,Jt.newVersion,Jt)),$t.then(Jt=>{ze&&Jt.addEventListener("close",()=>ze()),Le&&Jt.addEventListener("versionchange",Gr=>Le(Gr.oldVersion,Gr.newVersion,Gr))}).catch(()=>{}),$t}(k,O,{upgrade:(J,$)=>{if(0===$)try{J.createObjectStore(Q)}catch(ie){console.warn(ie)}}}).catch(J=>{throw Be.create("idb-open",{originalErrorMessage:J.message})})),ge}function Et(){return(Et=(0,P.A)(function*(J){try{const ie=(yield Oe()).transaction(Q),ve=yield ie.objectStore(Q).get(Ae(J));return yield ie.done,ve}catch($){if($ instanceof Pe.g)Zn.warn($.message);else{const ie=Be.create("idb-get",{originalErrorMessage:$?.message});Zn.warn(ie.message)}}})).apply(this,arguments)}function Y(J,$){return be.apply(this,arguments)}function be(){return(be=(0,P.A)(function*(J,$){try{const ve=(yield Oe()).transaction(Q,"readwrite");yield ve.objectStore(Q).put($,Ae(J)),yield ve.done}catch(ie){if(ie instanceof Pe.g)Zn.warn(ie.message);else{const ve=Be.create("idb-set",{originalErrorMessage:ie?.message});Zn.warn(ve.message)}}})).apply(this,arguments)}function Ae(J){return`${J.name}!${J.options.appId}`}class eg{constructor($){this.container=$,this._heartbeatsCache=null;const ie=this.container.getProvider("app").getImmediate();this._storage=new zn(ie),this._heartbeatsCachePromise=this._storage.read().then(ve=>(this._heartbeatsCache=ve,ve))}triggerHeartbeat(){var $=this;return(0,P.A)(function*(){var ie,ve;try{const ze=$.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),it=Ia();return null==(null===(ie=$._heartbeatsCache)||void 0===ie?void 0:ie.heartbeats)&&($._heartbeatsCache=yield $._heartbeatsCachePromise,null==(null===(ve=$._heartbeatsCache)||void 0===ve?void 0:ve.heartbeats))||$._heartbeatsCache.lastSentHeartbeatDate===it||$._heartbeatsCache.heartbeats.some($t=>$t.date===it)?void 0:($._heartbeatsCache.heartbeats.push({date:it,agent:ze}),$._heartbeatsCache.heartbeats=$._heartbeatsCache.heartbeats.filter($t=>{const Jt=new Date($t.date).valueOf();return Date.now()-Jt<=2592e6}),$._storage.overwrite($._heartbeatsCache))}catch(Le){Zn.warn(Le)}})()}getHeartbeatsHeader(){var $=this;return(0,P.A)(function*(){var ie;try{if(null===$._heartbeatsCache&&(yield $._heartbeatsCachePromise),null==(null===(ie=$._heartbeatsCache)||void 0===ie?void 0:ie.heartbeats)||0===$._heartbeatsCache.heartbeats.length)return"";const ve=Ia(),{heartbeatsToSend:Le,unsentEntries:ze}=function Co(J,$=1024){const ie=[];let ve=J.slice();for(const Le of J){const ze=ie.find(it=>it.agent===Le.agent);if(ze){if(ze.dates.push(Le.date),$l(ie)>$){ze.dates.pop();break}}else if(ie.push({agent:Le.agent,dates:[Le.date]}),$l(ie)>$){ie.pop();break}ve=ve.slice(1)}return{heartbeatsToSend:ie,unsentEntries:ve}}($._heartbeatsCache.heartbeats),it=(0,Pe.Uj)(JSON.stringify({version:2,heartbeats:Le}));return $._heartbeatsCache.lastSentHeartbeatDate=ve,ze.length>0?($._heartbeatsCache.heartbeats=ze,yield $._storage.overwrite($._heartbeatsCache)):($._heartbeatsCache.heartbeats=[],$._storage.overwrite($._heartbeatsCache)),it}catch(ve){return Zn.warn(ve),""}})()}}function Ia(){return(new Date).toISOString().substring(0,10)}class zn{constructor($){this.app=$,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,P.A)(function*(){return!!(0,Pe.zW)()&&(0,Pe.eX)().then(()=>!0).catch(()=>!1)})()}read(){var $=this;return(0,P.A)(function*(){if(yield $._canUseIndexedDBPromise){const ve=yield function _t(J){return Et.apply(this,arguments)}($.app);return ve?.heartbeats?ve:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite($){var ie=this;return(0,P.A)(function*(){var ve;if(yield ie._canUseIndexedDBPromise){const ze=yield ie.read();return Y(ie.app,{lastSentHeartbeatDate:null!==(ve=$.lastSentHeartbeatDate)&&void 0!==ve?ve:ze.lastSentHeartbeatDate,heartbeats:$.heartbeats})}})()}add($){var ie=this;return(0,P.A)(function*(){var ve;if(yield ie._canUseIndexedDBPromise){const ze=yield ie.read();return Y(ie.app,{lastSentHeartbeatDate:null!==(ve=$.lastSentHeartbeatDate)&&void 0!==ve?ve:ze.lastSentHeartbeatDate,heartbeats:[...ze.heartbeats,...$.heartbeats]})}})()}}function $l(J){return(0,Pe.Uj)(JSON.stringify({version:2,heartbeats:J})).length}!function Mi(J){di(new ye.uA("platform-logger",$=>new mr($),"PRIVATE")),di(new ye.uA("heartbeat",$=>new eg($),"PRIVATE")),A(At,ys,J),A(At,ys,"esm2017"),A("fire-js","")}("")},779:(_s,gr,$e)=>{$e.d(gr,{h1:()=>Ft,uA:()=>N});var P=$e(467),ye=$e(401);class N{constructor(ee,ce,Re){this.name=ee,this.instanceFactory=ce,this.type=Re,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ee){return this.instantiationMode=ee,this}setMultipleInstances(ee){return this.multipleInstances=ee,this}setServiceProps(ee){return this.serviceProps=ee,this}setInstanceCreatedCallback(ee){return this.onInstanceCreated=ee,this}}const Pe="[DEFAULT]";class En{constructor(ee,ce){this.name=ee,this.container=ce,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ee){const ce=this.normalizeInstanceIdentifier(ee);if(!this.instancesDeferred.has(ce)){const Re=new ye.cY;if(this.instancesDeferred.set(ce,Re),this.isInitialized(ce)||this.shouldAutoInitialize())try{const ot=this.getOrInitializeService({instanceIdentifier:ce});ot&&Re.resolve(ot)}catch{}}return this.instancesDeferred.get(ce).promise}getImmediate(ee){var ce;const Re=this.normalizeInstanceIdentifier(ee?.identifier),ot=null!==(ce=ee?.optional)&&void 0!==ce&&ce;if(!this.isInitialized(Re)&&!this.shouldAutoInitialize()){if(ot)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Re})}catch(xe){if(ot)return null;throw xe}}getComponent(){return this.component}setComponent(ee){if(ee.name!==this.name)throw Error(`Mismatching Component ${ee.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ee,this.shouldAutoInitialize()){if(function Qt(wt){return"EAGER"===wt.instantiationMode}(ee))try{this.getOrInitializeService({instanceIdentifier:Pe})}catch{}for(const[ce,Re]of this.instancesDeferred.entries()){const ot=this.normalizeInstanceIdentifier(ce);try{const xe=this.getOrInitializeService({instanceIdentifier:ot});Re.resolve(xe)}catch{}}}}clearInstance(ee=Pe){this.instancesDeferred.delete(ee),this.instancesOptions.delete(ee),this.instances.delete(ee)}delete(){var ee=this;return(0,P.A)(function*(){const ce=Array.from(ee.instances.values());yield Promise.all([...ce.filter(Re=>"INTERNAL"in Re).map(Re=>Re.INTERNAL.delete()),...ce.filter(Re=>"_delete"in Re).map(Re=>Re._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ee=Pe){return this.instances.has(ee)}getOptions(ee=Pe){return this.instancesOptions.get(ee)||{}}initialize(ee={}){const{options:ce={}}=ee,Re=this.normalizeInstanceIdentifier(ee.instanceIdentifier);if(this.isInitialized(Re))throw Error(`${this.name}(${Re}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ot=this.getOrInitializeService({instanceIdentifier:Re,options:ce});for(const[xe,jn]of this.instancesDeferred.entries())Re===this.normalizeInstanceIdentifier(xe)&&jn.resolve(ot);return ot}onInit(ee,ce){var Re;const ot=this.normalizeInstanceIdentifier(ce),xe=null!==(Re=this.onInitCallbacks.get(ot))&&void 0!==Re?Re:new Set;xe.add(ee),this.onInitCallbacks.set(ot,xe);const jn=this.instances.get(ot);return jn&&ee(jn,ot),()=>{xe.delete(ee)}}invokeOnInitCallbacks(ee,ce){const Re=this.onInitCallbacks.get(ce);if(Re)for(const ot of Re)try{ot(ee,ce)}catch{}}getOrInitializeService({instanceIdentifier:ee,options:ce={}}){let Re=this.instances.get(ee);if(!Re&&this.component&&(Re=this.component.instanceFactory(this.container,{instanceIdentifier:(wt=ee,wt===Pe?void 0:wt),options:ce}),this.instances.set(ee,Re),this.instancesOptions.set(ee,ce),this.invokeOnInitCallbacks(Re,ee),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ee,Re)}catch{}var wt;return Re||null}normalizeInstanceIdentifier(ee=Pe){return this.component?this.component.multipleInstances?ee:Pe:ee}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ft{constructor(ee){this.name=ee,this.providers=new Map}addComponent(ee){const ce=this.getProvider(ee.name);if(ce.isComponentSet())throw new Error(`Component ${ee.name} has already been registered with ${this.name}`);ce.setComponent(ee)}addOrOverwriteComponent(ee){this.getProvider(ee.name).isComponentSet()&&this.providers.delete(ee.name),this.addComponent(ee)}getProvider(ee){if(this.providers.has(ee))return this.providers.get(ee);const ce=new En(ee,this);return this.providers.set(ee,ce),ce}getProviders(){return Array.from(this.providers.values())}}},398:(_s,gr,$e)=>{$e.d(gr,{$b:()=>ye,Ey:()=>wt,He:()=>Ft,Vy:()=>Qt});const P=[];var ye=function(ee){return ee[ee.DEBUG=0]="DEBUG",ee[ee.VERBOSE=1]="VERBOSE",ee[ee.INFO=2]="INFO",ee[ee.WARN=3]="WARN",ee[ee.ERROR=4]="ERROR",ee[ee.SILENT=5]="SILENT",ee}(ye||{});const N={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},Pe=ye.INFO,En={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},hn=(ee,ce,...Re)=>{if(ce<ee.logLevel)return;const ot=(new Date).toISOString(),xe=En[ce];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${ce})`);console[xe](`[${ot}]  ${ee.name}:`,...Re)};class Qt{constructor(ce){this.name=ce,this._logLevel=Pe,this._logHandler=hn,this._userLogHandler=null,P.push(this)}get logLevel(){return this._logLevel}set logLevel(ce){if(!(ce in ye))throw new TypeError(`Invalid value "${ce}" assigned to \`logLevel\``);this._logLevel=ce}setLogLevel(ce){this._logLevel="string"==typeof ce?N[ce]:ce}get logHandler(){return this._logHandler}set logHandler(ce){if("function"!=typeof ce)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ce}get userLogHandler(){return this._userLogHandler}set userLogHandler(ce){this._userLogHandler=ce}debug(...ce){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...ce),this._logHandler(this,ye.DEBUG,...ce)}log(...ce){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...ce),this._logHandler(this,ye.VERBOSE,...ce)}info(...ce){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...ce),this._logHandler(this,ye.INFO,...ce)}warn(...ce){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...ce),this._logHandler(this,ye.WARN,...ce)}error(...ce){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...ce),this._logHandler(this,ye.ERROR,...ce)}}function Ft(ee){P.forEach(ce=>{ce.setLogLevel(ee)})}function wt(ee,ce){for(const Re of P){let ot=null;ce&&ce.level&&(ot=N[ce.level]),Re.userLogHandler=null===ee?null:(xe,jn,...bt)=>{const et=bt.map(We=>{if(null==We)return null;if("string"==typeof We)return We;if("number"==typeof We||"boolean"==typeof We)return We.toString();if(We instanceof Error)return We.message;try{return JSON.stringify(We)}catch{return null}}).filter(We=>We).join(" ");jn>=(ot??xe.logLevel)&&ee({level:ye[jn].toLowerCase(),message:et,args:bt,type:xe.name})}}}},46:(_s,gr,$e)=>{var P=$e(467),ye=$e(574),N=$e(700),Pe=$e(401),Qt=($e(979),$e(398),$e(779));function Ft(){return window}function ce(){return ce=(0,P.A)(function*(A,I,b){var k;const{BuildInfo:O}=Ft();(0,N.au)(I.sessionId,"AuthEvent did not contain a session ID");const Q=yield function We(A){return $n.apply(this,arguments)}(I.sessionId),ge={};return(0,N.av)()?ge.ibi=O.packageName:(0,N.aw)()?ge.apn=O.packageName:(0,N.ax)(A,"operation-not-supported-in-this-environment"),O.displayName&&(ge.appDisplayName=O.displayName),ge.sessionId=Q,(0,N.ay)(A,b,I.type,void 0,null!==(k=I.eventId)&&void 0!==k?k:void 0,ge)}),ce.apply(this,arguments)}function ot(){return(ot=(0,P.A)(function*(A){const{BuildInfo:I}=Ft(),b={};(0,N.av)()?b.iosBundleId=I.packageName:(0,N.aw)()?b.androidPackageName=I.packageName:(0,N.ax)(A,"operation-not-supported-in-this-environment"),yield(0,N.az)(A,b)})).apply(this,arguments)}function bt(){return(bt=(0,P.A)(function*(A,I,b){const{cordova:k}=Ft();let O=()=>{};try{yield new Promise((Q,ge)=>{let Oe=null;function _t(){var be;Q();const Ae=null===(be=k.plugins.browsertab)||void 0===be?void 0:be.close;"function"==typeof Ae&&Ae(),"function"==typeof b?.close&&b.close()}function Et(){Oe||(Oe=window.setTimeout(()=>{ge((0,N.aB)(A,"redirect-cancelled-by-user"))},2e3))}function Y(){"visible"===document?.visibilityState&&Et()}I.addPassiveListener(_t),document.addEventListener("resume",Et,!1),(0,N.aw)()&&document.addEventListener("visibilitychange",Y,!1),O=()=>{I.removePassiveListener(_t),document.removeEventListener("resume",Et,!1),document.removeEventListener("visibilitychange",Y,!1),Oe&&window.clearTimeout(Oe)}})}finally{O()}})).apply(this,arguments)}function $n(){return($n=(0,P.A)(function*(A){const I=function Xn(A){if((0,N.au)(/[0-9a-zA-Z]+/.test(A),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(A);const I=new ArrayBuffer(A.length),b=new Uint8Array(I);for(let k=0;k<A.length;k++)b[k]=A.charCodeAt(k);return b}(A),b=yield crypto.subtle.digest("SHA-256",I);return Array.from(new Uint8Array(b)).map(O=>O.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class rt extends N.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(I=>{this.resolveInitialized=I})}addPassiveListener(I){this.passiveListeners.add(I)}removePassiveListener(I){this.passiveListeners.delete(I)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(I){return this.resolveInitialized(),this.passiveListeners.forEach(b=>b(I)),super.onEvent(I)}initialized(){var I=this;return(0,P.A)(function*(){yield I.initPromise})()}}function Ye(A){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,P.A)(function*(A){const I=yield mr()._get(li(A));return I&&(yield mr()._remove(li(A))),I})).apply(this,arguments)}function Nn(){const A=[];for(let b=0;b<20;b++){const k=Math.floor(62*Math.random());A.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(k))}return A.join("")}function mr(){return(0,N.aE)(N.b)}function li(A){return(0,N.aF)("authEvent",A.config.apiKey,A.name)}function Zn(A){if(!A?.includes("?"))return{};const[I,...b]=A.split("?");return(0,Pe.I9)(b.join("?"))}const ma=class ga{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aG,this._overrideRedirectResult=N.aH}_initialize(I){var b=this;return(0,P.A)(function*(){const k=I._key();let O=b.eventManagers.get(k);return O||(O=new rt(I),b.eventManagers.set(k,O),b.attachCallbackListeners(I,O)),O})()}_openPopup(I){(0,N.ax)(I,"operation-not-supported-in-this-environment")}_openRedirect(I,b,k,O){var Q=this;return(0,P.A)(function*(){!function et(A){var I,b,k,O,Q,ge,Oe,_t,Et,Y;const be=Ft();(0,N.aC)("function"==typeof(null===(I=be?.universalLinks)||void 0===I?void 0:I.subscribe),A,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.aC)(typeof(null===(b=be?.BuildInfo)||void 0===b?void 0:b.packageName)<"u",A,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.aC)("function"==typeof(null===(Q=null===(O=null===(k=be?.cordova)||void 0===k?void 0:k.plugins)||void 0===O?void 0:O.browsertab)||void 0===Q?void 0:Q.openUrl),A,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aC)("function"==typeof(null===(_t=null===(Oe=null===(ge=be?.cordova)||void 0===ge?void 0:ge.plugins)||void 0===Oe?void 0:Oe.browsertab)||void 0===_t?void 0:_t.isAvailable),A,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aC)("function"==typeof(null===(Y=null===(Et=be?.cordova)||void 0===Et?void 0:Et.InAppBrowser)||void 0===Y?void 0:Y.open),A,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(I);const ge=yield Q._initialize(I);yield ge.initialized(),ge.resetRedirect(),(0,N.aI)(),yield Q._originValidation(I);const Oe=function bi(A,I,b=null){return{type:I,eventId:b,urlResponse:null,sessionId:Nn(),postBody:null,tenantId:A.tenantId,error:(0,N.aB)(A,"no-auth-event")}}(I,k,O);yield function yo(A,I){return mr()._set(li(A),I)}(I,Oe);const _t=yield function ee(A,I,b){return ce.apply(this,arguments)}(I,Oe,b),Et=yield function xe(A){const{cordova:I}=Ft();return new Promise(b=>{I.plugins.browsertab.isAvailable(k=>{let O=null;k?I.plugins.browsertab.openUrl(A):O=I.InAppBrowser.open(A,(0,N.aA)()?"_blank":"_system","location=yes"),b(O)})})}(_t);return function jn(A,I,b){return bt.apply(this,arguments)}(I,ge,Et)})()}_isIframeWebStorageSupported(I,b){throw new Error("Method not implemented.")}_originValidation(I){const b=I._key();return this.originValidationPromises[b]||(this.originValidationPromises[b]=function Re(A){return ot.apply(this,arguments)}(I)),this.originValidationPromises[b]}attachCallbackListeners(I,b){const{universalLinks:k,handleOpenURL:O,BuildInfo:Q}=Ft(),ge=setTimeout((0,P.A)(function*(){yield Ye(I),b.onEvent(Ai())}),500),Oe=function(){var Y=(0,P.A)(function*(be){clearTimeout(ge);const Ae=yield Ye(I);let Ke=null;Ae&&be?.url&&(Ke=function tn(A,I){var b,k;const O=function ys(A){const I=Zn(A),b=I.link?decodeURIComponent(I.link):void 0,k=Zn(b).link,O=I.deep_link_id?decodeURIComponent(I.deep_link_id):void 0;return Zn(O).link||O||k||b||A}(I);if(O.includes("/__/auth/callback")){const Q=Zn(O),ge=Q.firebaseError?function At(A){try{return JSON.parse(A)}catch{return null}}(decodeURIComponent(Q.firebaseError)):null,Oe=null===(k=null===(b=ge?.code)||void 0===b?void 0:b.split("auth/"))||void 0===k?void 0:k[1],_t=Oe?(0,N.aB)(Oe):null;return _t?{type:A.type,eventId:A.eventId,tenantId:A.tenantId,error:_t,urlResponse:null,sessionId:null,postBody:null}:{type:A.type,eventId:A.eventId,tenantId:A.tenantId,sessionId:A.sessionId,urlResponse:O,postBody:null}}return null}(Ae,be.url)),b.onEvent(Ke||Ai())});return function(Ae){return Y.apply(this,arguments)}}();typeof k<"u"&&"function"==typeof k.subscribe&&k.subscribe(null,Oe);const _t=O,Et=`${Q.packageName.toLowerCase()}://`;Ft().handleOpenURL=function(){var Y=(0,P.A)(function*(be){if(be.toLowerCase().startsWith(Et)&&Oe({url:be}),"function"==typeof _t)try{_t(be)}catch(Ae){console.error(Ae)}});return function(be){return Y.apply(this,arguments)}}()}};function Ai(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.aB)("no-auth-event")}}function Dr(){var A;return(null===(A=self?.location)||void 0===A?void 0:A.protocol)||null}function Io(A=(0,Pe.ZQ)()){return!("file:"!==Dr()&&"ionic:"!==Dr()&&"capacitor:"!==Dr()||!A.toLowerCase().match(/iphone|ipad|ipod|android/))}function bo(){try{const A=self.localStorage,I=N.aN();if(A)return A.setItem(I,"1"),A.removeItem(I),!function Wi(A=(0,Pe.ZQ)()){return function Gi(){return(0,Pe.lT)()&&11===document?.documentMode}()||function To(A=(0,Pe.ZQ)()){return/Edge\/\d+/.test(A)}(A)}()||(0,Pe.zW)()}catch{return vs()&&(0,Pe.zW)()}return!1}function vs(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function er(){return(function Vs(){return"http:"===Dr()||"https:"===Dr()}()||(0,Pe.sr)()||Io())&&!function wo(){return(0,Pe.lV)()||(0,Pe.Ll)()}()&&bo()&&!vs()}function Di(){return Io()&&typeof document<"u"}function ci(){return(ci=(0,P.A)(function*(){return!!Di()&&new Promise(A=>{const I=setTimeout(()=>{A(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(I),A(!0)})})})).apply(this,arguments)}const dt={LOCAL:"local",NONE:"none",SESSION:"session"},_r=N.aC,Vt="persistence";function Ki(A){return le.apply(this,arguments)}function le(){return(le=(0,P.A)(function*(A){yield A._initializationPromise;const I=Yt(),b=N.aF(Vt,A.config.apiKey,A.name);I&&I.setItem(b,A._getPersistence())})).apply(this,arguments)}function Yt(){var A;try{return(null===(A=function bn(){return typeof window<"u"?window:null}())||void 0===A?void 0:A.sessionStorage)||null}catch{return null}}const nr=N.aC;class Tt{constructor(){this.browserResolver=N.aE(N.k),this.cordovaResolver=N.aE(ma),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aG,this._overrideRedirectResult=N.aH}_initialize(I){var b=this;return(0,P.A)(function*(){return yield b.selectUnderlyingResolver(),b.assertedUnderlyingResolver._initialize(I)})()}_openPopup(I,b,k,O){var Q=this;return(0,P.A)(function*(){return yield Q.selectUnderlyingResolver(),Q.assertedUnderlyingResolver._openPopup(I,b,k,O)})()}_openRedirect(I,b,k,O){var Q=this;return(0,P.A)(function*(){return yield Q.selectUnderlyingResolver(),Q.assertedUnderlyingResolver._openRedirect(I,b,k,O)})()}_isIframeWebStorageSupported(I,b){this.assertedUnderlyingResolver._isIframeWebStorageSupported(I,b)}_originValidation(I){return this.assertedUnderlyingResolver._originValidation(I)}get _shouldInitProactively(){return Di()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return nr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var I=this;return(0,P.A)(function*(){if(I.underlyingResolver)return;const b=yield function va(){return ci.apply(this,arguments)}();I.underlyingResolver=b?I.cordovaResolver:I.browserResolver})()}}function Si(A){return A.unwrap()}function di(A){return hi(A)}function hi(A){const{_tokenResponse:I}=A instanceof Pe.g?A.customData:A;if(!I)return null;if(!(A instanceof Pe.g)&&"temporaryProof"in I&&"phoneNumber"in I)return N.P.credentialFromResult(A);const b=I.providerId;if(!b||b===N.p.PASSWORD)return null;let k;switch(b){case N.p.GOOGLE:k=N.X;break;case N.p.FACEBOOK:k=N.W;break;case N.p.GITHUB:k=N.Y;break;case N.p.TWITTER:k=N.$;break;default:const{oauthIdToken:O,oauthAccessToken:Q,oauthTokenSecret:ge,pendingToken:Oe,nonce:_t}=I;return Q||ge||O||Oe?Oe?b.startsWith("saml.")?N.aQ._create(b,Oe):N.N._fromParams({providerId:b,signInMethod:b,pendingToken:Oe,idToken:O,accessToken:Q}):new N.Z(b).credential({idToken:O,accessToken:Q,rawNonce:_t}):null}return A instanceof Pe.g?k.credentialFromError(A):k.credentialFromResult(A)}function In(A,I){return I.catch(b=>{throw b instanceof Pe.g&&function Pi(A,I){var b;const k=null===(b=I.customData)||void 0===b?void 0:b._tokenResponse;if("auth/multi-factor-auth-required"===I?.code)I.resolver=new Dt(A,N.as(A,I));else if(k){const O=hi(I),Q=I;O&&(Q.credential=O,Q.tenantId=k.tenantId||void 0,Q.email=k.email||void 0,Q.phoneNumber=k.phoneNumber||void 0)}}(A,b),b}).then(b=>{const O=b.user;return{operationType:b.operationType,credential:di(b),additionalUserInfo:N.aq(b),user:Be.getOrCreate(O)}})}function Do(A,I){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,P.A)(function*(A,I){const b=yield I;return{verificationId:b.verificationId,confirm:k=>In(A,b.confirm(k))}})).apply(this,arguments)}class Dt{constructor(I,b){this.resolver=b,this.auth=function Ao(A){return A.wrapped()}(I)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(I){return In(Si(this.auth),this.resolver.resolveSignIn(I))}}class Be{constructor(I){this._delegate=I,this.multiFactor=N.at(I)}static getOrCreate(I){return Be.USER_MAP.has(I)||Be.USER_MAP.set(I,new Be(I)),Be.USER_MAP.get(I)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(I){return this._delegate.getIdTokenResult(I)}getIdToken(I){return this._delegate.getIdToken(I)}linkAndRetrieveDataWithCredential(I){return this.linkWithCredential(I)}linkWithCredential(I){var b=this;return(0,P.A)(function*(){return In(b.auth,N.a2(b._delegate,I))})()}linkWithPhoneNumber(I,b){var k=this;return(0,P.A)(function*(){return Do(k.auth,N.l(k._delegate,I,b))})()}linkWithPopup(I){var b=this;return(0,P.A)(function*(){return In(b.auth,N.d(b._delegate,I,Tt))})()}linkWithRedirect(I){var b=this;return(0,P.A)(function*(){return yield Ki(N.aJ(b.auth)),N.g(b._delegate,I,Tt)})()}reauthenticateAndRetrieveDataWithCredential(I){return this.reauthenticateWithCredential(I)}reauthenticateWithCredential(I){var b=this;return(0,P.A)(function*(){return In(b.auth,N.a3(b._delegate,I))})()}reauthenticateWithPhoneNumber(I,b){return Do(this.auth,N.r(this._delegate,I,b))}reauthenticateWithPopup(I){return In(this.auth,N.e(this._delegate,I,Tt))}reauthenticateWithRedirect(I){var b=this;return(0,P.A)(function*(){return yield Ki(N.aJ(b.auth)),N.h(b._delegate,I,Tt)})()}sendEmailVerification(I){return N.ag(this._delegate,I)}unlink(I){var b=this;return(0,P.A)(function*(){return yield N.ap(b._delegate,I),b})()}updateEmail(I){return N.al(this._delegate,I)}updatePassword(I){return N.am(this._delegate,I)}updatePhoneNumber(I){return N.u(this._delegate,I)}updateProfile(I){return N.ak(this._delegate,I)}verifyBeforeUpdateEmail(I,b){return N.ah(this._delegate,I,b)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Be.USER_MAP=new WeakMap;const qr=N.aC;let Qi=(()=>{class A{constructor(b,k){if(this.app=b,k.isInitialized())return this._delegate=k.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:O}=b.options;qr(O,"invalid-api-key",{appName:b.name}),qr(O,"invalid-api-key",{appName:b.name});const Q=typeof window<"u"?Tt:void 0;this._delegate=k.initialize({options:{persistence:yr(O,b.name),popupRedirectResolver:Q}}),this._delegate._updateErrorMap(N.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Be.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(b){this._delegate.languageCode=b}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(b){this._delegate.tenantId=b}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(b,k){N.K(this._delegate,b,k)}applyActionCode(b){return N.a7(this._delegate,b)}checkActionCode(b){return N.a8(this._delegate,b)}confirmPasswordReset(b,k){return N.a6(this._delegate,b,k)}createUserWithEmailAndPassword(b,k){var O=this;return(0,P.A)(function*(){return In(O._delegate,N.aa(O._delegate,b,k))})()}fetchProvidersForEmail(b){return this.fetchSignInMethodsForEmail(b)}fetchSignInMethodsForEmail(b){return N.af(this._delegate,b)}isSignInWithEmailLink(b){return N.ad(this._delegate,b)}getRedirectResult(){var b=this;return(0,P.A)(function*(){qr(er(),b._delegate,"operation-not-supported-in-this-environment");const k=yield N.j(b._delegate,Tt);return k?In(b._delegate,Promise.resolve(k)):{credential:null,user:null}})()}addFrameworkForLogging(b){!function _a(A,I){(0,N.aJ)(A)._logFramework(I)}(this._delegate,b)}onAuthStateChanged(b,k,O){const{next:Q,error:ge,complete:Oe}=wn(b,k,O);return this._delegate.onAuthStateChanged(Q,ge,Oe)}onIdTokenChanged(b,k,O){const{next:Q,error:ge,complete:Oe}=wn(b,k,O);return this._delegate.onIdTokenChanged(Q,ge,Oe)}sendSignInLinkToEmail(b,k){return N.ac(this._delegate,b,k)}sendPasswordResetEmail(b,k){return N.a5(this._delegate,b,k||void 0)}setPersistence(b){var k=this;return(0,P.A)(function*(){let O;switch(function Ci(A,I){_r(Object.values(dt).includes(I),A,"invalid-persistence-type"),(0,Pe.lV)()?_r(I!==dt.SESSION,A,"unsupported-persistence-type"):(0,Pe.Ll)()?_r(I===dt.NONE,A,"unsupported-persistence-type"):vs()?_r(I===dt.NONE||I===dt.LOCAL&&(0,Pe.zW)(),A,"unsupported-persistence-type"):_r(I===dt.NONE||bo(),A,"unsupported-persistence-type")}(k._delegate,b),b){case dt.SESSION:O=N.a;break;case dt.LOCAL:O=(yield N.aE(N.i)._isAvailable())?N.i:N.b;break;case dt.NONE:O=N.U;break;default:return N.ax("argument-error",{appName:k._delegate.name})}return k._delegate.setPersistence(O)})()}signInAndRetrieveDataWithCredential(b){return this.signInWithCredential(b)}signInAnonymously(){return In(this._delegate,N.a0(this._delegate))}signInWithCredential(b){return In(this._delegate,N.a1(this._delegate,b))}signInWithCustomToken(b){return In(this._delegate,N.a4(this._delegate,b))}signInWithEmailAndPassword(b,k){return In(this._delegate,N.ab(this._delegate,b,k))}signInWithEmailLink(b,k){return In(this._delegate,N.ae(this._delegate,b,k))}signInWithPhoneNumber(b,k){return Do(this._delegate,N.s(this._delegate,b,k))}signInWithPopup(b){var k=this;return(0,P.A)(function*(){return qr(er(),k._delegate,"operation-not-supported-in-this-environment"),In(k._delegate,N.c(k._delegate,b,Tt))})()}signInWithRedirect(b){var k=this;return(0,P.A)(function*(){return qr(er(),k._delegate,"operation-not-supported-in-this-environment"),yield Ki(k._delegate),N.f(k._delegate,b,Tt)})()}updateCurrentUser(b){return this._delegate.updateCurrentUser(b)}verifyPasswordResetCode(b){return N.a9(this._delegate,b)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return A.Persistence=dt,A})();function wn(A,I,b){let k=A;"function"!=typeof A&&({next:k,error:I,complete:b}=A);const O=k;return{next:ge=>O(ge&&Be.getOrCreate(ge)),error:I,complete:b}}function yr(A,I){const b=function tr(A,I){const b=Yt();if(!b)return[];const k=N.aF(Vt,A,I);switch(b.getItem(k)){case dt.NONE:return[N.U];case dt.LOCAL:return[N.i,N.a];case dt.SESSION:return[N.a];default:return[]}}(A,I);if(typeof self<"u"&&!b.includes(N.i)&&b.push(N.i),typeof window<"u")for(const k of[N.b,N.a])b.includes(k)||b.push(k);return b.includes(N.U)||b.push(N.U),b}class Ri{constructor(){this.providerId="phone",this._delegate=new N.P(Si(ye.A.auth()))}static credential(I,b){return N.P.credential(I,b)}verifyPhoneNumber(I,b){return this._delegate.verifyPhoneNumber(I,b)}unwrap(){return this._delegate}}Ri.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,Ri.PROVIDER_ID=N.P.PROVIDER_ID;const Bs=N.aC;class Ea{constructor(I,b,k=ye.A.app()){var O;Bs(null===(O=k.options)||void 0===O?void 0:O.apiKey,"invalid-api-key",{appName:k.name}),this._delegate=new N.R(k.auth(),I,b),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function tt(A){A.INTERNAL.registerComponent(new Qt.uA("auth-compat",I=>{const b=I.getProvider("app-compat").getImmediate(),k=I.getProvider("auth");return new Qi(b,k)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.V,FacebookAuthProvider:N.W,GithubAuthProvider:N.Y,GoogleAuthProvider:N.X,OAuthProvider:N.Z,SAMLAuthProvider:N._,PhoneAuthProvider:Ri,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:Ea,TwitterAuthProvider:N.$,Auth:Qi,AuthCredential:N.L,Error:Pe.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),A.registerVersion("@firebase/auth-compat","0.5.14")}(ye.A)},467:(_s,gr,$e)=>{function P(N,Pe,En,hn,Qt,Ft,wt){try{var ee=N[Ft](wt),ce=ee.value}catch(Re){return void En(Re)}ee.done?Pe(ce):Promise.resolve(ce).then(hn,Qt)}function ye(N){return function(){var Pe=this,En=arguments;return new Promise(function(hn,Qt){var Ft=N.apply(Pe,En);function wt(ce){P(Ft,hn,Qt,wt,ee,"next",ce)}function ee(ce){P(Ft,hn,Qt,wt,ee,"throw",ce)}wt(void 0)})}}$e.d(gr,{A:()=>ye})}},_s=>{_s(_s.s=867)}]);